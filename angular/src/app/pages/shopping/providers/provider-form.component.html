<nb-card>
  <nb-card-header>
    {{ 'general.createEdit' | translate | uppercase }} {{ title | uppercase}}
  </nb-card-header>
  <nb-card-body>
    <form [formGroup]="customForm">
      <ul ngbNav #nav="ngbNav" [(activeId)]="active" class="nav-tabs">
        <li [ngbNavItem]="1">
          <a ngbNavLink class="display-none">General</a>
          <ng-template ngbNavContent>
            <div class="row">
              <div class="col-md-6">
                <div class="form-group">
                  <label><span
                      class="asterisk">{{ 'general.asterisk' | translate }}</span>{{'companies.type_organization' | translate}}</label>
                  <ng-select fullWidth formControlName="type_organization_id" required name="type_organization_id"
                    [class.is-invalid]="invalidOrganization">
                    <ng-option *ngFor="let typeOrg of typeOrg" [value]="typeOrg.id">{{ typeOrg.description }}
                    </ng-option>
                  </ng-select>
                </div>
              </div>
              <div class="col-md-6">
                <div class="form-group">
                  <label><span class="asterisk">{{ 'general.asterisk' | translate }}</span>Mostrar nombre como</label>
                  <input type="text" nbInput fullWidth formControlName="full_name" required autofocus #focusElement
                  [class.is-invalid]="invalidFullName" [class.status-danger]="invalidFullName">
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col-md-6">
                <div class="form-group">
                  <label><span
                      class="asterisk">{{ 'general.asterisk' | translate }}</span>{{'companies.currency' | translate}}</label>
                  <ng-select fullWidth formControlName="currency_id" name="currency_id" required
                    [class.is-invalid]="invalidCurrency" [class.status-danger]="invalidCurrency">
                    <ng-option *ngFor="let curre of currency" [value]="curre.id">
                      <img height="15" width="15" [src]="'assets/flags/'+curre.image" /> {{ curre.CurrencyName }}
                    </ng-option>
                  </ng-select>
                </div>
              </div>
              <div class="col-md-6">
                <div class="form-group">
                  <label><span
                      class="asterisk">{{ 'general.asterisk' | translate }}</span>{{'companies.country' | translate}}</label>
                  <ng-select fullWidth formControlName="country_id" required [class.is-invalid]="invalidCountry"
                    [class.status-danger]="invalidCountry" [virtualScroll]="true">
                    <ng-option *ngFor="let country of countries" [value]="country.id">
                      <img height="15" width="15" [src]="'assets/flags/'+country.image" /> {{ country.country_name }}
                    </ng-option>
                  </ng-select>
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col-md-2">
                <div class="form-group">
                  <label>Titulo</label>
                  <input class="form-control" type="text" nbInput fullWidth formControlName="title"
                    name="title">
                </div>
              </div>
              <div class="col-md-5">
                <div class="form-group">
                  <label>Nombres</label>
                  <input class="form-control" type="text" nbInput fullWidth formControlName="names">
                </div>
              </div>
              <div class="col-md-5">
                <div class="form-group">
                  <label>Apellidos</label>
                  <input class="form-control" type="text" nbInput fullWidth formControlName="last_name" >
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col-md-6">
                <div class="form-group">
                  <label>DNI</label>
                  <input type="text" nbInput fullWidth formControlName="dni">
                </div>
              </div>
              <div class="col-md-6">
                <div class="form-group">
                  <label>Nombre de la empresa</label>
                  <input type="text" nbInput fullWidth formControlName="company_name">
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col-md-6">
                <div class="form-group">
                  <label>Correo electrónico</label>
                  <input type="text" nbInput fullWidth formControlName="email">
                </div>
              </div>
              <div class="col-md-6">
                <div class="form-group">
                  <label>Web</label>
                  <input type="text" nbInput fullWidth formControlName="web">
                </div>
              </div>
            </div>
          </ng-template>
        </li>
        <li [ngbNavItem]="2">
          <a ngbNavLink class="display-none">Ubicación/Dirección</a>
          <ng-template ngbNavContent>
            <div class="row">
              <div class="col-md-6">
                <div class="form-group">
                  <label>Dirección principal</label>
                  <textarea nbInput fullWidth formControlName="address" rows="2"></textarea>
                </div>
              </div>
              <div class="col-md-6">
                <div class="form-group">
                  <label>Dirección postal</label>
                  <textarea nbInput fullWidth formControlName="location" rows="2"></textarea>
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col-md-6">
                <div class="form-group">
                  <label>Ciudad/Distrito</label>
                  <input type="text" nbInput fullWidth formControlName="city_name">
                </div>
              </div>
              <div class="col-md-6">
                <label>Estado/Provincia</label>
                <input type="text" nbInput fullWidth formControlName="state_name">
              </div>
            </div>
            <div class="row">
              <div class="col-md-6">
                <div class="form-group">
                  <label>Código postal</label>
                  <input type="text" nbInput fullWidth formControlName="postal_code">
                </div>
              </div>
              <div class="col-md-6">
                <label>Movil</label>
                <input type="text" nbInput fullWidth formControlName="mobile">
              </div>
            </div>
            <div class="row">
              <div class="col-md-6">
                <div class="form-group">
                  <label>Fijo</label>
                  <input type="text" nbInput fullWidth formControlName="phone">
                </div>
              </div>
            </div>
          </ng-template>
        </li>
        <li [ngbNavItem]="3">
          <a ngbNavLink class="display-none">Pago y facturación</a>
          <ng-template ngbNavContent>
            <div class="row">
              <div class="col-md-6">
                <div class="form-group">
                  <label>{{ 'general.tax' | translate }}</label>
                  <ng-select fullWidth formControlName="tax_rate_id">
                    <ng-option value="0">Seleccionar</ng-option>
                    <ng-option *ngFor="let tax of tax" [value]="tax.id">
                      {{ tax.name_taxe }} - {{ tax.rate_name }}
                    </ng-option>
                  </ng-select>
                </div>
              </div>
              <div class="col-md-6">
                <div class="form-group">
                  <label>Cuenta contable</label>
                  <ng-select fullWidth formControlName="accounting_account_id" [virtualScroll]="true">
                    <ng-option value="0">Seleccionar</ng-option>
                    <ng-option *ngFor="let account of accounts" [value]="account.id">
                      {{ account.account_number }} - {{ account.account_name }}
                    </ng-option>
                  </ng-select>
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col-md-6">
                <div class="form-group">
                  <label>Metodo de pago preferido</label>
                  <ng-select fullWidth formControlName="means_payment_id">
                    <ng-option value="0">Seleccionar</ng-option>
                    <ng-option *ngFor="let payment of payments" [value]="payment.id">
                     {{ payment.payment_method }}
                    </ng-option>
                  </ng-select>
                </div>
              </div>
              <div class="col-md-6">
                <div class="form-group">
                  <label>Condiciones de pago</label>
                  <ng-select fullWidth formControlName="sales_term" [virtualScroll]="true">
                    <ng-option value="0">Seleccionar</ng-option>
                    <ng-option *ngFor="let timel of timelimits" [value]="timel.id">
                      {{ timel.term_name }}
                    </ng-option>
                  </ng-select>
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col-md-6">
                <div class="form-group">
                  <label>Saldo inicial</label>
                  <input nbInput fullWidth class="form-control" currencyMask name="initial_balance" formControlName="initial_balance">
                </div>
              </div>
              <div class="col-md-6">
                <div class="form-group">
                  <label>A partir de la fecha</label>
                  <input nbInput fullWidth type="date" class="form-control" name="initial_date" formControlName="initial_date">
                </div>
              </div>
            </div>
          </ng-template>
        </li>
      </ul>
      <div [ngbNavOutlet]="nav" class="mt-2"></div>
    </form>
  </nb-card-body>
  <nb-card-footer>
    <app-footer-form [saveAClose]="saveAClose" [saveAClose]="saveAClose" (closeEvent)="cancel()"
                          (saveAndCreateEvent)="saveAndCreate()" (saveAndCloseEvent)="saveAndClose()"></app-footer-form>
  </nb-card-footer>
</nb-card>
