!function(){function e(e,t){for(var c=0;c<t.length;c++){var a=t[c];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function t(t,c,a){return c&&e(t.prototype,c),a&&e(t,a),t}function c(e,t,a){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,c){var a=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=r(e)););return e}(e,t);if(a){var n=Object.getOwnPropertyDescriptor(a,t);return n.get?n.get.call(c):n.value}})(e,t,a||e)}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&n(e,t)}function n(e,t){return(n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var c,a=r(e);if(t){var n=r(this).constructor;c=Reflect.construct(a,arguments,n)}else c=a.apply(this,arguments);return o(this,c)}}function o(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function r(e){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{aAFz:function(e,n,o){"use strict";o.r(n),o.d(n,"customCurrencyMaskConfig",function(){return ze}),o.d(n,"ShoppingModule",function(){return je});var s,d=o("ofXK"),u=o("3Pt+"),b=o("aSZe"),p=o("7M0M"),m=o("Z1v9"),f=o("3HhI"),g=o("ZOsW"),v=o("1kSV"),h=o("TT0I"),_=o("pKmL"),y=o("JqCM"),x=o("sYmb"),C=o("tyNb"),S=o("fXoL"),I=((s=function e(){l(this,e)}).\u0275fac=function(e){return new(e||s)},s.\u0275cmp=S.Qb({type:s,selectors:[["app-shopping"]],decls:1,vars:0,template:function(e,t){1&e&&S.Xb(0,"router-outlet")},directives:[C.g],encapsulation:2}),s),w=o("py8Q"),k=o("YMfE"),O=["customGrid"],F=["searchField"];function P(e,t){if(1&e){var c=S.dc();S.cc(0,"div"),S.cc(1,"button",21),S.mc("click",function(){return S.Lc(c),S.oc().importData()}),S.Xb(2,"i",33),S.Uc(3),S.pc(4,"translate"),S.bc(),S.bc()}if(2&e){var a=S.oc();S.Ib(1),S.vc("disabled",a.loading),S.Ib(2),S.Wc(" ",S.qc(4,2,"buttons.import")," ")}}var U,M=((U=function(e){a(o,e);var n=i(o);function o(e,t,c,a,i){var r;return l(this,o),(r=n.call(this,e,t,c,a,i)).msg=e,r.api=t,r.router=c,r.translate=a,r.aRouter=i,r.title="Proveedores",r}return t(o,[{key:"ngOnInit",value:function(){this.changeLanguage(this.activeLang)}},{key:"ngAfterViewInit",value:function(){var e=this;e.crudApi={create:"/persons/create/provider",read:"/persons/providers",update:"/persons/update/",delete:"/persons/delete/"},e.showActions=!0,e.showRowNumber=!0,e.pagesize=10,e.datafields=[{name:"id",type:"number"},{name:"company_name",type:"string"},{name:"dni",type:"string"},{name:"description",type:"string"},{name:"full_name",type:"string"}],e.sourceColumns=[{text:"Mostrar nombre como",datafield:"full_name",align:"center"},{text:"DNI",datafield:"dni",align:"center",minWidth:100,cellsalign:"right"},{text:"Empresa",datafield:"company_name",align:"center"}],this.prepareGrid()}},{key:"createData",value:function(){c(r(o.prototype),"createData",this).call(this),this.goRoute("shopping/providers/create")}},{key:"editData",value:function(e){c(r(o.prototype),"editData",this).call(this,e),this.goRoute("shopping/providers/edit/".concat(e.id))}}]),o}(w.a)).\u0275fac=function(e){return new(e||U)(S.Wb(k.b),S.Wb(k.a),S.Wb(C.c),S.Wb(x.d),S.Wb(C.a))},U.\u0275cmp=S.Qb({type:U,selectors:[["app-providers"]],viewQuery:function(e,t){var c;1&e&&(S.ad(O,1),S.ad(F,1)),2&e&&(S.Hc(c=S.nc())&&(t.customGrid=c.first),S.Hc(c=S.nc())&&(t.searchField=c.first))},features:[S.Fb],decls:77,vars:38,consts:[[1,"card"],[1,"card-header"],[1,"card-title"],[1,"menuExport"],[1,"space-right"],[1,"btn","btn-danger","round","mr-1","mb-1",3,"disabled","click"],[1,"fa","fa-sync","mr-1","fas-fa-22"],[1,"myMenu","space-right"],[1,"clearColor",3,"height","onItemclick"],["myMenu",""],["id","Exports"],[1,"fas","fa-cog","fas-fa-22","fas-fa-red"],["href","javascript:void(0)"],[2,"width","200px"],[1,"fas","fa-file-excel","fas-fa-xls"],[1,"fas","fa-file-csv","fas-fa-xls"],["type","separator"],[1,"fas","fa-file-pdf","fas-fa-pdf"],[1,"fas","fa-file-code","fas-fa-code"],[1,"fas","fa-print","fas-fa-print"],[1,"margin-left","space-right"],[1,"btn","btn-success","round","mr-1","mb-1",3,"disabled","click"],[1,"fa","fa-plus","mr-1","fas-fa-22"],[4,"ngIf"],[1,"container-fluid"],[1,"input-group"],["type","text","autofocus","",1,"form-control",3,"placeholder","keyup"],["searchField",""],[1,"input-group-append"],[1,"btn","btn-primary",3,"disabled","click"],[1,"fa","fa-search"],["width","100%",3,"disabled","auto-create","onCellselect","onBindingcomplete"],["customGrid",""],[1,"fa","fa-upload","mr-1","fas-fa-22"]],template:function(e,t){1&e&&(S.cc(0,"div",0),S.cc(1,"div",1),S.cc(2,"h4",2),S.Uc(3),S.pc(4,"uppercase"),S.bc(),S.bc(),S.cc(5,"div",0),S.cc(6,"div",3),S.cc(7,"div",4),S.cc(8,"button",5),S.mc("click",function(){return t.searchQuery()}),S.Xb(9,"i",6),S.bc(),S.bc(),S.cc(10,"div",7),S.cc(11,"jqxMenu",8,9),S.mc("onItemclick",function(e){return t.itemclick(e)}),S.cc(13,"ul"),S.cc(14,"li",10),S.Xb(15,"i",11),S.Xb(16,"a",12),S.cc(17,"ul",13),S.cc(18,"li"),S.cc(19,"a",12),S.Xb(20,"i",14),S.Uc(21),S.pc(22,"translate"),S.bc(),S.bc(),S.cc(23,"li"),S.cc(24,"a",12),S.Xb(25,"i",15),S.Uc(26),S.pc(27,"translate"),S.bc(),S.bc(),S.cc(28,"li"),S.cc(29,"a",12),S.Xb(30,"i",14),S.Uc(31),S.pc(32,"translate"),S.bc(),S.bc(),S.Xb(33,"li",16),S.cc(34,"li"),S.cc(35,"a",12),S.Xb(36,"i",17),S.Uc(37),S.pc(38,"translate"),S.bc(),S.bc(),S.Xb(39,"li",16),S.cc(40,"li"),S.cc(41,"a",12),S.Xb(42,"i",18),S.Uc(43),S.pc(44,"translate"),S.bc(),S.bc(),S.cc(45,"li"),S.cc(46,"a",12),S.Xb(47,"i",18),S.Uc(48),S.pc(49,"translate"),S.bc(),S.bc(),S.cc(50,"li"),S.cc(51,"a",12),S.Xb(52,"i",18),S.Uc(53),S.pc(54,"translate"),S.bc(),S.bc(),S.Xb(55,"li",16),S.cc(56,"li"),S.cc(57,"a",12),S.Xb(58,"i",19),S.Uc(59),S.pc(60,"translate"),S.bc(),S.bc(),S.bc(),S.bc(),S.bc(),S.bc(),S.bc(),S.cc(61,"div",20),S.cc(62,"button",21),S.mc("click",function(){return t.createData()}),S.Xb(63,"i",22),S.Uc(64),S.pc(65,"translate"),S.bc(),S.bc(),S.Sc(66,P,5,4,"div",23),S.bc(),S.cc(67,"div",24),S.cc(68,"fieldset"),S.cc(69,"div",25),S.cc(70,"input",26,27),S.mc("keyup",function(e){return t.inputKey(e)}),S.bc(),S.cc(72,"div",28),S.cc(73,"button",29),S.mc("click",function(){return t.searchQuery()}),S.Xb(74,"i",30),S.bc(),S.bc(),S.bc(),S.bc(),S.cc(75,"jqxGrid",31,32),S.mc("onCellselect",function(e){return t.cellClick(e)})("onBindingcomplete",function(e){return t.Bindingcomplete(e)}),S.bc(),S.bc(),S.bc(),S.bc()),2&e&&(S.Ib(3),S.Vc(S.qc(4,18,t.title)),S.Ib(5),S.vc("disabled",t.loading),S.Ib(3),S.vc("height",36),S.Ib(10),S.Vc(S.qc(22,20,"export.excel")),S.Ib(5),S.Vc(S.qc(27,22,"export.csv")),S.Ib(5),S.Vc(S.qc(32,24,"export.xml")),S.Ib(6),S.Vc(S.qc(38,26,"export.pdf")),S.Ib(6),S.Vc(S.qc(44,28,"export.html")),S.Ib(5),S.Vc(S.qc(49,30,"export.json")),S.Ib(5),S.Vc(S.qc(54,32,"export.tsv")),S.Ib(6),S.Vc(S.qc(60,34,"export.print")),S.Ib(3),S.vc("disabled",t.loading),S.Ib(2),S.Wc(" ",S.qc(65,36,"buttons.new")," "),S.Ib(2),S.vc("ngIf",t.useImport),S.Ib(4),S.vc("placeholder",t.placeholderSearch),S.Ib(3),S.vc("disabled",t.loading),S.Ib(2),S.vc("disabled",t.loading)("auto-create",!1))},directives:[p.a,d.n,b.a],pipes:[d.v,x.c],encapsulation:2}),U),D=o("TK7J"),X=o("UnFQ"),q=o("Absx"),W=o("mm0L"),N=o("PcHl"),T=o("dKyG"),V=o("uHPU"),R=["focusElement"],A=["uploadFile"],B=["imgUp"];function E(e,t){if(1&e&&(S.cc(0,"ng-option",31),S.Uc(1),S.bc()),2&e){var c=t.$implicit;S.vc("value",c.id),S.Ib(1),S.Wc("",c.description," ")}}function G(e,t){if(1&e&&(S.cc(0,"ng-option",31),S.Xb(1,"img",32),S.Uc(2),S.bc()),2&e){var c=t.$implicit;S.vc("value",c.id),S.Ib(1),S.vc("src","assets/flags/"+c.image,S.Oc),S.Ib(1),S.Wc(" ",c.CurrencyName," ")}}function L(e,t){if(1&e&&(S.cc(0,"ng-option",31),S.Xb(1,"img",32),S.Uc(2),S.bc()),2&e){var c=t.$implicit;S.vc("value",c.id),S.Ib(1),S.vc("src","assets/flags/"+c.image,S.Oc),S.Ib(1),S.Wc(" ",c.country_name," ")}}function z(e,t){if(1&e&&(S.cc(0,"div",12),S.cc(1,"div",13),S.cc(2,"div",14),S.cc(3,"label"),S.cc(4,"span",15),S.Uc(5),S.pc(6,"translate"),S.bc(),S.Uc(7),S.pc(8,"translate"),S.bc(),S.cc(9,"ng-select",16),S.Sc(10,E,2,2,"ng-option",17),S.bc(),S.bc(),S.bc(),S.cc(11,"div",13),S.cc(12,"div",14),S.cc(13,"label"),S.cc(14,"span",15),S.Uc(15),S.pc(16,"translate"),S.bc(),S.Uc(17,"Mostrar nombre como"),S.bc(),S.Xb(18,"input",18,19),S.bc(),S.bc(),S.bc(),S.cc(20,"div",12),S.cc(21,"div",13),S.cc(22,"div",14),S.cc(23,"label"),S.cc(24,"span",15),S.Uc(25),S.pc(26,"translate"),S.bc(),S.Uc(27),S.pc(28,"translate"),S.bc(),S.cc(29,"ng-select",20),S.Sc(30,G,3,3,"ng-option",17),S.bc(),S.bc(),S.bc(),S.cc(31,"div",13),S.cc(32,"div",14),S.cc(33,"label"),S.cc(34,"span",15),S.Uc(35),S.pc(36,"translate"),S.bc(),S.Uc(37),S.pc(38,"translate"),S.bc(),S.cc(39,"ng-select",21),S.Sc(40,L,3,3,"ng-option",17),S.bc(),S.bc(),S.bc(),S.bc(),S.cc(41,"div",12),S.cc(42,"div",22),S.cc(43,"div",14),S.cc(44,"label"),S.Uc(45,"Titulo"),S.bc(),S.Xb(46,"input",23),S.bc(),S.bc(),S.cc(47,"div",24),S.cc(48,"div",14),S.cc(49,"label"),S.Uc(50,"Nombres"),S.bc(),S.Xb(51,"input",25),S.bc(),S.bc(),S.cc(52,"div",24),S.cc(53,"div",14),S.cc(54,"label"),S.Uc(55,"Apellidos"),S.bc(),S.Xb(56,"input",26),S.bc(),S.bc(),S.bc(),S.cc(57,"div",12),S.cc(58,"div",13),S.cc(59,"div",14),S.cc(60,"label"),S.Uc(61,"DNI"),S.bc(),S.Xb(62,"input",27),S.bc(),S.bc(),S.cc(63,"div",13),S.cc(64,"div",14),S.cc(65,"label"),S.Uc(66,"Nombre de la empresa"),S.bc(),S.Xb(67,"input",28),S.bc(),S.bc(),S.bc(),S.cc(68,"div",12),S.cc(69,"div",13),S.cc(70,"div",14),S.cc(71,"label"),S.Uc(72,"Correo electr\xf3nico"),S.bc(),S.Xb(73,"input",29),S.bc(),S.bc(),S.cc(74,"div",13),S.cc(75,"div",14),S.cc(76,"label"),S.Uc(77,"Web"),S.bc(),S.Xb(78,"input",30),S.bc(),S.bc(),S.bc()),2&e){var c=S.oc();S.Ib(5),S.Vc(S.qc(6,25,"general.asterisk")),S.Ib(2),S.Vc(S.qc(8,27,"companies.type_organization")),S.Ib(2),S.Ob("is-invalid",c.invalidOrganization),S.vc("virtualScroll",!0),S.Ib(1),S.vc("ngForOf",c.typeOrg),S.Ib(5),S.Vc(S.qc(16,29,"general.asterisk")),S.Ib(3),S.Ob("is-invalid",c.invalidFullName)("status-danger",c.invalidFullName),S.Ib(7),S.Vc(S.qc(26,31,"general.asterisk")),S.Ib(2),S.Vc(S.qc(28,33,"companies.currency")),S.Ib(2),S.Ob("is-invalid",c.invalidCurrency),S.vc("virtualScroll",!0),S.Ib(1),S.vc("ngForOf",c.currency),S.Ib(5),S.Vc(S.qc(36,35,"general.asterisk")),S.Ib(2),S.Vc(S.qc(38,37,"companies.country")),S.Ib(2),S.Ob("is-invalid",c.invalidCountry)("status-danger",c.invalidCountry),S.vc("virtualScroll",!0),S.Ib(1),S.vc("ngForOf",c.countries)}}function j(e,t){1&e&&(S.cc(0,"div",12),S.cc(1,"div",13),S.cc(2,"div",14),S.cc(3,"label"),S.Uc(4,"Direcci\xf3n principal"),S.bc(),S.Xb(5,"textarea",33),S.bc(),S.bc(),S.cc(6,"div",13),S.cc(7,"div",14),S.cc(8,"label"),S.Uc(9,"Direcci\xf3n postal"),S.bc(),S.Xb(10,"textarea",34),S.bc(),S.bc(),S.bc(),S.cc(11,"div",12),S.cc(12,"div",13),S.cc(13,"div",14),S.cc(14,"label"),S.Uc(15,"Ciudad/Distrito"),S.bc(),S.Xb(16,"input",35),S.bc(),S.bc(),S.cc(17,"div",13),S.cc(18,"label"),S.Uc(19,"Estado/Provincia"),S.bc(),S.Xb(20,"input",36),S.bc(),S.bc(),S.cc(21,"div",12),S.cc(22,"div",13),S.cc(23,"div",14),S.cc(24,"label"),S.Uc(25,"C\xf3digo postal"),S.bc(),S.Xb(26,"input",37),S.bc(),S.bc(),S.cc(27,"div",13),S.cc(28,"label"),S.Uc(29,"Movil"),S.bc(),S.Xb(30,"input",38),S.bc(),S.bc(),S.cc(31,"div",12),S.cc(32,"div",13),S.cc(33,"div",14),S.cc(34,"label"),S.Uc(35,"Fijo"),S.bc(),S.Xb(36,"input",39),S.bc(),S.bc(),S.bc())}function H(e,t){if(1&e&&(S.cc(0,"ng-option",31),S.Uc(1),S.bc()),2&e){var c=t.$implicit;S.vc("value",c.id),S.Ib(1),S.Xc(" ",c.name_taxe," - ",c.rate_name," ")}}function Q(e,t){if(1&e&&(S.cc(0,"ng-option",31),S.Uc(1),S.bc()),2&e){var c=t.$implicit;S.vc("value",c.id),S.Ib(1),S.Xc(" ",c.account_number," - ",c.account_name," ")}}function $(e,t){if(1&e&&(S.cc(0,"ng-option",31),S.Uc(1),S.bc()),2&e){var c=t.$implicit;S.vc("value",c.id),S.Ib(1),S.Wc(" ",c.payment_method," ")}}function J(e,t){if(1&e&&(S.cc(0,"ng-option",31),S.Uc(1),S.bc()),2&e){var c=t.$implicit;S.vc("value",c.id),S.Ib(1),S.Wc(" ",c.term_name," ")}}function K(e,t){if(1&e&&(S.cc(0,"div",12),S.cc(1,"div",13),S.cc(2,"div",14),S.cc(3,"label"),S.Uc(4),S.pc(5,"translate"),S.bc(),S.cc(6,"ng-select",40),S.cc(7,"ng-option",41),S.Uc(8,"Seleccionar"),S.bc(),S.Sc(9,H,2,3,"ng-option",17),S.bc(),S.bc(),S.bc(),S.cc(10,"div",13),S.cc(11,"div",14),S.cc(12,"label"),S.Uc(13,"Cuenta contable"),S.bc(),S.cc(14,"ng-select",42),S.cc(15,"ng-option",41),S.Uc(16,"Seleccionar"),S.bc(),S.Sc(17,Q,2,3,"ng-option",17),S.bc(),S.bc(),S.bc(),S.bc(),S.cc(18,"div",12),S.cc(19,"div",13),S.cc(20,"div",14),S.cc(21,"label"),S.Uc(22,"Metodo de pago preferido"),S.bc(),S.cc(23,"ng-select",43),S.cc(24,"ng-option",41),S.Uc(25,"Seleccionar"),S.bc(),S.Sc(26,$,2,2,"ng-option",17),S.bc(),S.bc(),S.bc(),S.cc(27,"div",13),S.cc(28,"div",14),S.cc(29,"label"),S.Uc(30,"Condiciones de pago"),S.bc(),S.cc(31,"ng-select",44),S.cc(32,"ng-option",41),S.Uc(33,"Seleccionar"),S.bc(),S.Sc(34,J,2,2,"ng-option",17),S.bc(),S.bc(),S.bc(),S.bc(),S.cc(35,"div",12),S.cc(36,"div",13),S.cc(37,"div",14),S.cc(38,"label"),S.Uc(39,"Saldo inicial"),S.bc(),S.Xb(40,"input",45),S.bc(),S.bc(),S.cc(41,"div",13),S.cc(42,"div",14),S.cc(43,"label"),S.Uc(44,"A partir de la fecha"),S.bc(),S.Xb(45,"input",46),S.bc(),S.bc(),S.bc()),2&e){var c=S.oc();S.Ib(4),S.Vc(S.qc(5,8,"general.tax")),S.Ib(5),S.vc("ngForOf",c.tax),S.Ib(5),S.vc("virtualScroll",!0),S.Ib(3),S.vc("ngForOf",c.accounts),S.Ib(6),S.vc("virtualScroll",!0),S.Ib(3),S.vc("ngForOf",c.payments),S.Ib(5),S.vc("virtualScroll",!0),S.Ib(3),S.vc("ngForOf",c.timelimits)}}var Y,Z=((Y=function(e){a(o,e);var n=i(o);function o(e,t,c,a,i,r,s,d,b,p,m,f,g,v,h,_){var y;return l(this,o),(y=n.call(this,e,t,c,a,i,r,b)).fb=e,y.msg=t,y.api=c,y.router=a,y.translate=i,y.aRouter=r,y.termsSer=s,y.attrSer=d,y.spinner=b,y.docs=p,y.cnt=m,y.curr=f,y.tor=g,y.taxSer=v,y.accountSer=h,y.custSer=_,y.typepersons=[],y.identityDocs=[],y.typeOrg=[],y.countries=[],y.currency=[],y.tax=[],y.persons=[],y.accounts=[],y.payments=[],y.timelimits=[],y.active=1,y.title="Proveedor",y.translate.setDefaultLang(y.activeLang),y.customForm=y.fb.group({address:[""],city_name:[""],company_name:[""],description:[""],dni:[""],email:[""],last_name:[""],location:[""],mobile:[""],names:[""],phone:[""],postal_code:[""],state_name:[""],title:[""],web:[""],currency_id:["",[u.y.required]],country_id:[113,[u.y.required]],type_organization_id:[1,[u.y.required]],person_type_id:[1,[u.y.required]],tax_rate_id:["0"],means_payment_id:["0"],sales_term:["0"],accounting_account_id:["0"],initial_balance:[""],initial_date:[(new Date).toISOString().split("T")[0]],full_name:["",[u.y.required,u.y.minLength(6)]]}),y}return t(o,[{key:"invalidFullName",get:function(){return this.customForm.get("full_name").invalid&&this.customForm.get("full_name").touched}},{key:"invalidPersonType",get:function(){return this.customForm.get("person_type_id").value<=0}},{key:"invalidCountry",get:function(){return this.customForm.get("country_id").value<=0}},{key:"invalidCurrency",get:function(){return this.customForm.get("currency_id").value<=0}},{key:"invalidOrganization",get:function(){return this.customForm.get("type_organization_id").value<=0}},{key:"ngOnInit",value:function(){var e=this;c(r(o.prototype),"ngOnInit",this).call(this);var t=this;t.PutURL="/persons/update/",t.PostURL="/persons/create/provider",t.docs.getData({}).subscribe(function(e){t.identityDocs=e}),t.cnt.getData().subscribe(function(e){t.countries=e}),t.curr.getData().subscribe(function(e){t.currency=e,e.length>0&&(e.length>1?e.map(function(e){if(e.national_currency)return t.customForm.get("currency_id").setValue(e.id),!1}):t.customForm.get("currency_id").setValue(e[0].id))}),this.tor.getData({}).subscribe(function(t){e.typeOrg=t}),t.taxSer.getData({isVat:1}).subscribe(function(e){t.tax=e}),t.accountSer.getsubAccounts({}).subscribe(function(e){t.accounts=e}),t.custSer.getMeansPayment({}).subscribe(function(e){t.payments=e}),t.custSer.getTimeLimit({}).subscribe(function(e){t.timelimits=e})}},{key:"loadData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=this.customForm;this.editing=!0,this.custSer.getCustomers({uid:e}).subscribe(function(e){var c,a,n,i,o,r;t.setValue({address:e[0].address,city_name:e[0].city_name,company_name:e[0].company_name,country_id:e[0].country_id,currency_id:e[0].currency_id,description:e[0].description,dni:e[0].dni,email:e[0].email,full_name:e[0].full_name,last_name:e[0].last_name,location:e[0].location,mobile:e[0].mobile,names:e[0].names,person_type_id:e[0].person_type_id,type_organization_id:e[0].type_organization_id,tax_rate_id:null!==(c=e[0].tax_rate_id)&&void 0!==c?c:"0",means_payment_id:null!==(a=e[0].means_payment_id)&&void 0!==a?a:"0",sales_term:null!==(n=e[0].sales_term)&&void 0!==n?n:"0",accounting_account_id:null!==(i=e[0].accounting_account_id)&&void 0!==i?i:"0",initial_balance:null!==(o=e[0].initial_balance)&&void 0!==o?o:0,initial_date:null!==(r=e[0].initial_date)&&void 0!==r?r:(new Date).toISOString().split("T")[0],phone:e[0].phone,postal_code:e[0].postal_code,state_name:e[0].state_name,title:e[0].title,web:e[0].web})})}}]),o}(D.a)).\u0275fac=function(e){return new(e||Y)(S.Wb(u.e),S.Wb(k.b),S.Wb(k.a),S.Wb(C.c),S.Wb(x.d),S.Wb(C.a),S.Wb(X.h),S.Wb(X.a),S.Wb(y.c),S.Wb(q.c),S.Wb(q.a),S.Wb(q.b),S.Wb(W.d),S.Wb(N.f),S.Wb(T.b),S.Wb(N.b))},Y.\u0275cmp=S.Qb({type:Y,selectors:[["app-customer-form"]],viewQuery:function(e,t){var c;1&e&&(S.ad(R,1),S.ad(A,1),S.ad(B,1)),2&e&&(S.Hc(c=S.nc())&&(t.focusElement=c.first),S.Hc(c=S.nc())&&(t.uploadFile=c.first),S.Hc(c=S.nc())&&(t.imgUp=c.first))},features:[S.Fb],decls:25,vars:18,consts:[[1,"card"],[1,"card-header"],[1,"card-body"],[3,"formGroup"],["ngbNav","",1,"nav-tabs",3,"activeId","activeIdChange"],["nav","ngbNav"],[3,"ngbNavItem"],["ngbNavLink","",1,"display-none"],["ngbNavContent",""],[1,"mt-2",3,"ngbNavOutlet"],[1,"card-footer"],[3,"loading","showAaveACreate","saveAClose","closeEvent","saveAndCreateEvent","saveAndCloseEvent"],[1,"row"],[1,"col-md-6"],[1,"form-group"],[1,"asterisk"],["formControlName","type_organization_id","required","","name","type_organization_id",3,"virtualScroll"],[3,"value",4,"ngFor","ngForOf"],["type","text","formControlName","full_name","required","","autofocus","",1,"form-control"],["focusElement",""],["formControlName","currency_id","name","currency_id","required","",3,"virtualScroll"],["formControlName","country_id","required","",3,"virtualScroll"],[1,"col-md-2"],["type","text","formControlName","title","name","title",1,"form-control"],[1,"col-md-5"],["type","text","formControlName","names",1,"form-control"],["type","text","formControlName","last_name",1,"form-control"],["type","text","formControlName","dni",1,"form-control"],["type","text","formControlName","company_name",1,"form-control"],["type","text","formControlName","email",1,"form-control"],["type","text","formControlName","web",1,"form-control"],[3,"value"],["height","15","width","15",3,"src"],["formControlName","address","rows","2",1,"form-control"],["formControlName","location","rows","2",1,"form-control"],["type","text","formControlName","city_name",1,"form-control"],["type","text","formControlName","state_name",1,"form-control"],["type","text","formControlName","postal_code",1,"form-control"],["type","text","formControlName","mobile",1,"form-control"],["type","text","formControlName","phone",1,"form-control"],["formControlName","tax_rate_id"],["value","0"],["formControlName","accounting_account_id",3,"virtualScroll"],["formControlName","means_payment_id",3,"virtualScroll"],["formControlName","sales_term",3,"virtualScroll"],["currencyMask","","name","initial_balance","formControlName","initial_balance",1,"form-control"],["type","date","name","initial_date","formControlName","initial_date",1,"form-control"]],template:function(e,t){if(1&e&&(S.cc(0,"div",0),S.cc(1,"div",1),S.Uc(2),S.pc(3,"uppercase"),S.pc(4,"translate"),S.pc(5,"uppercase"),S.bc(),S.cc(6,"div",2),S.cc(7,"form",3),S.cc(8,"ul",4,5),S.mc("activeIdChange",function(e){return t.active=e}),S.cc(10,"li",6),S.cc(11,"a",7),S.Uc(12,"General"),S.bc(),S.Sc(13,z,79,39,"ng-template",8),S.bc(),S.cc(14,"li",6),S.cc(15,"a",7),S.Uc(16,"Ubicaci\xf3n/Direcci\xf3n"),S.bc(),S.Sc(17,j,37,0,"ng-template",8),S.bc(),S.cc(18,"li",6),S.cc(19,"a",7),S.Uc(20,"Pago y facturaci\xf3n"),S.bc(),S.Sc(21,K,46,10,"ng-template",8),S.bc(),S.bc(),S.Xb(22,"div",9),S.bc(),S.bc(),S.cc(23,"div",10),S.cc(24,"app-footer-form",11),S.mc("closeEvent",function(){return t.cancel()})("saveAndCreateEvent",function(){return t.saveAndCreate()})("saveAndCloseEvent",function(){return t.saveAndClose()}),S.bc(),S.bc(),S.bc()),2&e){var c=S.Ic(9);S.Ib(2),S.Xc(" ",S.qc(3,12,S.qc(4,14,"general.createEdit"))," ",S.qc(5,16,t.title)," "),S.Ib(5),S.vc("formGroup",t.customForm),S.Ib(1),S.vc("activeId",t.active),S.Ib(2),S.vc("ngbNavItem",1),S.Ib(4),S.vc("ngbNavItem",2),S.Ib(4),S.vc("ngbNavItem",3),S.Ib(4),S.vc("ngbNavOutlet",c),S.Ib(2),S.vc("loading",t.loading)("showAaveACreate",!0)("saveAClose",t.saveAClose)("saveAClose",t.saveAClose)}},directives:[u.z,u.q,u.h,v.u,v.w,v.x,v.v,v.z,V.a,g.a,u.p,u.g,u.w,d.m,u.c,g.d,h.a],pipes:[d.v,x.c],styles:["nb-checkbox[_ngcontent-%COMP%]{margin-bottom:1rem}.form-inline[_ngcontent-%COMP%]   [fullWidth][_ngcontent-%COMP%]{flex:1}.form-inline[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin:0 1.5rem 1.5rem 0}nb-card.inline-form-card[_ngcontent-%COMP%]   nb-card-body[_ngcontent-%COMP%]{padding-bottom:0}"]}),Y),ee=o("PSD3"),te=o.n(ee),ce=["customGrid"],ae=["detailGrid"],ne=["searchField"],ie=["myTabs"];function oe(e,t){if(1&e){var c=S.dc();S.cc(0,"div"),S.cc(1,"button",24),S.mc("click",function(){return S.Lc(c),S.oc().importData()}),S.Xb(2,"i",39),S.Uc(3),S.pc(4,"translate"),S.bc(),S.bc()}if(2&e){var a=S.oc();S.Ib(1),S.vc("disabled",a.loading),S.Ib(2),S.Wc(" ",S.qc(4,2,"buttons.import")," ")}}var re,le=((re=function(e){a(o,e);var n=i(o);function o(e,t,c,a,i,r){var s;return l(this,o),(s=n.call(this,e,t,c,a,i)).msg=e,s.api=t,s.router=c,s.translate=a,s.aRouter=i,s.shopSer=r,s.title="Registro de compras",s.invoiceName="",s.source2={localdata:[],datafields:[{name:"active",type:"boolean"},{name:"admission_date",type:"string"},{name:"amount",type:"number"},{name:"barcode",type:"string"},{name:"batch",type:"string"},{name:"expiration_date",type:"string"},{name:"fabrication_date",type:"string"},{name:"freight",type:"number"},{name:"id",type:"number"},{name:"internal_code",type:"string"},{name:"invoice_id",type:"number"},{name:"perishable",type:"boolean"},{name:"product_id",type:"number"},{name:"product_name",type:"string"},{name:"sale_price",type:"number"},{name:"state",type:"number"},{name:"tax_bill",type:"number"},{name:"tax_bill_id",type:"number"},{name:"tax_sale",type:"number"},{name:"tax_sale_id",type:"number"},{name:"total_cost",type:"number"},{name:"unit_cost",type:"number"},{name:"vat_included",type:"boolean"}],datatype:"array"},s.dataAdapter2=new jqx.dataAdapter(s.source2),s.columnsDet=[{columngroup:"Actions",text:"",sortable:!1,filterable:!1,editable:!1,align:"center",groupable:!1,draggable:!1,resizable:!1,datafield:"#delete_#",columntype:"text",width:32,cellsrenderer:function(e,t,c){return'<span><i class="fas fa-trash-alt fas-fa-delete fa-cursor"></i></span>'}},{text:"Cantidad",datafield:"amount",align:"center",width:80,cellsalign:"right"},{text:"Producto",datafield:"product_name",align:"center",minWidth:250},{text:"Precio unitario",datafield:"unit_cost",align:"center",cellsalign:"right",cellsformat:"c2",width:120},{text:"Precio de venta",datafield:"sale_price",align:"center",cellsalign:"right",cellsformat:"c2",width:120},{text:"Total",datafield:"total_cost",align:"center",cellsalign:"right",cellsformat:"c2",width:120}],s}return t(o,[{key:"ngOnInit",value:function(){this.changeLanguage(this.activeLang)}},{key:"ngAfterViewInit",value:function(){var e=this;e.crudApi={create:"/shopping/create",read:"/shopping/read",update:"/shopping/update/",delete:"/shopping/delete/"},e.showActions=!0,e.showRowNumber=!0,e.pagesize=10,e.datafields=[{name:"id",type:"number"},{name:"invoice_nro",type:"string"},{name:"total",type:"number"},{name:"branch_name",type:"string"},{name:"full_name",type:"string"},{name:"winery_name",type:"string"}],e.sourceColumns=[{columngroup:"Actions",text:"",sortable:!1,filterable:!1,editable:!1,align:"center",groupable:!1,draggable:!1,resizable:!1,datafield:"#edit_shopping_#",columntype:"text",width:32,cellsrenderer:function(e,t,c){return'<span><i class="fas fa-shopping-cart fas-fa-edit fa-cursor"></i></span>'}},{text:"N\xba. Factura",datafield:"invoice_nro",align:"center",minwidth:80,width:100},{text:"Proveedor",datafield:"full_name",align:"center",minwidth:100},{text:"Bodega",datafield:"branch_name",align:"center",minwidth:100},{text:"Total",datafield:"total",align:"center",cellsalign:"right",cellsformat:"c2",minwidth:100}],this.prepareGrid()}},{key:"cellDetailClick",value:function(e){var t=e.args,c=this.detailGrid.getrowdata(t.rowindex);"#edit_#"===t.datafield?this.goRoute("shopping/invoices/detail/edit/".concat(c.id)):"#delete_#"===t.datafield&&this.deleteDetail(c)}},{key:"cellClick",value:function(e){var t=e.args,c=this.customGrid.getrowdata(t.rowindex),a=this;a.invoiceName=c.invoice_nro,"#edit_shopping_#"===t.datafield?a.goRoute("shopping/invoices/create/detail/".concat(c.id)):"#edit_#"===t.datafield?a.editData(c):"#delete_#"===t.datafield?a.deleteData(c):a.refreshDetail(c.id)}},{key:"deleteDetail",value:function(e){var t=this,c=t.translate;te.a.fire({title:c.instant("titleMessages.delete"),text:c.instant("bodyMessages.delete"),icon:"question",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:c.instant("buttons.yes"),cancelButtonText:c.instant("buttons.not")}).then(function(a){a.value&&t.api.delete("/shopping/delete/detail/".concat(e.id)).subscribe(function(c){t.refreshDetail(e.invoice_id)},function(e){t.msg.toastMessage(c.instant("general.error"),e.error.message,4)})})}},{key:"refreshDetail",value:function(e){var t=this;t.source2.localdata=[],t.detailGrid.updatebounddata("cells"),t.detailGrid.showloadelement(),t.shopSer.getDetail(e).subscribe(function(e){t.source2.localdata=e,t.detailGrid.updatebounddata("cells"),t.detailGrid.hideloadelement()},function(){return t.detailGrid.hideloadelement()})}},{key:"createData",value:function(){c(r(o.prototype),"createData",this).call(this),this.goRoute("shopping/invoices/create")}},{key:"editData",value:function(e){c(r(o.prototype),"editData",this).call(this,e),this.goRoute("shopping/invoices/edit/".concat(e.id))}}]),o}(w.a)).\u0275fac=function(e){return new(e||re)(S.Wb(k.b),S.Wb(k.a),S.Wb(C.c),S.Wb(x.d),S.Wb(C.a),S.Wb(q.e))},re.\u0275cmp=S.Qb({type:re,selectors:[["app-invoices"]],viewQuery:function(e,t){var c;1&e&&(S.ad(ce,1),S.ad(ae,1),S.ad(ne,1),S.ad(ie,1)),2&e&&(S.Hc(c=S.nc())&&(t.customGrid=c.first),S.Hc(c=S.nc())&&(t.detailGrid=c.first),S.Hc(c=S.nc())&&(t.searchField=c.first),S.Hc(c=S.nc())&&(t.myTabs=c.first))},features:[S.Fb],decls:93,vars:56,consts:[[3,"width","height","position","animationType","selectionTracker","theme"],["myTabs",""],[2,"margin-left","30px"],[1,"card"],[1,"card-header"],[1,"card-title"],[1,"menuExport"],[1,"space-right"],[1,"btn","btn-danger","round","mr-1","mb-1",3,"disabled","click"],[1,"fa","fa-sync","mr-1","fas-fa-22"],[1,"myMenu","space-right"],[1,"clearColor",3,"height","onItemclick"],["myMenu",""],["id","Exports"],[1,"fas","fa-cog","fas-fa-22","fas-fa-red"],["href","javascript:void(0)"],[2,"width","200px"],[1,"fas","fa-file-excel","fas-fa-xls"],[1,"fas","fa-file-csv","fas-fa-xls"],["type","separator"],[1,"fas","fa-file-pdf","fas-fa-pdf"],[1,"fas","fa-file-code","fas-fa-code"],[1,"fas","fa-print","fas-fa-print"],[1,"margin-left","space-right"],[1,"btn","btn-success","round","mr-1","mb-1",3,"disabled","click"],[1,"fa","fa-plus","mr-1","fas-fa-22"],[4,"ngIf"],[1,"container-fluid"],[1,"input-group"],["type","text","autofocus","",1,"form-control",3,"placeholder","keyup"],["searchField",""],[1,"input-group-append"],[1,"btn","btn-primary",3,"disabled","click"],[1,"fa","fa-search"],["width","100%",3,"disabled","auto-create","onCellselect","onBindingcomplete"],["customGrid",""],[1,"example-items-col"],["width","100%",3,"source","columns","theme","disabled","selectionmode","columnsresize","sortable","filterable","showfilterrow","onCellselect"],["detailGrid",""],[1,"fa","fa-upload","mr-1","fas-fa-22"]],template:function(e,t){1&e&&(S.cc(0,"jqxTabs",0,1),S.cc(2,"ul"),S.cc(3,"li",2),S.Uc(4,"Facturas"),S.bc(),S.cc(5,"li"),S.Uc(6,"Detalle de la factura"),S.bc(),S.bc(),S.cc(7,"div"),S.cc(8,"div",3),S.cc(9,"div",4),S.cc(10,"h4",5),S.Uc(11),S.pc(12,"uppercase"),S.bc(),S.bc(),S.cc(13,"div",3),S.cc(14,"div",6),S.cc(15,"div",7),S.cc(16,"button",8),S.mc("click",function(){return t.searchQuery()}),S.Xb(17,"i",9),S.bc(),S.bc(),S.cc(18,"div",10),S.cc(19,"jqxMenu",11,12),S.mc("onItemclick",function(e){return t.itemclick(e)}),S.cc(21,"ul"),S.cc(22,"li",13),S.Xb(23,"i",14),S.Xb(24,"a",15),S.cc(25,"ul",16),S.cc(26,"li"),S.cc(27,"a",15),S.Xb(28,"i",17),S.Uc(29),S.pc(30,"translate"),S.bc(),S.bc(),S.cc(31,"li"),S.cc(32,"a",15),S.Xb(33,"i",18),S.Uc(34),S.pc(35,"translate"),S.bc(),S.bc(),S.cc(36,"li"),S.cc(37,"a",15),S.Xb(38,"i",17),S.Uc(39),S.pc(40,"translate"),S.bc(),S.bc(),S.Xb(41,"li",19),S.cc(42,"li"),S.cc(43,"a",15),S.Xb(44,"i",20),S.Uc(45),S.pc(46,"translate"),S.bc(),S.bc(),S.Xb(47,"li",19),S.cc(48,"li"),S.cc(49,"a",15),S.Xb(50,"i",21),S.Uc(51),S.pc(52,"translate"),S.bc(),S.bc(),S.cc(53,"li"),S.cc(54,"a",15),S.Xb(55,"i",21),S.Uc(56),S.pc(57,"translate"),S.bc(),S.bc(),S.cc(58,"li"),S.cc(59,"a",15),S.Xb(60,"i",21),S.Uc(61),S.pc(62,"translate"),S.bc(),S.bc(),S.Xb(63,"li",19),S.cc(64,"li"),S.cc(65,"a",15),S.Xb(66,"i",22),S.Uc(67),S.pc(68,"translate"),S.bc(),S.bc(),S.bc(),S.bc(),S.bc(),S.bc(),S.bc(),S.cc(69,"div",23),S.cc(70,"button",24),S.mc("click",function(){return t.createData()}),S.Xb(71,"i",25),S.Uc(72),S.pc(73,"translate"),S.bc(),S.bc(),S.Sc(74,oe,5,4,"div",26),S.bc(),S.cc(75,"div",27),S.cc(76,"fieldset"),S.cc(77,"div",28),S.cc(78,"input",29,30),S.mc("keyup",function(e){return t.inputKey(e)}),S.bc(),S.cc(80,"div",31),S.cc(81,"button",32),S.mc("click",function(){return t.searchQuery()}),S.Xb(82,"i",33),S.bc(),S.bc(),S.bc(),S.bc(),S.cc(83,"jqxGrid",34,35),S.mc("onCellselect",function(e){return t.cellClick(e)})("onBindingcomplete",function(e){return t.Bindingcomplete(e)}),S.bc(),S.bc(),S.bc(),S.bc(),S.bc(),S.cc(85,"div"),S.cc(86,"div",3),S.cc(87,"div",4),S.Uc(88),S.pc(89,"uppercase"),S.bc(),S.cc(90,"div",36),S.cc(91,"jqxGrid",37,38),S.mc("onCellselect",function(e){return t.cellDetailClick(e)}),S.bc(),S.bc(),S.bc(),S.bc(),S.bc()),2&e&&(S.vc("width","100%")("height",600)("position","top")("animationType","fade")("selectionTracker",!1)("theme",t.theme),S.Ib(11),S.Vc(S.qc(12,34,t.title)),S.Ib(5),S.vc("disabled",t.loading),S.Ib(3),S.vc("height",36),S.Ib(10),S.Vc(S.qc(30,36,"export.excel")),S.Ib(5),S.Vc(S.qc(35,38,"export.csv")),S.Ib(5),S.Vc(S.qc(40,40,"export.xml")),S.Ib(6),S.Vc(S.qc(46,42,"export.pdf")),S.Ib(6),S.Vc(S.qc(52,44,"export.html")),S.Ib(5),S.Vc(S.qc(57,46,"export.json")),S.Ib(5),S.Vc(S.qc(62,48,"export.tsv")),S.Ib(6),S.Vc(S.qc(68,50,"export.print")),S.Ib(3),S.vc("disabled",t.loading),S.Ib(2),S.Wc(" ",S.qc(73,52,"buttons.new")," "),S.Ib(2),S.vc("ngIf",t.useImport),S.Ib(4),S.vc("placeholder",t.placeholderSearch),S.Ib(3),S.vc("disabled",t.loading),S.Ib(2),S.vc("disabled",t.loading)("auto-create",!1),S.Ib(5),S.Wc("FACTURA N\xba: ",S.qc(89,54,t.invoiceName),""),S.Ib(3),S.vc("source",t.dataAdapter2)("columns",t.columnsDet)("theme",t.theme)("disabled",t.loading)("selectionmode","singlecell")("columnsresize",!0)("sortable",!0)("filterable",!0)("showfilterrow",!0))},directives:[m.a,p.a,d.n,b.a],pipes:[d.v,x.c],encapsulation:2}),re);o("52YP");var se=o("4IXu"),de=o("Cx/d"),ue=o("GCUp"),be=o("PU63"),pe=o("K56k"),me=["myDataTable"],fe=["searchbar"],ge=["invoiceEle"];function ve(e,t){if(1&e&&(S.cc(0,"ng-option",61),S.Uc(1),S.bc()),2&e){var c=t.$implicit;S.vc("value",c.id),S.Ib(1),S.Yc(" ",c.dni," - ",c.full_name," ",c.company_name," ")}}function he(e,t){if(1&e&&(S.cc(0,"ng-option",61),S.Uc(1),S.bc()),2&e){var c=t.$implicit;S.vc("value",c.id),S.Ib(1),S.Wc(" ",c.branch_name," ")}}function _e(e,t){if(1&e&&(S.cc(0,"ng-option",61),S.Uc(1),S.bc()),2&e){var c=t.$implicit;S.vc("value",c.id),S.Ib(1),S.Wc(" ",c.winery_name," ")}}function ye(e,t){if(1&e&&(S.cc(0,"ng-option",61),S.Uc(1),S.bc()),2&e){var c=t.$implicit;S.vc("value",c.id),S.Ib(1),S.Wc(" ",c.payment_method," ")}}function xe(e,t){if(1&e){var c=S.dc();S.cc(0,"div",62),S.mc("click",function(){S.Lc(c);var e=t.$implicit;return S.oc().onClickItem(e)}),S.Xb(1,"img",63),S.cc(2,"div",2),S.cc(3,"h6",64),S.Uc(4),S.pc(5,"currency"),S.bc(),S.cc(6,"p",65),S.Uc(7),S.bc(),S.bc(),S.bc()}if(2&e){var a=t.$implicit;S.Ib(1),S.vc("src",a.image,S.Oc),S.Ib(3),S.Wc(" ",S.qc(5,3,a.sale_price),""),S.Ib(3),S.Vc(a.product_name)}}function Ce(e,t){1&e&&(S.cc(0,"div",5),S.cc(1,"div",21),S.cc(2,"div",7),S.cc(3,"label"),S.Uc(4,"Notas(Opcional)"),S.bc(),S.Xb(5,"textarea",66),S.bc(),S.bc(),S.bc())}var Se,Ie=((Se=function(e){a(o,e);var n=i(o);function o(e,t,c,a,i,r,s,d,b,p,m,f,g,v,h,_,y,x){var C;return l(this,o),(C=n.call(this,e,t,c,a,i,r,f,x,m,p)).fb=e,C.msg=t,C.api=c,C.router=a,C.translate=i,C.aRouter=r,C.branchSer=s,C.perSer=d,C.currSer=b,C.reporstSer=p,C.itemsSer=m,C.spinner=f,C.documents=g,C.shopSer=v,C.taxSer=h,C.docsSer=_,C.wareHouseServ=y,C.modalService=x,C.title="Productos/Servicios",C.aDocuments=[],C.ware_house=[],C.providers=[],C.currency=[],C.items=[],C.itemsResult=[],C.lines=[],C.timeLimits=[],C.paymentMethods=[],C.payments=[],C.meansPayment=[],C.taxBill=[],C.taxSales=[],C.pointsOfSale=[],C.tax_rates=[],C.selectedRow=!1,C.isCounted=!0,C.perishable=!1,C.rowIndex=-1,C.invoice_id=0,C.pathfile="",C.itemName="",C.source={},C.taxRatesSource={},C.theme="bootstrap",C.customForm=C.fb.group({admission_date:[(new Date).toISOString().split("T")[0],[u.y.required]],invoice_nro:["",[u.y.required,u.y.minLength(2)]],notes:[""],pay_day:[(new Date).toISOString().split("T")[0],[u.y.required]],payment_id:["",[u.y.required]],warehouse_id:["0",[u.y.required]],point_of_sale_id:["0",[u.y.required]],provider_id:["0",[u.y.required]],discount:[0],vat:[0],sub_total:[0,[u.y.required]],total:[0,[u.y.required]],tax_sale_id:[0],tax_bill_id:[0],product_id:[0],invoice_id:[0]}),C}return t(o,[{key:"invalidName",get:function(){return this.isInvalid("invoice_nro")}},{key:"invalidBranch",get:function(){return this.isInvalid("branch_id")}},{key:"ngOnInit",value:function(){var e=this;e.showSpinner(),e.wareHouseServ.getData({}).subscribe(function(t){e.ware_house=t}),e.docsSer.getPaymentMethods({}).subscribe(function(t){e.payments=t,t.length>0&&e.customForm.get("payment_id").setValue(t[0].id)}),e.branchSer.getPointsOfSale({}).subscribe(function(t){e.pointsOfSale=t,t.length>0&&e.customForm.get("point_of_sale_id").setValue(t[0].id)}),e.perSer.getProviders({}).subscribe(function(t){e.providers=t}),c(r(o.prototype),"ngOnInit",this).call(this)}},{key:"ngAfterViewInit",value:function(){c(r(o.prototype),"ngAfterViewInit",this).call(this);var e=this,t=e.customForm;e.invoiceEle.nativeElement.focus(),e.taxSer.getData({isVat:!0}).subscribe(function(c){e.taxBill=c,e.taxSales=c,c.length>0&&(t.get("tax_bill_id").setValue(c[0].id),t.get("tax_sale_id").setValue(c[0].id),e.taxBillSelect=c[0],e.taxSaleSelect=c[0],e.tax_rates=c,e.onCreateGrid())})}},{key:"onCreateGrid",value:function(){var e=this,t=this;t.taxRatesSource={datatype:"array",datafields:[{name:"id",type:"number"},{name:"account_id",type:"number"},{name:"tax_gruop_id",type:"number"},{name:"name_taxe",type:"string"},{name:"rate_abbre",type:"string"},{name:"rate_name",type:"string"},{name:"account_name",type:"string"},{name:"is_exempt",type:"number"},{name:"decimal_rate",type:"number"},{name:"rate_value",type:"number"}],localdata:t.tax_rates},t.taxRatesAdapter=new jqx.dataAdapter(t.taxRatesSource,{autoBind:!0}),t.source={localdata:this.lines,datatype:"array",datafields:[{name:"product_class_name",type:"string"},{name:"sku",type:" string"},{name:"image",type:" string"},{name:"unit_name",type:" string"},{name:"unit_description",type:" string"},{name:"abbre_unit",type:" string"},{name:"qr_code",type:"string"},{name:"product_name",type:"string"},{name:"notes",type:"string"},{name:"description_sales",type:"string"},{name:"shopping_description",type:"string"},{name:"barcode",type:"string"},{name:"rate_name",type:"string"},{name:"internal_code",type:"string"},{name:"state",type:"number"},{name:"quantity",type:"number"},{name:"invoice_id",type:"number"},{name:"detail_id",type:"number"},{name:"total",type:"number"},{name:"discount",type:"number"},{name:"sale_price",type:"number"},{name:"purchase_cost",type:"number"},{name:"tax_amount",type:"number"},{name:"tax_bill_id",type:"number"},{name:"tax_bill",value:"tax_bill_id",values:{source:t.taxRatesAdapter.records,value:"id",name:"rate_value"}},{name:"tax_bill_rate",type:"number"},{name:"tax_sale_rate",type:"number"},{name:"stock_min",type:"number"},{name:"stock_max",type:"number"},{name:"tax_sales_id",type:"number"},{name:"tax_sales",value:"tax_sales_id",values:{source:t.taxRatesAdapter.records,value:"id",name:"rate_value"}},{name:"brand_id",type:" number"},{name:"stock",type:" number"},{name:"category_id",type:" number"},{name:"product_unit_id",type:" number"},{name:"factor",type:" number"},{name:"sub_category_id",type:" number"},{name:"gain",type:"number"},{name:"percentage_gain",type:"string"},{name:"item_type_id",type:"number"},{name:"unit_id",type:"number"},{name:"base_factor",type:"number"},{name:"class_id",type:"number"},{name:"average_cost",type:"number"},{name:"recipe",type:"boolean"},{name:"vat_included",type:"bool"},{name:"selling_out_of_inventory",type:"boolean"},{name:"perishable",type:"bool"},{name:"batch",type:"string"},{name:"fabrication_date",type:"date"},{name:"expiration_date",type:"date"},{name:"id",type:"number"}]},t.dataAdapter=new jqx.dataAdapter(t.source),t.columns=[{text:"#",sortable:!1,filterable:!1,editable:!1,align:"center",groupable:!1,draggable:!1,resizable:!1,datafield:"",columntype:"number",width:40,cellsrenderer:function(e,t,c){return'<div style="margin: 4px; text-align: right">'+(c+1)+"</div>"}},{text:"Detalle",columngroup:"Shopping",dataField:"product_name",minWidth:300,align:"center",cellsAlign:"left",editable:!1},{text:"Cant",columngroup:"Shopping",dataField:"quantity",width:55,align:"center",cellsAlign:"right"},{text:"Precio de compra",columngroup:"Shopping",dataField:"purchase_cost",width:120,align:"center",cellsAlign:"right",cellsFormat:"c2"},{text:"IVA",columngroup:"Shopping",width:50,align:"center",datafield:"tax_sales_id",displayfield:"tax_sales",columntype:"combobox",createeditor:function(e,c,a){a.jqxComboBox({source:t.taxRatesAdapter,displayMember:"rate_value",valueMember:"id"})},cellvaluechanging:function(t,c,a,n,i){if(""==i)return n;setTimeout(function(){e.onLineTotal(e.myDataTable.getrowdata(t),t)},50)}},{text:"Vr. IVA",columngroup:"Shopping",editable:!1,dataField:"tax_amount",width:120,align:"right",cellsAlign:"right",cellsFormat:"c2"},{text:"Iva incluido",columngroup:"Shopping",datafield:"vat_included",columntype:"checkbox",width:90,cellvaluechanging:function(t,c,a,n,i){setTimeout(function(){e.onLineTotal(e.myDataTable.getrowdata(t),t)},50)}},{text:"Descuento",columngroup:"Shopping",dataField:"discount",width:120,align:"right",cellsAlign:"right",cellsFormat:"c2"},{text:"Total",columngroup:"Shopping",dataField:"total",width:100,align:"right",cellsAlign:"right",cellsFormat:"c2",editable:!1},{text:"Perecedero",columngroup:"Shopping",datafield:"perishable",columntype:"checkbox",width:80},{text:"Lote #",columngroup:"Shopping",dataField:"batch",minWidth:50,align:"center",cellsAlign:"left",editable:!1},{text:"Fecha fabricaci\xf3n",columngroup:"Shopping",datafield:"fabrication_date",columntype:"datetimeinput",width:110,cellsalign:"right",cellsformat:"d",validation:function(e,t){return!(t.getFullYear()<2021)||{result:!1,message:"Ship Date should be before 1/1/2021"}}},{text:"Fecha expiraci\xf3n",columngroup:"Shopping",datafield:"expiration_date",columntype:"datetimeinput",width:110,cellsalign:"right",cellsformat:"d",validation:function(e,t){return!(t.getFullYear()<2021)||{result:!1,message:"Ship Date should be before 1/1/2021"}}},{text:"Precio de venta",columngroup:"Sales",dataField:"sale_price",width:120,align:"center",cellsAlign:"right",cellsFormat:"c2"},{text:"IVA",columngroup:"Sales",width:50,align:"center",datafield:"tax_bill_id",displayfield:"tax_bill",columntype:"combobox",createeditor:function(e,c,a){a.jqxComboBox({source:t.taxRatesAdapter,displayMember:"rate_value",valueMember:"id"})},cellvaluechanging:function(e,t,c,a,n){if(""==n)return a}},{text:"Ganancia",columngroup:"Sales",dataField:"gain",width:120,align:"center",cellsAlign:"right",cellsFormat:"c2"},{text:"% Ganancia",columngroup:"Sales",dataField:"percentage_gain",width:110,align:"center",cellsAlign:"right"}],t.columngroups=[{text:"Compra",align:"center",name:"Shopping"},{text:"Venta",align:"center",name:"Sales"}],t.myDataTable.createComponent({source:t.dataAdapter,columnsresize:!0,editable:!0,enabletooltips:!0,altrows:!0,autoshowloadelement:!0,theme:t.theme,columns:t.columns,columngroups:t.columngroups}),t.onRefresh()}},{key:"loadData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=this,c=t.customForm;t.editing=!0,t.shopSer.getData({uid:e}).subscribe({next:function(a){var n,i;t.invoice_id=e,c.get("invoice_nro").setValue(a[0].invoice_nro),c.get("total").setValue(a[0].total),c.get("provider_id").setValue(a[0].provider_id),c.get("admission_date").setValue(a[0].admission_date),c.get("discount").setValue(a[0].discount),c.get("vat").setValue(a[0].vat),c.get("notes").setValue(a[0].notes),c.get("pay_day").setValue(a[0].pay_day),c.get("payment_id").setValue(a[0].payment_method_id),c.get("warehouse_id").setValue(null!==(n=a[0].warehouse_id)&&void 0!==n?n:"0"),c.get("point_of_sale_id").setValue(null!==(i=a[0].point_of_sale_id)&&void 0!==i?i:"0"),c.get("sub_total").setValue(a[0].sub_total),t.getDeatailId(e)}})}},{key:"getDeatailId",value:function(e){var t=this,c=t.myDataTable;t.showSpinner("Cargando detalle de la factura."),t.shopSer.getDetail(e).subscribe({next:function(e){e.map(function(e,a){var n={};(n=e).detail_id=e.id,n.id=e.product_id,c.addrow(null,n,a),setTimeout(function(){t.onLineTotal(n,a)},5)})},error:function(e){t.hideSpinner(),t.msg.errorMessage("",e)}})}},{key:"onRefresh",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.onSearchExecute(e)}},{key:"onSearchExecute",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,c=this;c.showSpinner("Procesando petici\xf3n..."),c.itemsSer.getData({query:e,type:t,start:0,limit:60}).subscribe({next:function(e){c.items=e,c.itemsResult=e,c.hideSpinner(),c.msg.toastMessage("","Se hallaron ".concat(e.length," resultados."))},error:function(e){c.hideSpinner(),c.msg.errorMessage("",e)}})}},{key:"onLineTotal",value:function(e,t){var c=this.myDataTable,a=this.tax_rates.find(function(t){return t.id==e.tax_sales_id}),n=parseFloat(a.decimal_rate.toString()),i=parseFloat(e.discount.toString()),o=parseFloat(e.purchase_cost.toString())*parseFloat(e.quantity.toString())-i,r=o-o/n;e.vat_included||(n>1?r=o*n-o:n<1&&(r=o*n),o+=r),r=parseFloat(r.toFixed(2)),o=parseFloat(o.toFixed(2)),c.setcellvalue(t,"total",o),c.setcellvalue(t,"tax_amount",r),this.onSalesData(e,t),this.onSum()}},{key:"onSum",value:function(){var e=0,t=0,c=0,a=0,n=this.customForm,i=this.myDataTable.getrows();i.length>0&&i.map(function(n,i){var o=n.quantity*n.purchase_cost;a+=parseFloat(n.discount.toString()),e+=o,t+=n.total,c+=n.tax_amount}),n.get("discount").setValue(a),n.get("sub_total").setValue(e-c),n.get("vat").setValue(c),n.get("total").setValue(t)}},{key:"onSalesData",value:function(e,t){var c,a,n=this.myDataTable,i=parseFloat(e.purchase_cost.toString()),o=parseFloat(e.sale_price.toString()),r=this.tax_rates.find(function(t){return t.id==e.tax_bill_id}),l=this.tax_rates.find(function(t){return t.id==e.tax_sales_id}),s=parseFloat(r.decimal_rate.toString()),d=0;d=(a=(c=o/parseFloat(l.decimal_rate.toString()))-(1==e.vat_included?i/s:i))/c*100,n.setcellvalue(t,"gain",a),n.setcellvalue(t,"percentage_gain","".concat(d.toFixed(2)," %"))}},{key:"onSave",value:function(){var e=this,t=e.customForm,c=t.getRawValue(),a=e.myDataTable.getrows();if(t.invalid)return e.msg.toastMessage("","Hay campos sin llenar.",4),!1;if(c.lines=JSON.stringify(a),e.showSpinner("Guardando factura"),e.invoice_id>0)c.invoice_id=e.invoice_id,e.api.put("/shopping/update/".concat(e.invoice_id),{records:JSON.stringify(c)}).subscribe({next:function(t){e.hideSpinner(),t.success?e.onClose():e.msg.errorMessage("",t.message)},error:function(t){e.hideSpinner(),e.msg.errorMessage("",t)}});else{if(a.length<=0)return e.hideSpinner(),e.msg.toastMessage("","No hay productos en el detalle de la factura.",4),!1;e.api.post("/shopping/create",c).subscribe({next:function(t){e.hideSpinner(),t.success?e.onClose():e.msg.errorMessage("",t.message)},error:function(t){e.hideSpinner(),e.msg.errorMessage("",t)}})}}},{key:"onClose",value:function(){this.goRoute("shopping/invoices")}},{key:"onDelete",value:function(){var e=this,t=this,a=t.myDataTable.getrowdata(t.rowIndex),n=t.translate;if(t.invoice_id>0){var i=a.detail_id;i>0?te.a.fire({title:n.instant("titleMessages.delete"),text:n.instant("bodyMessages.delete"),icon:"question",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:n.instant("buttons.yes"),cancelButtonText:n.instant("buttons.not")}).then(function(a){a.value&&(t.showSpinner(),t.api.delete("/shopping/detail/delete/".concat(i)).subscribe({next:function(){t.hideSpinner(),c(r(o.prototype),"onDelete",e).call(e)},error:function(e){t.hideSpinner(),t.msg.errorMessage(n.instant("general.error"),e)}}))}):c(r(o.prototype),"onDelete",this).call(this)}else c(r(o.prototype),"onDelete",this).call(this)}}]),o}(ue.a)).\u0275fac=function(e){return new(e||Se)(S.Wb(u.e),S.Wb(k.b),S.Wb(k.a),S.Wb(C.c),S.Wb(x.d),S.Wb(C.a),S.Wb(W.a),S.Wb(N.b),S.Wb(N.a),S.Wb(be.a),S.Wb(X.e),S.Wb(y.c),S.Wb(se.a),S.Wb(de.a),S.Wb(N.f),S.Wb(se.a),S.Wb(pe.a),S.Wb(v.r))},Se.\u0275cmp=S.Qb({type:Se,selectors:[["app-shopping"]],viewQuery:function(e,t){var c;1&e&&(S.ad(me,1),S.ad(fe,1),S.ad(ge,1)),2&e&&(S.Hc(c=S.nc())&&(t.myDataTable=c.first),S.Hc(c=S.nc())&&(t.searchbar=c.first),S.Hc(c=S.nc())&&(t.invoiceEle=c.first))},features:[S.Fb],decls:150,vars:43,consts:[[1,"card"],[1,"card-header"],[1,"card-body"],[3,"formGroup"],[1,"container-fluid","padding-top-bottom"],[1,"row"],[1,"col-md-4"],[1,"form-group"],[1,"asterisk"],["type","text","formControlName","invoice_nro","required","","autofocus","","placement","bottom","ngbTooltip","N\xba. de la factura",1,"form-control"],["focusElement","","invoiceEle",""],[1,"col-md-8"],["fullWidth","","formControlName","provider_id","required","","placement","bottom","ngbTooltip","Proveedor"],["value","0"],[3,"value",4,"ngFor","ngForOf"],[1,"col-md-6"],["fullWidth","","formControlName","point_of_sale_id","required","","placement","bottom","ngbTooltip","Punto de venta"],["fullWidth","","formControlName","warehouse_id","required","","placement","bottom","ngbTooltip","Bodega"],["fullWidth","","formControlName","payment_id","required",""],["type","date","formControlName","admission_date","required","",1,"form-control"],["type","date","formControlName","pay_day","required","",1,"form-control"],[1,"col"],[1,"page-search-input","form-group"],[1,"input-group"],["type","search","id","searchbar","placeholder","B\xfasqueda por nombre o referencia","autofocus","",1,"form-control","rounded-right","form-control-lg","shadow","pl-2",3,"keyup.enter"],["searchbar",""],[1,"input-group-append"],["type","button",1,"btn","btn-primary","search-btn","rounded","space-right",3,"click"],[1,"d-none","d-sm-block"],[1,"fas","fa-search"],["type","button","ngbTooltip","Crear nuevo producto",1,"btn","btn-success","space-right","radius-button",3,"click"],[1,"fas","fa-plus","fas-fa-22"],["type","button","ngbTooltip","Refrescar",1,"btn","btn-info","space-right","radius-button",3,"click"],[1,"fas","fa-sync","fas-fa-22"],["type","button","ngbTooltip","Limpiar",1,"btn","btn-danger","space-right","radius-button",3,"click"],[1,"fas","fa-broom","fas-fa-22"],["type","button","ngbTooltip","Cerrar",1,"btn","btn-danger","radius-button",3,"click"],[1,"fas","fa-times","fas-fa-22"],[1,"card-col-list"],[1,"card-columns"],["class","card card-sales",3,"click",4,"ngFor","ngForOf"],[1,"col-md-12","card-col"],[1,"col-sm-12","col-md-6","padding-top-bottom"],["type","button",1,"btn","radius-button","btn-primary","space-right","radius-button",3,"disabled","click"],[1,"fas","fa-trash-alt","fas-fa-22"],["type","button",1,"btn","radius-button","btn-success","space-right","radius-button",3,"disabled","click"],["type","button",1,"btn","radius-button","btn-danger","space-right",3,"disabled","click"],[1,"fas","fa-minus","fas-fa-22"],["type","button",1,"btn","radius-button","btn-info","space-right","radius-button",3,"disabled","click"],[1,"fas","fa-save","fas-fa-22","space-right"],["type","button",1,"btn","radius-button","btn-danger","radius-button",3,"disabled","click"],[1,"fas","fa-broom","fas-fa-22","space-right"],["currencyMask","","formControlName","total","aria-describedby","helpId","readonly","",1,"form-control","radius-button","small","total-bg"],[3,"auto-create","autoheight","width","onCellselect","onRowselect","Rowunselect","onCellendedit"],["myDataTable",""],["currencyMask","","formControlName","sub_total","aria-describedby","helpId","readonly","",1,"form-control","radius-button","small","total"],["currencyMask","","formControlName","discount","aria-describedby","helpId","readonly","",1,"form-control","radius-button","small","discounts"],["currencyMask","","formControlName","vat","aria-describedby","helpId","readonly","",1,"form-control","radius-button","small","vat"],["currencyMask","","formControlName","total","aria-describedby","helpId","readonly","",1,"form-control","radius-button","small","total"],["class","row",4,"ngIf"],[2,"color","white"],[3,"value"],[1,"card","card-sales",3,"click"],["fallimg","product",1,"img-product","card-img-top",3,"src"],[1,"price"],[1,"product-name"],["formControlName","notes",1,"form-control"]],template:function(e,t){if(1&e){var c=S.dc();S.cc(0,"div",0),S.cc(1,"div",1),S.Uc(2),S.pc(3,"uppercase"),S.pc(4,"translate"),S.bc(),S.cc(5,"div",2),S.cc(6,"form",3),S.cc(7,"div",4),S.cc(8,"div",5),S.cc(9,"div",6),S.cc(10,"div",7),S.cc(11,"label"),S.cc(12,"span",8),S.Uc(13),S.pc(14,"translate"),S.bc(),S.Uc(15,"N\xba. de la factura"),S.bc(),S.Xb(16,"input",9,10),S.bc(),S.bc(),S.cc(19,"div",11),S.cc(20,"div",7),S.cc(21,"label"),S.cc(22,"span",8),S.Uc(23),S.pc(24,"translate"),S.bc(),S.Uc(25,"Proveedor"),S.bc(),S.cc(26,"ng-select",12),S.cc(27,"ng-option",13),S.Uc(28,"Seleccionar proveedor"),S.bc(),S.Sc(29,ve,2,4,"ng-option",14),S.bc(),S.bc(),S.bc(),S.bc(),S.cc(30,"div",5),S.cc(31,"div",15),S.cc(32,"div",7),S.cc(33,"label"),S.cc(34,"span",8),S.Uc(35),S.pc(36,"translate"),S.bc(),S.Uc(37,"Punto de venta"),S.bc(),S.cc(38,"ng-select",16),S.cc(39,"ng-option",13),S.Uc(40,"Seleccionar punto de venta"),S.bc(),S.Sc(41,he,2,2,"ng-option",14),S.bc(),S.bc(),S.bc(),S.cc(42,"div",15),S.cc(43,"div",7),S.cc(44,"label"),S.Uc(45,"Bodega"),S.bc(),S.cc(46,"ng-select",17),S.cc(47,"ng-option",13),S.Uc(48,"Seleccionar una bodega"),S.bc(),S.Sc(49,_e,2,2,"ng-option",14),S.bc(),S.bc(),S.bc(),S.bc(),S.cc(50,"div",5),S.cc(51,"div",6),S.cc(52,"div",7),S.cc(53,"label"),S.cc(54,"span",8),S.Uc(55),S.pc(56,"translate"),S.bc(),S.Uc(57,"Forma de pago"),S.bc(),S.cc(58,"ng-select",18),S.Sc(59,ye,2,2,"ng-option",14),S.bc(),S.bc(),S.bc(),S.cc(60,"div",6),S.cc(61,"div",7),S.cc(62,"label"),S.cc(63,"span",8),S.Uc(64),S.pc(65,"translate"),S.bc(),S.Uc(66,"Fecha de emisi\xf3n"),S.bc(),S.Xb(67,"input",19),S.bc(),S.bc(),S.cc(68,"div",6),S.cc(69,"div",7),S.cc(70,"label"),S.cc(71,"span",8),S.Uc(72),S.pc(73,"translate"),S.bc(),S.Uc(74,"Fecha de pago"),S.bc(),S.Xb(75,"input",20),S.bc(),S.bc(),S.bc(),S.cc(76,"div",5),S.cc(77,"div",21),S.cc(78,"div",5),S.cc(79,"div",21),S.cc(80,"div",22),S.cc(81,"fieldset"),S.cc(82,"div",23),S.cc(83,"input",24,25),S.mc("keyup.enter",function(){S.Lc(c);var e=S.Ic(84);return t.onSearchProducts(e.value,1)}),S.bc(),S.cc(85,"div",26),S.cc(86,"button",27),S.mc("click",function(){S.Lc(c);var e=S.Ic(84);return t.onSearchProducts(e.value,1)}),S.Xb(87,"span",28),S.Xb(88,"i",29),S.bc(),S.cc(89,"button",30),S.mc("click",function(){return t.onCreateProduct()}),S.Xb(90,"i",31),S.bc(),S.cc(91,"button",32),S.mc("click",function(){S.Lc(c);var e=S.Ic(84);return t.onRefresh(e.value)}),S.Xb(92,"i",33),S.bc(),S.cc(93,"button",34),S.mc("click",function(){return t.onClearFilter()}),S.Xb(94,"i",35),S.bc(),S.cc(95,"button",36),S.mc("click",function(){return t.onClose()}),S.Xb(96,"i",37),S.bc(),S.bc(),S.bc(),S.bc(),S.bc(),S.bc(),S.bc(),S.bc(),S.bc(),S.cc(97,"div",5),S.cc(98,"div",21),S.cc(99,"div",38),S.cc(100,"div",39),S.Sc(101,xe,8,5,"div",40),S.bc(),S.bc(),S.bc(),S.bc(),S.cc(102,"div",5),S.cc(103,"div",41),S.cc(104,"div",5),S.cc(105,"div",42),S.cc(106,"button",43),S.mc("click",function(){return t.onDelete()}),S.Xb(107,"i",44),S.bc(),S.cc(108,"button",45),S.mc("click",function(){return t.onAdd()}),S.Xb(109,"i",31),S.bc(),S.cc(110,"button",46),S.mc("click",function(){return t.onMinus()}),S.Xb(111,"i",47),S.bc(),S.cc(112,"button",48),S.mc("click",function(){return t.onSave()}),S.Xb(113,"i",49),S.Uc(114,"Guardar "),S.bc(),S.cc(115,"button",50),S.mc("click",function(){return t.onCancel()}),S.Xb(116,"i",51),S.Uc(117,"Cancelar "),S.bc(),S.bc(),S.cc(118,"div",42),S.Xb(119,"input",52),S.bc(),S.bc(),S.cc(120,"div",5),S.cc(121,"div",21),S.cc(122,"jqxGrid",53,54),S.mc("onCellselect",function(e){return t.onCelSelect(e)})("onRowselect",function(e){return t.onRowSelect(e)})("Rowunselect",function(e){return t.onRowUnselect(e)})("onCellendedit",function(e){return t.onCellEndEdit(e)}),S.bc(),S.bc(),S.bc(),S.cc(124,"div",5),S.cc(125,"div",15),S.cc(126,"div",7),S.cc(127,"label"),S.Uc(128," Subtotal"),S.bc(),S.Xb(129,"input",55),S.bc(),S.bc(),S.cc(130,"div",15),S.cc(131,"div",7),S.cc(132,"label"),S.Uc(133," Descuento"),S.bc(),S.Xb(134,"input",56),S.bc(),S.bc(),S.bc(),S.cc(135,"div",5),S.cc(136,"div",15),S.cc(137,"div",7),S.cc(138,"label"),S.Uc(139," IVA"),S.bc(),S.Xb(140,"input",57),S.bc(),S.bc(),S.cc(141,"div",15),S.cc(142,"div",7),S.cc(143,"label"),S.Uc(144," Total"),S.bc(),S.Xb(145,"input",58),S.bc(),S.bc(),S.bc(),S.Sc(146,Ce,6,0,"div",59),S.bc(),S.bc(),S.bc(),S.bc(),S.bc(),S.bc(),S.cc(147,"ngx-spinner"),S.cc(148,"p",60),S.Uc(149),S.bc(),S.bc()}2&e&&(S.Ib(2),S.Wc(" ",S.qc(3,27,S.qc(4,29,"general.createEdit"))," FACTURA DE COMPRA "),S.Ib(4),S.vc("formGroup",t.customForm),S.Ib(7),S.Wc(" ",S.qc(14,31,"general.asterisk"),""),S.Ib(3),S.Ob("status-danger",t.invalidName)("is-invalid",t.invalidName),S.Ib(7),S.Wc(" ",S.qc(24,33,"general.asterisk"),""),S.Ib(6),S.vc("ngForOf",t.providers),S.Ib(6),S.Wc(" ",S.qc(36,35,"general.asterisk"),""),S.Ib(6),S.vc("ngForOf",t.pointsOfSale),S.Ib(8),S.vc("ngForOf",t.ware_house),S.Ib(6),S.Wc(" ",S.qc(56,37,"general.asterisk"),""),S.Ib(4),S.vc("ngForOf",t.payments),S.Ib(5),S.Wc(" ",S.qc(65,39,"general.asterisk"),""),S.Ib(8),S.Wc(" ",S.qc(73,41,"general.asterisk"),""),S.Ib(29),S.vc("ngForOf",t.itemsResult),S.Ib(5),S.vc("disabled",!t.selectedRow),S.Ib(2),S.vc("disabled",!t.selectedRow),S.Ib(2),S.vc("disabled",!t.selectedRow),S.Ib(2),S.vc("disabled",!t.selectedRow),S.Ib(3),S.vc("disabled",!t.selectedRow||t.invoice_id>0),S.Ib(7),S.vc("auto-create",!1)("autoheight",!0)("width",t.getWidth()),S.Ib(24),S.vc("ngIf",!t.editing),S.Ib(3),S.Wc(" ",t.maskSpinner," "))},directives:[u.z,u.q,u.h,u.c,u.p,u.g,u.w,v.N,g.a,g.d,d.m,h.a,b.a,d.n,y.a],pipes:[d.v,x.c,d.d],styles:["@media (min-width:768px){.card-columns[_ngcontent-%COMP%]{-moz-column-count:4;column-count:4}}@media (min-width:992px){.card-columns[_ngcontent-%COMP%]{-moz-column-count:6;column-count:6}}@media (min-width:1200px){.card-columns[_ngcontent-%COMP%]{-moz-column-count:8;column-count:8}}.create-customer[_ngcontent-%COMP%]{background-color:#a50721!important;color:#fff!important;font-weight:700!important}.search-custom[_ngcontent-%COMP%]{background:#fff!important;border-radius:10px;box-shadow:0 2px 8px 0 rgba(50,50,50,.322);padding-bottom:5px!important}.card-col-list[_ngcontent-%COMP%]{max-height:250px;overflow:auto}.card-col[_ngcontent-%COMP%]{max-height:870px;min-height:200px;overflow:auto}.discounts[_ngcontent-%COMP%]{color:green;font-weight:700}.total[_ngcontent-%COMP%], .total-bg[_ngcontent-%COMP%]{color:red;font-weight:700}.total-bg[_ngcontent-%COMP%]{font-size:24px}.vat[_ngcontent-%COMP%]{color:#00f;font-weight:700}.card-sales[_ngcontent-%COMP%]{border:2px solid hsla(0,0%,100%,.247);box-shadow:0 2px 6px 0 rgba(50,50,50,.322);margin:5px!important;min-height:138px!important}.card-sales[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]{color:red;font-size:16px;font-weight:700;margin-bottom:auto;margin-top:auto;padding-bottom:4px;padding-top:4px;text-align:right}.card-sales[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{padding:4px}.card-sales[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]:hover{background-color:red;color:#fff}.card-sales[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]:hover   .price[_ngcontent-%COMP%]{color:#fff}.card-sales[_ngcontent-%COMP%]   .product-name[_ngcontent-%COMP%]{font-size:12px;font-weight:700;margin-bottom:0!important;text-align:center;text-transform:uppercase}.card-sales[_ngcontent-%COMP%]   .img-product[_ngcontent-%COMP%]{display:block;margin:auto;max-width:62px}.card-sales[_ngcontent-%COMP%]   .img-product[_ngcontent-%COMP%]:hover{border-radius:10px;box-shadow:0 2px 8px 0 rgba(50,50,50,.75)}.card-sales[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding-bottom:1px!important;padding-left:4px;padding-right:4px;padding-top:1px!important}.card-sales[_ngcontent-%COMP%]:hover{border:2px solid rgba(23,58,253,.12156862745098039);cursor:pointer}.card-sales[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]:hover{background-color:#173afd;color:#fff}.product-name-header[_ngcontent-%COMP%]{background-color:#639;border:2px solid hsla(0,0%,100%,.5137254901960784);border-radius:25px;color:#fff;font-size:16px;font-weight:700;height:32px;padding:4px;text-align:center;word-break:break-all}"]}),Se),we=o("xg8E"),ke=["customGrid"],Oe=["myDataTable"],Fe=["searchField"],Pe=["focusElement"],Ue=["amountElement"],Me=["cashele"],De=["searchbar"],Xe=["myTabs"];function qe(e,t){if(1&e){var c=S.dc();S.cc(0,"div",59),S.mc("click",function(){S.Lc(c);var e=t.$implicit;return S.oc().onClickItem(e)}),S.Xb(1,"img",60),S.cc(2,"div",2),S.cc(3,"h6",61),S.Uc(4),S.pc(5,"currency"),S.bc(),S.cc(6,"p",62),S.Uc(7),S.bc(),S.bc(),S.bc()}if(2&e){var a=t.$implicit;S.Ib(1),S.vc("src",a.image,S.Oc),S.Ib(3),S.Wc(" ",S.qc(5,3,a.sale_price),""),S.Ib(3),S.Vc(a.product_name)}}function We(e,t){if(1&e&&(S.cc(0,"ng-option",63),S.Uc(1),S.bc()),2&e){var c=t.$implicit;S.vc("value",c.id),S.Ib(1),S.Xc(" ",c.name_taxe," - ",c.rate_value," % ")}}function Ne(e,t){if(1&e&&(S.cc(0,"ng-option",63),S.Uc(1),S.bc()),2&e){var c=t.$implicit;S.vc("value",c.id),S.Ib(1),S.Xc(" ",c.name_taxe," - ",c.rate_value," % ")}}function Te(e,t){if(1&e&&(S.cc(0,"div",31),S.cc(1,"label",64),S.Uc(2,"Lote #"),S.bc(),S.cc(3,"div",65),S.Xb(4,"input",66),S.bc(),S.bc()),2&e){var c=S.oc();S.Ib(4),S.vc("readonly",!c.perishable)}}function Ve(e,t){if(1&e&&(S.cc(0,"div",31),S.cc(1,"label",64),S.Uc(2,"Fecha de fabricaci\xf3n"),S.bc(),S.cc(3,"div",65),S.Xb(4,"input",67),S.bc(),S.bc()),2&e){var c=S.oc();S.Ib(4),S.vc("readonly",!c.perishable)}}function Re(e,t){if(1&e&&(S.cc(0,"div",31),S.cc(1,"label",64),S.Uc(2,"Fecha de vencimiento"),S.bc(),S.cc(3,"div",65),S.Xb(4,"input",68),S.bc(),S.bc()),2&e){var c=S.oc();S.Ib(4),S.vc("readonly",!c.perishable)}}var Ae,Be,Ee,Ge=[{path:"",component:I,children:[{path:"invoices",component:le},{path:"invoices/create",component:Ie},{path:"invoices/edit/:id",component:Ie},{path:"invoices/create/detail/:id",component:Ie},{path:"invoices/detail/edit/:id",component:(Ae=function(e){a(o,e);var n=i(o);function o(e,t,c,a,i,r,s,d,u,b,p,m,f){var g;return l(this,o),(g=n.call(this,e,t,c,a,i,r,b)).fb=e,g.msg=t,g.api=c,g.router=a,g.translate=i,g.aRouter=r,g.currSer=s,g.reporstSer=d,g.itemsSer=u,g.spinner=b,g.documents=p,g.shopSer=m,g.taxSer=f,g.title="Productos/Servicios",g.items=[],g.itemsResult=[],g.lines=[],g.taxBill=[],g.taxSales=[],g.perishable=!1,g.itemName="",g.oldItem=[],g.customForm=g.fb.group({amount:[""],batch:[""],expiration_date:[""],fabrication_date:[""],product_name:[""],sale_price:[""],tax_bill_id:[""],tax_sale_id:[""],total_cost:[""],unit_cost:[""],unit_price:[""],gain:[""],percentage_gain:[""],vat_included:[""]}),g}return t(o,[{key:"ngOnInit",value:function(){var e=this,t=this;t.showSpinner(),t.taxSer.getData({isVat:!0}).subscribe(function(a){t.taxBill=a,t.taxSales=a,c(r(o.prototype),"ngOnInit",e).call(e)})}},{key:"ngAfterViewInit",value:function(){}},{key:"loadData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=this;t.editing=!0,t.shopSer.getDetailID(e).subscribe(function(e){t.oldItem=e,t.onClearForm(),t.onRefresh()})}},{key:"onChangeUnitPrice",value:function(){this.onPurchaseData()}},{key:"onChangeSalePrice",value:function(){this.onSalesData()}},{key:"onClickItem",value:function(e){var t=this,c=t.customForm,a=e,n=t.translate;2!==a.class_id?te.a.fire({title:"Cambiar item",text:"Est\xe1 a punto de cambiar el ITEM, \xbfDesea continuar.?",icon:"question",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:n.instant("buttons.yes"),cancelButtonText:n.instant("buttons.not")}).then(function(e){if(e.value){t.perishable=a.perishable;var n=parseFloat(a.purchase_cost.toString())/parseFloat(a.tax_bill_rate.toString());c.get("amount").setValue(1),c.get("unit_price").setValue(n),c.get("tax_bill_id").setValue(a.tax_bill_id),c.get("tax_sale_id").setValue(a.tax_sales_id);var i=parseFloat((n*a.percentage_gain/100).toString())+n;a.sale_price>i&&(i=a.sale_price),c.get("sale_price").setValue(i),t.itemSelect=a,t.itemName=a.product_name,t.onChageTaxBill(a.tax_bill_id),t.onChangeTaxSale(a.tax_sales_id)}}):(t.msg.toastMessage("","El item seleccionado no maneja inventarios.",4),t.onClearForm())}},{key:"onClearFilter",value:function(){this.onClearForm(),this.searchField.nativeElement.value="",this.itemsResult=this.items}},{key:"onRefresh",value:function(){var e=this;e.showSpinner("Cargando listado de productos."),e.itemsSer.getDataSales({}).subscribe(function(t){e.items=t,e.hideSpinner(),e.itemsResult=e.items},function(){return e.hideSpinner()})}},{key:"onSearchProducts",value:function(e){var t=this;t.showSpinner(),t.onClearForm(),0===t.items.length&&e.length>0?t.itemsSer.getDataSales({}).subscribe(function(c){t.items=c,t.hideSpinner(),t.itemsResult=t.items.filter(function(t){return t.product_name.toLowerCase().indexOf(e.toLowerCase())>=0})}):e.length>0?(t.itemsResult=t.items.filter(function(t){return t.product_name.toLowerCase().indexOf(e.toLowerCase())>=0}),t.hideSpinner()):(t.itemsResult=t.items,t.hideSpinner())}},{key:"onClearForm",value:function(){var e=this,t=e.customForm,c=e.oldItem;e.itemSelect=null,e.itemName="",e.taxBillSelect=e.taxBill.find(function(e){return e.id===c[0].tax_bill_id});var a=c[0].unit_cost;c[0].vat_included||(a=parseFloat(c[0].unit_cost.toString())/parseFloat(e.taxBillSelect.decimal_rate.toString())),t.setValue({amount:c[0].amount,batch:c[0].batch,expiration_date:c[0].expiration_date,fabrication_date:c[0].fabrication_date,product_name:c[0].product_name,sale_price:c[0].sale_price,tax_bill_id:c[0].tax_bill_id,tax_sale_id:c[0].tax_sale_id,total_cost:c[0].total_cost,unit_cost:c[0].unit_cost,unit_price:a,gain:0,percentage_gain:0,vat_included:c[0].vat_included}),e.perishable=c[0].perishable,e.onChageTaxBill(c[0].tax_bill_id),e.onChangeTaxSale(c[0].tax_sale_id),e.onPurchaseData()}},{key:"onChageTaxBill",value:function(e){this.taxBillSelect=this.taxBill.find(function(t){return t.id===e}),this.onPurchaseData()}},{key:"onChageAmount",value:function(e){this.onPurchaseData()}},{key:"onChageIncluded",value:function(e){this.onPurchaseData()}},{key:"onChangeTaxSale",value:function(e){this.taxSaleSelect=this.taxSales.find(function(t){return t.id===e}),this.onSalesData()}},{key:"onSalesData",value:function(){var e=this;if(e.taxSaleSelect){var t,c,a=e.customForm,n=parseFloat(a.get("unit_price").value),i=parseFloat(a.get("sale_price").value),o=parseFloat(e.taxBillSelect.decimal_rate.toString()),r=0;r=(c=(t=i/parseFloat(e.taxSaleSelect.decimal_rate.toString()))-(1==a.get("vat_included").value?n/o:n))/t*100,a.get("gain").setValue(c),a.get("percentage_gain").setValue("".concat(r.toFixed(2)," %"))}}},{key:"onPurchaseData",value:function(){var e=this;if(e.taxBillSelect){var t=e.customForm,c=parseFloat(t.get("amount").value),a=parseFloat(t.get("unit_price").value),n=parseFloat(e.taxBillSelect.decimal_rate.toString()),i=n>0?a*n:a,o=i*c;1==t.get("vat_included").value?(t.get("unit_cost").setValue(a),t.get("total_cost").setValue(a*c)):(t.get("unit_cost").setValue(i),t.get("total_cost").setValue(o)),c>0&&e.onSalesData()}}},{key:"onSave",value:function(){var e=this,t=e.customForm,c=e.uid,a=t.getRawValue();return parseFloat(a.amount)<=0||parseFloat(a.sale_price)<=0||parseFloat(a.unit_cost)<=0?(e.msg.toastMessage("","Hay un error en las cantidades.",4),!1):t.invalid?(e.msg.toastMessage("","Hay campos sin llenar.",4),!1):void(c?e.onSaveDetail(a):e.msg.toastMessage("Error","Error en la aplicaci\xf3n"))}},{key:"onSaveDetail",value:function(e){var t=this;t.showSpinner("Guardando cambios"),t.itemSelect?(t.itemSelect.perishable||(e.batch=null,e.fabrication_date=null,e.expiration_date=null),e.product_id=t.itemSelect.id):t.oldItem[0].perishable||(e.batch=null,e.fabrication_date=null,e.expiration_date=null);var c={records:JSON.stringify(e)};t.api.put("/shopping/update/detail/".concat(t.uid),c).subscribe(function(e){e.success?(t.msg.toastMessage("","Los cambios se han guardado correctamente."),t.onClose()):t.msg.toastMessage("",e.message,4),t.hideSpinner()},function(e){t.hideSpinner()})}},{key:"onClose",value:function(){this.goRoute("shopping/invoices")}}]),o}(we.a),Ae.\u0275fac=function(e){return new(e||Ae)(S.Wb(u.e),S.Wb(k.b),S.Wb(k.a),S.Wb(C.c),S.Wb(x.d),S.Wb(C.a),S.Wb(N.a),S.Wb(be.a),S.Wb(X.e),S.Wb(y.c),S.Wb(se.a),S.Wb(de.a),S.Wb(N.f))},Ae.\u0275cmp=S.Qb({type:Ae,selectors:[["app-detail-edit"]],viewQuery:function(e,t){var c;1&e&&(S.ad(ke,1),S.ad(Oe,1),S.ad(Fe,1),S.ad(Pe,1),S.ad(Ue,1),S.ad(Me,1),S.ad(De,1),S.ad(Xe,1)),2&e&&(S.Hc(c=S.nc())&&(t.customGrid=c.first),S.Hc(c=S.nc())&&(t.myDataTable=c.first),S.Hc(c=S.nc())&&(t.searchField=c.first),S.Hc(c=S.nc())&&(t.focusElement=c.first),S.Hc(c=S.nc())&&(t.amountElement=c.first),S.Hc(c=S.nc())&&(t.cashele=c.first),S.Hc(c=S.nc())&&(t.searchbar=c.first),S.Hc(c=S.nc())&&(t.myTabs=c.first))},features:[S.Fb],decls:114,vars:14,consts:[[1,"card"],[1,"card-header"],[1,"card-body"],[3,"formGroup"],[1,"container-fluid","padding-top-bottom"],[1,"row"],[1,"col"],[1,"form-group"],["type","text","nbinput","","fullWidth","","formControlName","product_name",1,"form-control",3,"readOnly"],[1,"col-md-7"],[1,"page-search-input","form-group"],[1,"input-group"],["type","search","id","searchbar","placeholder","B\xfasqueda","autofocus","",1,"form-control","rounded-right","form-control-lg","shadow","pl-2",3,"keyup.enter"],["searchField",""],[1,"input-group-append"],["type","button",1,"btn","btn-primary","search-btn","rounded","space-right",3,"click"],[1,"d-none","d-sm-block"],[1,"fas","fa-search"],["type","button","ngbTooltip","Crear nuevo producto",1,"btn","btn-success","space-right","radius-button"],[1,"fas","fa-plus","fas-fa-22"],["type","button","ngbTooltip","Refrescar",1,"btn","btn-info","space-right","radius-button",3,"click"],[1,"fas","fa-sync","fas-fa-22"],["type","button","ngbTooltip","Limpiar",1,"btn","btn-danger","space-right","radius-button",3,"click"],[1,"fas","fa-broom","fas-fa-22"],["type","button","ngbTooltip","Cerrar",1,"btn","btn-danger","radius-button",3,"click"],[1,"fas","fa-times","fas-fa-22"],[1,"col","product-name-header"],[1,"col","card-col"],[1,"card-columns"],["class","card card-sales",3,"click",4,"ngFor","ngForOf"],[1,"col-md-5","card-col"],[1,"form-group","row"],["for","inputQuantity",1,"col-sm-3","col-form-label"],[1,"col-sm-9"],["type","number","id","inputQuantity","placeholder","Cantidad","formControlName","amount",1,"form-control",3,"change"],["amountElement",""],["for","selectBill",1,"col-sm-3","col-form-label"],["id","selectBill","formControlName","tax_bill_id",3,"change"],[3,"value",4,"ngFor","ngForOf"],[1,"form-check"],["type","checkbox","id","ckInclude","formControlName","vat_included",1,"form-check-input",3,"change"],["for","ckInclude",1,"form-check-label"],["for","inputAmount1",1,"col-sm-3","col-form-label"],["formControlName","unit_price","currencyMask","","type","text","id","inputAmount1","ngbTooltip","Costo unitario sin impuesto","placeholder","Costo unitario",1,"form-control",3,"keyup"],[1,"col-sm-6"],["formControlName","unit_cost","currencyMask","","type","text","id","inputAmount","ngbTooltip","Costo unitario con impuesto","placeholder","Costo unitario","readonly","",1,"form-control","radius-button","total"],["formControlName","total_cost","type","text","currencyMask","","placeholder","Total","readonly","",1,"form-control","radius-button","total"],["for","selectSale",1,"col-sm-4","col-form-label"],[1,"col-sm-8"],["id","selectSale","formControlName","tax_sale_id",3,"change"],["for","salePrice",1,"col-sm-4","col-form-label"],["formControlName","sale_price","currencyMask","","type","text","id","salePrice","placement","bottom","ngbTooltip","Precio de venta con impuesto incluido","placeholder","Precio de venta",1,"form-control",3,"keyup"],[1,"col-sm-4","col-form-label"],["readonly","","formControlName","gain","currencyMask","","type","text","placement","bottom","ngbTooltip","Ganancia posible","placeholder","Ganancia posible",1,"form-control"],["readonly","","formControlName","percentage_gain","type","text","placement","bottom","ngbTooltip","Procentaje Ganancia posible",1,"form-control"],["class","form-group row",4,"ngIf"],["type","button",1,"btn","radius-button","btn-primary","space-right","radius-button","btn-block",3,"disabled","click"],[1,"fas","fa-save","fas-fa-22"],[2,"color","white"],[1,"card","card-sales",3,"click"],["fallimg","product",1,"img-product","card-img-top",3,"src"],[1,"price"],[1,"product-name"],[3,"value"],[1,"col-sm-5","col-form-label"],[1,"col-sm-7"],["formControlName","batch","type","text",1,"form-control",3,"readonly"],["formControlName","fabrication_date","type","date",1,"form-control",3,"readonly"],["formControlName","expiration_date","type","date",1,"form-control",3,"readonly"]],template:function(e,t){if(1&e){var c=S.dc();S.cc(0,"div",0),S.cc(1,"div",1),S.Uc(2," EDITAR DETALLE DEL ITEM "),S.bc(),S.cc(3,"div",2),S.cc(4,"form",3),S.cc(5,"div",4),S.cc(6,"div",5),S.cc(7,"div",6),S.cc(8,"div",7),S.cc(9,"label"),S.Uc(10,"Nombre del producto."),S.bc(),S.Xb(11,"input",8),S.bc(),S.bc(),S.bc(),S.cc(12,"div",5),S.cc(13,"div",9),S.cc(14,"div",5),S.cc(15,"div",6),S.cc(16,"div",10),S.cc(17,"fieldset"),S.cc(18,"div",11),S.cc(19,"input",12,13),S.mc("keyup.enter",function(){S.Lc(c);var e=S.Ic(20);return t.onSearchProducts(e.value)}),S.bc(),S.cc(21,"div",14),S.cc(22,"button",15),S.mc("click",function(){S.Lc(c);var e=S.Ic(20);return t.onSearchProducts(e.value)}),S.Xb(23,"span",16),S.Xb(24,"i",17),S.bc(),S.cc(25,"button",18),S.Xb(26,"i",19),S.bc(),S.cc(27,"button",20),S.mc("click",function(){return t.onRefresh()}),S.Xb(28,"i",21),S.bc(),S.cc(29,"button",22),S.mc("click",function(){return t.onClearFilter()}),S.Xb(30,"i",23),S.bc(),S.cc(31,"button",24),S.mc("click",function(){return t.onClose()}),S.Xb(32,"i",25),S.bc(),S.bc(),S.bc(),S.bc(),S.bc(),S.bc(),S.bc(),S.cc(33,"div",5),S.cc(34,"div",26),S.cc(35,"label"),S.cc(36,"span"),S.Uc(37),S.bc(),S.bc(),S.bc(),S.bc(),S.cc(38,"div",5),S.cc(39,"div",27),S.cc(40,"div",28),S.Sc(41,qe,8,5,"div",29),S.bc(),S.bc(),S.bc(),S.bc(),S.cc(42,"div",30),S.cc(43,"div",5),S.cc(44,"div",6),S.cc(45,"div",0),S.cc(46,"div",1),S.Uc(47," Datos de compra "),S.bc(),S.cc(48,"div"),S.cc(49,"div",31),S.cc(50,"label",32),S.Uc(51,"Cantidad"),S.bc(),S.cc(52,"div",33),S.cc(53,"input",34,35),S.mc("change",function(e){return t.onChageAmount(e)}),S.bc(),S.bc(),S.bc(),S.cc(55,"div",31),S.cc(56,"label",36),S.Uc(57,"Impuesto"),S.bc(),S.cc(58,"div",33),S.cc(59,"ng-select",37),S.mc("change",function(e){return t.onChageTaxBill(e)}),S.Sc(60,We,2,3,"ng-option",38),S.bc(),S.bc(),S.bc(),S.cc(61,"div",31),S.cc(62,"div",39),S.cc(63,"input",40),S.mc("change",function(e){return t.onChageIncluded(e)}),S.bc(),S.cc(64,"label",41),S.Uc(65," Incluido "),S.bc(),S.bc(),S.bc(),S.cc(66,"div",31),S.cc(67,"label",42),S.Uc(68,"Costo U."),S.bc(),S.cc(69,"div",33),S.cc(70,"input",43),S.mc("keyup",function(){return t.onChangeUnitPrice()}),S.bc(),S.bc(),S.bc(),S.cc(71,"div",31),S.cc(72,"div",44),S.Xb(73,"input",45),S.bc(),S.cc(74,"div",44),S.Xb(75,"input",46),S.bc(),S.bc(),S.bc(),S.bc(),S.bc(),S.bc(),S.cc(76,"div",5),S.cc(77,"div",6),S.cc(78,"div",0),S.cc(79,"div"),S.Uc(80," Datos de venta "),S.bc(),S.cc(81,"div"),S.cc(82,"div",31),S.cc(83,"label",47),S.Uc(84,"Impuesto"),S.bc(),S.cc(85,"div",48),S.cc(86,"ng-select",49),S.mc("change",function(e){return t.onChangeTaxSale(e)}),S.Sc(87,Ne,2,3,"ng-option",38),S.bc(),S.bc(),S.bc(),S.cc(88,"div",31),S.cc(89,"label",50),S.Uc(90,"Precio de venta"),S.bc(),S.cc(91,"div",48),S.cc(92,"input",51),S.mc("keyup",function(){return t.onChangeSalePrice()}),S.bc(),S.bc(),S.bc(),S.cc(93,"div",31),S.cc(94,"label",52),S.Uc(95,"Ganancia posible"),S.bc(),S.cc(96,"div",48),S.Xb(97,"input",53),S.bc(),S.bc(),S.cc(98,"div",31),S.cc(99,"label",52),S.Uc(100,"% Ganancia"),S.bc(),S.cc(101,"div",48),S.Xb(102,"input",54),S.bc(),S.bc(),S.Sc(103,Te,5,1,"div",55),S.Sc(104,Ve,5,1,"div",55),S.Sc(105,Re,5,1,"div",55),S.cc(106,"div",7),S.cc(107,"button",56),S.mc("click",function(){return t.onSave()}),S.Xb(108,"i",57),S.Uc(109),S.pc(110,"translate"),S.bc(),S.bc(),S.bc(),S.bc(),S.bc(),S.bc(),S.bc(),S.bc(),S.bc(),S.bc(),S.bc(),S.bc(),S.cc(111,"ngx-spinner"),S.cc(112,"p",58),S.Uc(113),S.bc(),S.bc()}2&e&&(S.Ib(4),S.vc("formGroup",t.customForm),S.Ib(7),S.vc("readOnly",t.editing),S.Ib(26),S.Wc(" ",t.itemName," "),S.Ib(4),S.vc("ngForOf",t.itemsResult),S.Ib(19),S.vc("ngForOf",t.taxBill),S.Ib(27),S.vc("ngForOf",t.taxSales),S.Ib(16),S.vc("ngIf",t.perishable),S.Ib(1),S.vc("ngIf",t.perishable),S.Ib(1),S.vc("ngIf",t.perishable),S.Ib(2),S.vc("disabled",!t.customForm.valid),S.Ib(2),S.Wc(" ",S.qc(110,12,"buttons.save")," "),S.Ib(4),S.Wc(" ",t.maskSpinner," "))},directives:[u.z,u.q,u.h,u.c,u.p,u.g,v.N,d.m,u.u,g.a,u.a,h.a,d.n,y.a,g.d],pipes:[x.c,d.d],styles:["@media (min-width:768px){.card-columns[_ngcontent-%COMP%]{-moz-column-count:4;column-count:4}}@media (min-width:992px){.card-columns[_ngcontent-%COMP%]{-moz-column-count:6;column-count:6}}@media (min-width:1200px){.card-columns[_ngcontent-%COMP%]{-moz-column-count:8;column-count:8}}.create-customer[_ngcontent-%COMP%]{background-color:#a50721!important;color:#fff!important;font-weight:700!important}.search-custom[_ngcontent-%COMP%]{background:#fff!important;border-radius:10px;box-shadow:0 2px 8px 0 rgba(50,50,50,.322);padding-bottom:5px!important}.card-col-list[_ngcontent-%COMP%]{max-height:250px;overflow:auto}.card-col[_ngcontent-%COMP%]{max-height:870px;min-height:200px;overflow:auto}.discounts[_ngcontent-%COMP%]{color:green;font-weight:700}.total[_ngcontent-%COMP%], .total-bg[_ngcontent-%COMP%]{color:red;font-weight:700}.total-bg[_ngcontent-%COMP%]{font-size:24px}.vat[_ngcontent-%COMP%]{color:#00f;font-weight:700}.card-sales[_ngcontent-%COMP%]{border:2px solid hsla(0,0%,100%,.247);box-shadow:0 2px 6px 0 rgba(50,50,50,.322);margin:5px!important;min-height:138px!important}.card-sales[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]{color:red;font-size:16px;font-weight:700;margin-bottom:auto;margin-top:auto;padding-bottom:4px;padding-top:4px;text-align:right}.card-sales[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{padding:4px}.card-sales[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]:hover{background-color:red;color:#fff}.card-sales[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]:hover   .price[_ngcontent-%COMP%]{color:#fff}.card-sales[_ngcontent-%COMP%]   .product-name[_ngcontent-%COMP%]{font-size:12px;font-weight:700;margin-bottom:0!important;text-align:center;text-transform:uppercase}.card-sales[_ngcontent-%COMP%]   .img-product[_ngcontent-%COMP%]{display:block;margin:auto;max-width:62px}.card-sales[_ngcontent-%COMP%]   .img-product[_ngcontent-%COMP%]:hover{border-radius:10px;box-shadow:0 2px 8px 0 rgba(50,50,50,.75)}.card-sales[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding-bottom:1px!important;padding-left:4px;padding-right:4px;padding-top:1px!important}.card-sales[_ngcontent-%COMP%]:hover{border:2px solid rgba(23,58,253,.12156862745098039);cursor:pointer}.card-sales[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]:hover{background-color:#173afd;color:#fff}.product-name-header[_ngcontent-%COMP%]{background-color:#639;border:2px solid hsla(0,0%,100%,.5137254901960784);border-radius:25px;color:#fff;font-size:16px;font-weight:700;height:32px;padding:4px;text-align:center;word-break:break-all}"]}),Ae)},{path:"providers",component:M},{path:"providers/create",component:Z},{path:"providers/edit/:id",component:Z}]}],Le=((Be=function e(){l(this,e)}).\u0275fac=function(e){return new(e||Be)},Be.\u0275mod=S.Ub({type:Be}),Be.\u0275inj=S.Tb({imports:[[C.f.forChild(Ge)],C.f]}),Be),ze={align:"right",allowNegative:!0,allowZero:!0,decimal:".",precision:2,prefix:"$ ",suffix:"",thousands:",",nullable:!0},je=((Ee=function e(){l(this,e)}).\u0275fac=function(e){return new(e||Ee)},Ee.\u0275mod=S.Ub({type:Ee}),Ee.\u0275inj=S.Tb({imports:[[d.c,y.b,f.a,v.t,_.a,v.C,h.b.forRoot(ze),p.b,g.c,b.b,m.b,u.v,x.b,Le]]}),Ee)}}])}();