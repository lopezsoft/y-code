(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{rJ0g:function(e,t,c){"use strict";c.r(t),c.d(t,"customCurrencyMaskConfig",function(){return Xe}),c.d(t,"SalesModule",function(){return Ae});var n=c("ofXK"),i=c("3Pt+"),a=c("aSZe"),o=c("7M0M"),r=c("3HhI"),s=c("Z1v9"),l=c("ZOsW"),d=c("1kSV"),u=c("TT0I"),b=c("mrSG"),m=c("fXoL"),p=c("jhN1");const g=["iframe"];function h(e,t){if(1&e&&m.Xb(0,"div",3),2&e){const e=m.oc(2);m.vc("innerHtml",e.docHtml,m.Mc)}}function f(e,t){if(1&e&&(m.cc(0,"object",4),m.cc(1,"p"),m.Uc(2," Your browser does not support PDFs. "),m.cc(3,"a",5),m.Uc(4,"Download the PDF"),m.bc(),m.Uc(5,". "),m.bc(),m.bc()),2&e){const e=m.oc(2);m.vc("data",e.fullUrl,m.Nc),m.Ib(3),m.vc("href",e.fullUrl,m.Oc)}}function v(e,t){if(1&e&&(m.ac(0),m.Sc(1,h,1,1,"div",1),m.Sc(2,f,6,2,"object",2),m.Zb()),2&e){const e=m.oc();m.Ib(1),m.vc("ngIf","pdf"!==e.configuredViewer),m.Ib(1),m.vc("ngIf",e.fullUrl&&"pdf"===e.configuredViewer)}}function y(e,t){if(1&e){const e=m.dc();m.cc(0,"iframe",8,9),m.mc("load",function(){return m.Lc(e),m.oc(2).iframeLoaded()}),m.bc()}if(2&e){const e=m.oc(2);m.vc("src",e.fullUrl,m.Nc)}}function _(e,t){if(1&e){const e=m.dc();m.cc(0,"iframe",12,9),m.mc("load",function(){return m.Lc(e),m.oc(3).iframeLoaded()}),m.bc()}if(2&e){const e=m.oc(3);m.vc("src",e.fullUrl,m.Nc)}}function w(e,t){if(1&e&&(m.cc(0,"div",10),m.Xb(1,"div"),m.Sc(2,_,2,1,"iframe",11),m.bc()),2&e){const e=m.oc(2);m.Ib(1),m.Qc("background-color","popout-hide"===e.disableContent?"#fff":"transparent"),m.Ob("overlay-full","all"===e.disableContent)("overlay-popout-google","google"===e.configuredViewer&&("popout"===e.disableContent||"popout-hide"===e.disableContent))("overlay-popout-office","office"===e.configuredViewer&&("popout"===e.disableContent||"popout-hide"===e.disableContent)),m.Ib(1),m.vc("ngIf",e.fullUrl)}}function C(e,t){if(1&e&&(m.ac(0),m.Sc(1,y,2,1,"iframe",6),m.Sc(2,w,3,9,"div",7),m.Zb()),2&e){const e=m.oc();m.Ib(1),m.vc("ngIf",e.fullUrl&&"none"===e.disableContent),m.Ib(1),m.vc("ngIf","none"!==e.disableContent)}}const I=e=>{const t=e.match(/^(https?\:)\/\/(([^:\/?#]*)(?:\:([0-9]+))?)([\/]{0,1}[^?#]*)(\?[^#]*|)(#.*|)$/);return t&&{href:e,protocol:t[1],host:t[2],hostname:t[3],port:t[4],pathname:t[5],search:t[6],hash:t[7]}},x=e=>{var t;let c=!1;try{c=S()?!(null===(t=null==e?void 0:e.contentWindow)||void 0===t?void 0:t.document):!(null==e?void 0:e.contentDocument)}catch(n){}return c},S=()=>/MSIE (\d+\.\d+);/.test(navigator.userAgent)||navigator.userAgent.indexOf("Trident/")>-1,k=(e,t="google",c="",n="")=>{switch(t){case"google":n="https://docs.google.com/gview?url=%URL%&embedded=true";break;case"office":n="https://view.officeapps.live.com/op/embed.aspx?src=%URL%";break;case"pdf":n=""}const i="google"===t||"office"===t||"url"===t,a=e.indexOf("/")?encodeURIComponent(e):e;let o=n?n.replace("%URL%",a):e;return c&&i&&"url"!==t&&(o=`${o}${c.startsWith("&")?"":"&"}${c}`),{url:o,externalViewer:i}};let U=(()=>{class e{constructor(e,t){this.domSanitizer=e,this.ngZone=t,this.loaded=new m.p,this.url="",this.queryParams="",this.viewerUrl="",this.googleCheckInterval=3e3,this.googleMaxChecks=5,this.disableContent="none",this.googleCheckContentLoaded=!0,this.fullUrl=null,this.externalViewer=!1,this.docHtml="",this.configuredViewer="google",this.shouldCheckIframe=!1}ngAfterViewInit(){var e,t;if(this.shouldCheckIframe){const c=null===(t=null===(e=this.iframes)||void 0===e?void 0:e.first)||void 0===t?void 0:t.nativeElement;c&&(this.shouldCheckIframe=!1,this.reloadIframe(c))}}ngOnDestroy(){this.checkIFrameSubscription&&this.checkIFrameSubscription.unsubscribe()}ngOnChanges(e){return Object(b.b)(this,void 0,void 0,function*(){if(e&&e.viewer&&(e.viewer.isFirstChange||e.viewer.currentValue!==e.viewer.previousValue)&&("google"!==this.viewer&&"office"!==this.viewer&&"mammoth"!==this.viewer&&"pdf"!==this.viewer&&"url"!==this.viewer&&console.error(`Unsupported viewer: '${this.viewer}'. Supported viewers: google, office, mammoth and pdf`),this.configuredViewer=this.viewer),e.url&&e.url.currentValue!==e.url.previousValue||e.viewer&&e.viewer.currentValue!==e.viewer.previousValue||e.viewerUrl&&e.viewerUrl.currentValue!==e.viewerUrl.previousValue){let e=k(this.url,this.configuredViewer,this.queryParams,this.viewerUrl);if(this.externalViewer=e.externalViewer,e.externalViewer&&this.overrideLocalhost&&(e=>{const t=I(this.url),c=(null==t?void 0:t.hostname)||"";return["localhost","127.0.0.1","","::1"].includes(c)||c.startsWith("192.168.")||c.startsWith("10.0.")||c.endsWith(".local")})()){const t=((e,t)=>{const c=I(e),n=I(t);return c&&n?e.replace(c.port?`${c.hostname}:${c.port}`:c.hostname,n.port?`${n.hostname}:${n.port}`:n.hostname):e})(this.url,this.overrideLocalhost);e=k(t,this.configuredViewer,this.queryParams,this.viewerUrl)}this.docHtml="",this.checkIFrameSubscription&&this.checkIFrameSubscription.unsubscribe(),this.url?e.externalViewer||"url"===this.configuredViewer?(this.fullUrl=this.domSanitizer.bypassSecurityTrustResourceUrl(e.url),"google"===this.configuredViewer&&this.googleCheckContentLoaded&&this.ngZone.runOutsideAngular(()=>{var e,t;const c=null===(t=null===(e=this.iframes)||void 0===e?void 0:e.first)||void 0===t?void 0:t.nativeElement;c?this.reloadIframe(c):this.shouldCheckIframe=!0})):"mammoth"===this.configuredViewer&&(this.docHtml=yield(t=this.url,Object(b.b)(void 0,void 0,void 0,function*(){mammoth||console.error("Please install mammoth and make sure mammoth.browser.min.js is loaded.");const e=yield(e=>new Promise((t,c)=>{try{const c=new XMLHttpRequest;c.open("GET",e,!0),c.responseType="blob",c.onload=()=>{const e=new FileReader;e.readAsArrayBuffer(c.response),e.onloadend=()=>{t(e.result)}},c.send()}catch(n){c(`error while retrieving file ${e}.`)}}))(t);return(yield mammoth.convertToHtml({arrayBuffer:e})).value}))):this.fullUrl=null}var t})}reloadIframe(e){this.checkIFrameSubscription=(()=>{let e=null,t=0;return{subscribe:(c,n=3e3,i=5)=>{if(!x(c))return e=setInterval(()=>{t++,t>=i&&clearInterval(e),(e=>{e&&(console.log("reloading.."),e.src=e.src)})(c)},n),e;e&&clearInterval(e)},unsubscribe:()=>{e&&clearInterval(e)}}})(),this.checkIFrameSubscription.subscribe(e,this.googleCheckInterval,this.googleMaxChecks)}iframeLoaded(){var e,t;const c=null===(t=null===(e=this.iframes)||void 0===e?void 0:e.first)||void 0===t?void 0:t.nativeElement;c&&x(c)&&(this.loaded.emit(null),this.checkIFrameSubscription&&this.checkIFrameSubscription.unsubscribe())}}return e.\u0275fac=function(t){return new(t||e)(m.Wb(p.b),m.Wb(m.E))},e.\u0275cmp=m.Qb({type:e,selectors:[["ngx-doc-viewer"]],viewQuery:function(e,t){if(1&e&&m.Zc(g,1),2&e){let e;m.Hc(e=m.nc())&&(t.iframes=e)}},inputs:{url:"url",queryParams:"queryParams",viewerUrl:"viewerUrl",googleCheckInterval:"googleCheckInterval",googleMaxChecks:"googleMaxChecks",disableContent:"disableContent",googleCheckContentLoaded:"googleCheckContentLoaded",viewer:"viewer",overrideLocalhost:"overrideLocalhost"},outputs:{loaded:"loaded"},features:[m.Gb],decls:2,vars:2,consts:[[4,"ngIf"],[3,"innerHtml",4,"ngIf"],["type","application/pdf","width","100%","height","100%",3,"data",4,"ngIf"],[3,"innerHtml"],["type","application/pdf","width","100%","height","100%",3,"data"],[3,"href"],["id","iframe-doc-viewer","frameBorder","0",3,"src","load",4,"ngIf"],["class","container",4,"ngIf"],["id","iframe-doc-viewer","frameBorder","0",3,"src","load"],["iframe",""],[1,"container"],["id","iframe","frameBorder","0",3,"src","load",4,"ngIf"],["id","iframe","frameBorder","0",3,"src","load"]],template:function(e,t){1&e&&(m.Sc(0,v,3,2,"ng-container",0),m.Sc(1,C,3,2,"ng-container",0)),2&e&&(m.vc("ngIf",!t.externalViewer),m.Ib(1),m.vc("ngIf",t.externalViewer))},directives:[n.n],styles:["[_nghost-%COMP%] {\n        display: block;\n      }\n      .container[_ngcontent-%COMP%] {\n        width: 100%;\n        height: 100%;\n        position: relative;\n      }\n      .overlay-popout-google[_ngcontent-%COMP%] {\n        width: 40px;\n        height: 40px;\n        right: 26px;\n        top: 11.5px;\n        position: absolute;\n        z-index: 1000;\n      }\n      .overlay-popout-office[_ngcontent-%COMP%] {\n        width: 100px;\n        height: 20px;\n        right: 0;\n        bottom: 0;\n        position: absolute;\n        z-index: 1000;\n      }\n      .overlay-full[_ngcontent-%COMP%] {\n        width: 100%;\n        height: 100%;\n        right: 0;\n        top: 0;\n        position: absolute;\n        z-index: 1000;\n      }\n      iframe[_ngcontent-%COMP%] {\n        width: 100%;\n        height: 100%;\n      }"]}),e})(),O=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=m.Ub({type:e}),e.\u0275inj=m.Tb({imports:[[n.c]]}),e})();var M=c("pKmL"),F=c("JqCM"),P=c("sYmb"),q=c("tyNb");let V=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=m.Qb({type:e,selectors:[["app-sales"]],decls:1,vars:0,template:function(e,t){1&e&&m.Xb(0,"router-outlet")},directives:[q.g],encapsulation:2}),e})();var D=c("py8Q"),N=c("YMfE");const X=["customGrid"],A=["searchField"];function W(e,t){if(1&e){const e=m.dc();m.cc(0,"div"),m.cc(1,"button",21),m.mc("click",function(){return m.Lc(e),m.oc().importData()}),m.Xb(2,"i",33),m.Uc(3),m.pc(4,"translate"),m.bc(),m.bc()}if(2&e){const e=m.oc();m.Ib(1),m.vc("disabled",e.loading),m.Ib(2),m.Wc(" ",m.qc(4,2,"buttons.import")," ")}}let T=(()=>{class e extends D.a{constructor(e,t,c,n,i){super(e,t,c,n,i),this.msg=e,this.api=t,this.router=c,this.translate=n,this.aRouter=i,this.title="Clientes"}ngOnInit(){this.changeLanguage(this.activeLang)}ngAfterViewInit(){const e=this;e.crudApi={create:"/persons/create",read:"/persons/customers",update:"/persons/update/",delete:"/persons/delete/"},e.showActions=!0,e.showRowNumber=!0,e.pagesize=10,e.datafields=[{name:"id",type:"number"},{name:"company_name",type:"string"},{name:"dni",type:"string"},{name:"description",type:"string"},{name:"full_name",type:"string"}],e.sourceColumns=[{text:"Mostrar nombre como",datafield:"full_name",align:"center"},{text:"DNI",datafield:"dni",align:"center",minWidth:100,cellsalign:"right"},{text:"Empresa",datafield:"company_name",align:"center"}],this.prepareGrid()}createData(){super.createData(),this.goRoute("sales/customers/create")}editData(e){super.editData(e),this.goRoute(`sales/customers/edit/${e.id}`)}}return e.\u0275fac=function(t){return new(t||e)(m.Wb(N.b),m.Wb(N.a),m.Wb(q.c),m.Wb(P.d),m.Wb(q.a))},e.\u0275cmp=m.Qb({type:e,selectors:[["app-customers"]],viewQuery:function(e,t){if(1&e&&(m.Zc(X,1),m.Zc(A,1)),2&e){let e;m.Hc(e=m.nc())&&(t.customGrid=e.first),m.Hc(e=m.nc())&&(t.searchField=e.first)}},features:[m.Fb],decls:77,vars:38,consts:[[1,"card"],[1,"card-header"],[1,"card-title"],[1,"menuExport"],[1,"space-right"],[1,"btn","btn-danger","round","mr-1","mb-1",3,"disabled","click"],[1,"fa","fa-sync","mr-1","fas-fa-22"],[1,"myMenu","space-right"],[1,"clearColor",3,"height","onItemclick"],["myMenu",""],["id","Exports"],[1,"fas","fa-cog","fas-fa-22","fas-fa-red"],["href","javascript:void(0)"],[2,"width","200px"],[1,"fas","fa-file-excel","fas-fa-xls"],[1,"fas","fa-file-csv","fas-fa-xls"],["type","separator"],[1,"fas","fa-file-pdf","fas-fa-pdf"],[1,"fas","fa-file-code","fas-fa-code"],[1,"fas","fa-print","fas-fa-print"],[1,"margin-left","space-right"],[1,"btn","btn-success","round","mr-1","mb-1",3,"disabled","click"],[1,"fa","fa-plus","mr-1","fas-fa-22"],[4,"ngIf"],[1,"container-fluid"],[1,"input-group"],["type","text","autofocus","",1,"form-control",3,"placeholder","keyup"],["searchField",""],[1,"input-group-append"],[1,"btn","btn-primary",3,"disabled","click"],[1,"fa","fa-search"],["width","100%",3,"disabled","auto-create","onCellselect","onBindingcomplete"],["customGrid",""],[1,"fa","fa-upload","mr-1","fas-fa-22"]],template:function(e,t){1&e&&(m.cc(0,"div",0),m.cc(1,"div",1),m.cc(2,"h4",2),m.Uc(3),m.pc(4,"uppercase"),m.bc(),m.bc(),m.cc(5,"div",0),m.cc(6,"div",3),m.cc(7,"div",4),m.cc(8,"button",5),m.mc("click",function(){return t.searchQuery()}),m.Xb(9,"i",6),m.bc(),m.bc(),m.cc(10,"div",7),m.cc(11,"jqxMenu",8,9),m.mc("onItemclick",function(e){return t.itemclick(e)}),m.cc(13,"ul"),m.cc(14,"li",10),m.Xb(15,"i",11),m.Xb(16,"a",12),m.cc(17,"ul",13),m.cc(18,"li"),m.cc(19,"a",12),m.Xb(20,"i",14),m.Uc(21),m.pc(22,"translate"),m.bc(),m.bc(),m.cc(23,"li"),m.cc(24,"a",12),m.Xb(25,"i",15),m.Uc(26),m.pc(27,"translate"),m.bc(),m.bc(),m.cc(28,"li"),m.cc(29,"a",12),m.Xb(30,"i",14),m.Uc(31),m.pc(32,"translate"),m.bc(),m.bc(),m.Xb(33,"li",16),m.cc(34,"li"),m.cc(35,"a",12),m.Xb(36,"i",17),m.Uc(37),m.pc(38,"translate"),m.bc(),m.bc(),m.Xb(39,"li",16),m.cc(40,"li"),m.cc(41,"a",12),m.Xb(42,"i",18),m.Uc(43),m.pc(44,"translate"),m.bc(),m.bc(),m.cc(45,"li"),m.cc(46,"a",12),m.Xb(47,"i",18),m.Uc(48),m.pc(49,"translate"),m.bc(),m.bc(),m.cc(50,"li"),m.cc(51,"a",12),m.Xb(52,"i",18),m.Uc(53),m.pc(54,"translate"),m.bc(),m.bc(),m.Xb(55,"li",16),m.cc(56,"li"),m.cc(57,"a",12),m.Xb(58,"i",19),m.Uc(59),m.pc(60,"translate"),m.bc(),m.bc(),m.bc(),m.bc(),m.bc(),m.bc(),m.bc(),m.cc(61,"div",20),m.cc(62,"button",21),m.mc("click",function(){return t.createData()}),m.Xb(63,"i",22),m.Uc(64),m.pc(65,"translate"),m.bc(),m.bc(),m.Sc(66,W,5,4,"div",23),m.bc(),m.cc(67,"div",24),m.cc(68,"fieldset"),m.cc(69,"div",25),m.cc(70,"input",26,27),m.mc("keyup",function(e){return t.inputKey(e)}),m.bc(),m.cc(72,"div",28),m.cc(73,"button",29),m.mc("click",function(){return t.searchQuery()}),m.Xb(74,"i",30),m.bc(),m.bc(),m.bc(),m.bc(),m.cc(75,"jqxGrid",31,32),m.mc("onCellselect",function(e){return t.cellClick(e)})("onBindingcomplete",function(e){return t.Bindingcomplete(e)}),m.bc(),m.bc(),m.bc(),m.bc()),2&e&&(m.Ib(3),m.Vc(m.qc(4,18,t.title)),m.Ib(5),m.vc("disabled",t.loading),m.Ib(3),m.vc("height",36),m.Ib(10),m.Vc(m.qc(22,20,"export.excel")),m.Ib(5),m.Vc(m.qc(27,22,"export.csv")),m.Ib(5),m.Vc(m.qc(32,24,"export.xml")),m.Ib(6),m.Vc(m.qc(38,26,"export.pdf")),m.Ib(6),m.Vc(m.qc(44,28,"export.html")),m.Ib(5),m.Vc(m.qc(49,30,"export.json")),m.Ib(5),m.Vc(m.qc(54,32,"export.tsv")),m.Ib(6),m.Vc(m.qc(60,34,"export.print")),m.Ib(3),m.vc("disabled",t.loading),m.Ib(2),m.Wc(" ",m.qc(65,36,"buttons.new")," "),m.Ib(2),m.vc("ngIf",t.useImport),m.Ib(4),m.vc("placeholder",t.placeholderSearch),m.Ib(3),m.vc("disabled",t.loading),m.Ib(2),m.vc("disabled",t.loading)("auto-create",!1))},directives:[o.a,n.n,a.a],pipes:[n.v,P.c],encapsulation:2}),e})();var L=c("TK7J"),R=c("UnFQ"),E=c("Absx"),$=c("mm0L"),z=c("PcHl"),G=c("dKyG"),H=c("uHPU");const Z=["focusElement"],B=["uploadFile"],j=["imgUp"];function Q(e,t){if(1&e&&(m.cc(0,"ng-option",35),m.Uc(1),m.bc()),2&e){const e=t.$implicit;m.vc("value",e.id),m.Ib(1),m.Wc("",e.description," ")}}function J(e,t){if(1&e&&(m.cc(0,"ng-option",35),m.Xb(1,"img",36),m.Uc(2),m.bc()),2&e){const e=t.$implicit;m.vc("value",e.id),m.Ib(1),m.vc("src","assets/flags/"+e.image,m.Oc),m.Ib(1),m.Wc(" ",e.CurrencyName," ")}}function K(e,t){if(1&e&&(m.cc(0,"ng-option",35),m.Xb(1,"img",36),m.Uc(2),m.bc()),2&e){const e=t.$implicit;m.vc("value",e.id),m.Ib(1),m.vc("src","assets/flags/"+e.image,m.Oc),m.Ib(1),m.Wc(" ",e.country_name," ")}}function Y(e,t){if(1&e&&(m.cc(0,"ng-option",35),m.Uc(1),m.bc()),2&e){const e=t.$implicit;m.vc("value",e.id),m.Ib(1),m.Wc(" ",e.full_name," ")}}function ee(e,t){if(1&e&&(m.cc(0,"div",13),m.cc(1,"div",14),m.cc(2,"label"),m.Uc(3,"Cliente principal"),m.bc(),m.cc(4,"ng-select",37),m.cc(5,"ng-option",38),m.Uc(6,"Ninguno"),m.bc(),m.Sc(7,Y,2,2,"ng-option",17),m.bc(),m.bc(),m.bc()),2&e){const e=m.oc(2);m.Ib(4),m.vc("virtualScroll",!0),m.Ib(3),m.vc("ngForOf",e.persons)}}function te(e,t){if(1&e){const e=m.dc();m.cc(0,"div",12),m.cc(1,"div",13),m.cc(2,"div",14),m.cc(3,"label"),m.cc(4,"span",15),m.Uc(5),m.pc(6,"translate"),m.bc(),m.Uc(7),m.pc(8,"translate"),m.bc(),m.cc(9,"ng-select",16),m.Sc(10,Q,2,2,"ng-option",17),m.bc(),m.bc(),m.bc(),m.cc(11,"div",13),m.cc(12,"div",14),m.cc(13,"label"),m.cc(14,"span",15),m.Uc(15),m.pc(16,"translate"),m.bc(),m.Uc(17,"Mostrar nombre como"),m.bc(),m.Xb(18,"input",18,19),m.bc(),m.bc(),m.bc(),m.cc(20,"div",12),m.cc(21,"div",13),m.cc(22,"div",14),m.cc(23,"label"),m.cc(24,"span",15),m.Uc(25),m.pc(26,"translate"),m.bc(),m.Uc(27),m.pc(28,"translate"),m.bc(),m.cc(29,"ng-select",20),m.Sc(30,J,3,3,"ng-option",17),m.bc(),m.bc(),m.bc(),m.cc(31,"div",13),m.cc(32,"div",14),m.cc(33,"label"),m.cc(34,"span",15),m.Uc(35),m.pc(36,"translate"),m.bc(),m.Uc(37),m.pc(38,"translate"),m.bc(),m.cc(39,"ng-select",21),m.Sc(40,K,3,3,"ng-option",17),m.bc(),m.bc(),m.bc(),m.bc(),m.cc(41,"div",12),m.cc(42,"div",13),m.Xb(43,"br"),m.Xb(44,"br"),m.cc(45,"div",14),m.cc(46,"div",22),m.cc(47,"label",23),m.cc(48,"input",24),m.mc("change",function(t){return m.Lc(e),m.oc().onChageSeconday(t)}),m.bc(),m.Uc(49," \xbfEs un cliente secundario? "),m.bc(),m.bc(),m.bc(),m.bc(),m.Sc(50,ee,8,2,"div",25),m.bc(),m.cc(51,"div",12),m.cc(52,"div",26),m.cc(53,"div",14),m.cc(54,"label"),m.Uc(55,"Titulo"),m.bc(),m.Xb(56,"input",27),m.bc(),m.bc(),m.cc(57,"div",28),m.cc(58,"div",14),m.cc(59,"label"),m.Uc(60,"Nombres"),m.bc(),m.Xb(61,"input",29),m.bc(),m.bc(),m.cc(62,"div",28),m.cc(63,"div",14),m.cc(64,"label"),m.Uc(65,"Apellidos"),m.bc(),m.Xb(66,"input",30),m.bc(),m.bc(),m.bc(),m.cc(67,"div",12),m.cc(68,"div",13),m.cc(69,"div",14),m.cc(70,"label"),m.Uc(71,"DNI"),m.bc(),m.Xb(72,"input",31),m.bc(),m.bc(),m.cc(73,"div",13),m.cc(74,"div",14),m.cc(75,"label"),m.Uc(76,"Nombre de la empresa"),m.bc(),m.Xb(77,"input",32),m.bc(),m.bc(),m.bc(),m.cc(78,"div",12),m.cc(79,"div",13),m.cc(80,"div",14),m.cc(81,"label"),m.Uc(82,"Correo electr\xf3nico"),m.bc(),m.Xb(83,"input",33),m.bc(),m.bc(),m.cc(84,"div",13),m.cc(85,"div",14),m.cc(86,"label"),m.Uc(87,"Web"),m.bc(),m.Xb(88,"input",34),m.bc(),m.bc(),m.bc()}if(2&e){const e=m.oc();m.Ib(5),m.Vc(m.qc(6,26,"general.asterisk")),m.Ib(2),m.Vc(m.qc(8,28,"companies.type_organization")),m.Ib(2),m.Ob("is-invalid",e.invalidOrganization),m.vc("virtualScroll",!0),m.Ib(1),m.vc("ngForOf",e.typeOrg),m.Ib(5),m.Vc(m.qc(16,30,"general.asterisk")),m.Ib(3),m.Ob("is-invalid",e.invalidFullName)("status-danger",e.invalidFullName),m.Ib(7),m.Vc(m.qc(26,32,"general.asterisk")),m.Ib(2),m.Vc(m.qc(28,34,"companies.currency")),m.Ib(2),m.Ob("is-invalid",e.invalidCurrency),m.vc("virtualScroll",!0),m.Ib(1),m.vc("ngForOf",e.currency),m.Ib(5),m.Vc(m.qc(36,36,"general.asterisk")),m.Ib(2),m.Vc(m.qc(38,38,"companies.country")),m.Ib(2),m.Ob("is-invalid",e.invalidCountry)("status-danger",e.invalidCountry),m.vc("virtualScroll",!0),m.Ib(1),m.vc("ngForOf",e.countries),m.Ib(10),m.vc("ngIf",e.is_secondary)}}function ce(e,t){1&e&&(m.cc(0,"div",12),m.cc(1,"div",13),m.cc(2,"div",14),m.cc(3,"label"),m.Uc(4,"Direcci\xf3n principal"),m.bc(),m.Xb(5,"textarea",39),m.bc(),m.bc(),m.cc(6,"div",13),m.cc(7,"div",14),m.cc(8,"label"),m.Uc(9,"Direcci\xf3n postal"),m.bc(),m.Xb(10,"textarea",40),m.bc(),m.bc(),m.bc(),m.cc(11,"div",12),m.cc(12,"div",13),m.cc(13,"div",14),m.cc(14,"label"),m.Uc(15,"Ciudad/Distrito"),m.bc(),m.Xb(16,"input",41),m.bc(),m.bc(),m.cc(17,"div",13),m.cc(18,"label"),m.Uc(19,"Estado/Provincia"),m.bc(),m.Xb(20,"input",42),m.bc(),m.bc(),m.cc(21,"div",12),m.cc(22,"div",13),m.cc(23,"div",14),m.cc(24,"label"),m.Uc(25,"C\xf3digo postal"),m.bc(),m.Xb(26,"input",43),m.bc(),m.bc(),m.cc(27,"div",13),m.cc(28,"label"),m.Uc(29,"Movil"),m.bc(),m.Xb(30,"input",44),m.bc(),m.bc(),m.cc(31,"div",12),m.cc(32,"div",13),m.cc(33,"div",14),m.cc(34,"label"),m.Uc(35,"Fijo"),m.bc(),m.Xb(36,"input",45),m.bc(),m.bc(),m.bc())}function ne(e,t){if(1&e&&(m.cc(0,"ng-option",35),m.Uc(1),m.bc()),2&e){const e=t.$implicit;m.vc("value",e.id),m.Ib(1),m.Xc(" ",e.name_taxe," - ",e.rate_name," ")}}function ie(e,t){if(1&e&&(m.cc(0,"ng-option",35),m.Uc(1),m.bc()),2&e){const e=t.$implicit;m.vc("value",e.id),m.Ib(1),m.Xc(" ",e.account_number," - ",e.account_name," ")}}function ae(e,t){if(1&e&&(m.cc(0,"ng-option",35),m.Uc(1),m.bc()),2&e){const e=t.$implicit;m.vc("value",e.id),m.Ib(1),m.Wc(" ",e.payment_method," ")}}function oe(e,t){if(1&e&&(m.cc(0,"ng-option",35),m.Uc(1),m.bc()),2&e){const e=t.$implicit;m.vc("value",e.id),m.Ib(1),m.Wc(" ",e.term_name," ")}}function re(e,t){if(1&e&&(m.cc(0,"div",12),m.cc(1,"div",13),m.cc(2,"div",14),m.cc(3,"label"),m.Uc(4),m.pc(5,"translate"),m.bc(),m.cc(6,"ng-select",46),m.cc(7,"ng-option",38),m.Uc(8,"Ninguno"),m.bc(),m.Sc(9,ne,2,3,"ng-option",17),m.bc(),m.bc(),m.bc(),m.cc(10,"div",13),m.cc(11,"div",14),m.cc(12,"label"),m.Uc(13,"Cuenta contable"),m.bc(),m.cc(14,"ng-option",38),m.Uc(15,"Ninguna"),m.bc(),m.cc(16,"ng-select",47),m.Sc(17,ie,2,3,"ng-option",17),m.bc(),m.bc(),m.bc(),m.bc(),m.cc(18,"div",12),m.cc(19,"div",13),m.cc(20,"div",14),m.cc(21,"label"),m.Uc(22,"Metodo de pago preferido"),m.bc(),m.cc(23,"ng-option",38),m.Uc(24,"Ninguno"),m.bc(),m.cc(25,"ng-select",48),m.Sc(26,ae,2,2,"ng-option",17),m.bc(),m.bc(),m.bc(),m.cc(27,"div",13),m.cc(28,"div",14),m.cc(29,"label"),m.Uc(30,"Condiciones de pago"),m.bc(),m.cc(31,"ng-option",38),m.Uc(32,"Ninguna"),m.bc(),m.cc(33,"ng-select",49),m.Sc(34,oe,2,2,"ng-option",17),m.bc(),m.bc(),m.bc(),m.bc(),m.cc(35,"div",12),m.cc(36,"div",13),m.cc(37,"div",14),m.cc(38,"label"),m.Uc(39,"Saldo inicial"),m.bc(),m.Xb(40,"input",50),m.bc(),m.bc(),m.cc(41,"div",13),m.cc(42,"div",14),m.cc(43,"label"),m.Uc(44,"A partir de la fecha"),m.bc(),m.Xb(45,"input",51),m.bc(),m.bc(),m.bc()),2&e){const e=m.oc();m.Ib(4),m.Vc(m.qc(5,7,"general.tax")),m.Ib(5),m.vc("ngForOf",e.tax),m.Ib(7),m.vc("virtualScroll",!0),m.Ib(1),m.vc("ngForOf",e.accounts),m.Ib(9),m.vc("ngForOf",e.payments),m.Ib(7),m.vc("virtualScroll",!0),m.Ib(1),m.vc("ngForOf",e.timelimits)}}let se=(()=>{class e extends L.a{constructor(e,t,c,n,a,o,r,s,l,d,u,b,m,p,g,h){super(e,t,c,n,a,o,l),this.fb=e,this.msg=t,this.api=c,this.router=n,this.translate=a,this.aRouter=o,this.termsSer=r,this.attrSer=s,this.spinner=l,this.docs=d,this.cnt=u,this.curr=b,this.tor=m,this.taxSer=p,this.accountSer=g,this.custSer=h,this.typepersons=[],this.identityDocs=[],this.typeOrg=[],this.countries=[],this.currency=[],this.tax=[],this.persons=[],this.accounts=[],this.payments=[],this.timelimits=[],this.active=1,this.title="Cliente",this.translate.setDefaultLang(this.activeLang),this.customForm=this.fb.group({address:[""],city_name:[""],company_name:[""],description:[""],dni:[""],email:[""],last_name:[""],location:[""],mobile:[""],names:[""],phone:[""],postal_code:[""],state_name:[""],title:[""],web:[""],currency_id:["",[i.y.required]],country_id:[113,[i.y.required]],type_organization_id:[1,[i.y.required]],person_type_id:[1,[i.y.required]],tax_rate_id:["0"],means_payment_id:["0"],sales_term:["0"],accounting_account_id:["0"],initial_balance:[""],initial_date:[""],parent_id:["0"],is_secondary:[!1],full_name:["",[i.y.required,i.y.minLength(6)]]})}get invalidFullName(){return this.customForm.get("full_name").invalid&&this.customForm.get("full_name").touched}get invalidPersonType(){return this.customForm.get("person_type_id").value<=0}get invalidCountry(){return this.customForm.get("country_id").value<=0}get invalidCurrency(){return this.customForm.get("currency_id").value<=0}get invalidOrganization(){return this.customForm.get("type_organization_id").value<=0}ngOnInit(){super.ngOnInit();const e=this;e.PutURL="/persons/update/",e.PostURL="/persons/create",e.docs.getData({}).subscribe(t=>{e.identityDocs=t}),e.cnt.getData().subscribe(t=>{e.countries=t}),e.curr.getData().subscribe(t=>{e.currency=t,t.length>0&&(t.length>1?t.map(t=>{if(t.national_currency)return e.customForm.get("currency_id").setValue(t.id),!1}):e.customForm.get("currency_id").setValue(t[0].id))}),this.tor.getData({}).subscribe(e=>{this.typeOrg=e}),e.taxSer.getData({isVat:1}).subscribe(t=>{e.tax=t}),e.accountSer.getsubAccounts({}).subscribe(t=>{e.accounts=t}),e.custSer.getMeansPayment({}).subscribe(t=>{e.payments=t}),e.custSer.getTimeLimit({}).subscribe(t=>{e.timelimits=t}),e.custSer.getCustomersAll().subscribe(t=>{e.persons=t})}loadData(e=0){const t=this.customForm;this.editing=!0,this.custSer.getCustomers({uid:e}).subscribe(e=>{var c,n,i,a,o,r,s;t.setValue({address:e[0].address,city_name:e[0].city_name,company_name:e[0].company_name,country_id:e[0].country_id,currency_id:e[0].currency_id,description:e[0].description,dni:e[0].dni,email:e[0].email,full_name:e[0].full_name,last_name:e[0].last_name,location:e[0].location,mobile:e[0].mobile,names:e[0].names,is_secondary:e[0].is_secondary,person_type_id:e[0].person_type_id,type_organization_id:e[0].type_organization_id,tax_rate_id:null!==(c=e[0].tax_rate_id)&&void 0!==c?c:"0",means_payment_id:null!==(n=e[0].means_payment_id)&&void 0!==n?n:"0",sales_term:null!==(i=e[0].sales_term)&&void 0!==i?i:"0",accounting_account_id:null!==(a=e[0].accounting_account_id)&&void 0!==a?a:"0",initial_balance:null!==(o=e[0].initial_balance)&&void 0!==o?o:"0",parent_id:null!==(r=e[0].parent_id)&&void 0!==r?r:"0",initial_date:null!==(s=e[0].initial_date)&&void 0!==s?s:"",phone:e[0].phone,postal_code:e[0].postal_code,state_name:e[0].state_name,title:e[0].title,web:e[0].web})})}onChageSeconday(e){this.is_secondary=e.currentTarget.checked}}return e.\u0275fac=function(t){return new(t||e)(m.Wb(i.e),m.Wb(N.b),m.Wb(N.a),m.Wb(q.c),m.Wb(P.d),m.Wb(q.a),m.Wb(R.h),m.Wb(R.a),m.Wb(F.c),m.Wb(E.c),m.Wb(E.a),m.Wb(E.b),m.Wb($.d),m.Wb(z.f),m.Wb(G.b),m.Wb(z.b))},e.\u0275cmp=m.Qb({type:e,selectors:[["app-customer-form"]],viewQuery:function(e,t){if(1&e&&(m.Zc(Z,1),m.Zc(B,1),m.Zc(j,1)),2&e){let e;m.Hc(e=m.nc())&&(t.focusElement=e.first),m.Hc(e=m.nc())&&(t.uploadFile=e.first),m.Hc(e=m.nc())&&(t.imgUp=e.first)}},features:[m.Fb],decls:25,vars:18,consts:[[1,"card"],[1,"card-header"],[1,"card-body"],[3,"formGroup"],["ngbNav","",1,"nav-tabs",3,"activeId","activeIdChange"],["nav","ngbNav"],[3,"ngbNavItem"],["ngbNavLink","",1,"display-none"],["ngbNavContent",""],[1,"mt-2",3,"ngbNavOutlet"],[1,"card-footer"],[3,"loading","showAaveACreate","saveAClose","closeEvent","saveAndCreateEvent","saveAndCloseEvent"],[1,"row"],[1,"col-md-6"],[1,"form-group"],[1,"asterisk"],["formControlName","type_organization_id","required","",3,"virtualScroll"],[3,"value",4,"ngFor","ngForOf"],["type","text","formControlName","full_name","required","","autofocus","",1,"form-control"],["focusElement",""],["formControlName","currency_id","required","",3,"virtualScroll"],["formControlName","country_id","required","",3,"virtualScroll"],[1,"form-check"],[1,"form-check-label"],["type","checkbox","formControlName","is_secondary",1,"form-check-input",3,"change"],["class","col-md-6",4,"ngIf"],[1,"col-md-2"],["type","text","formControlName","title","name","title",1,"form-control"],[1,"col-md-5"],["type","text","formControlName","names",1,"form-control"],["type","text","formControlName","last_name",1,"form-control"],["type","text","formControlName","dni",1,"form-control"],["type","text","formControlName","company_name",1,"form-control"],["type","text","formControlName","email",1,"form-control"],["type","text","formControlName","web",1,"form-control"],[3,"value"],["height","15","width","15",3,"src"],["formControlName","parent_id",3,"virtualScroll"],["value","0"],["formControlName","address","rows","2",1,"form-control"],["formControlName","location","rows","2",1,"form-control"],["type","text","formControlName","city_name",1,"form-control"],["type","text","formControlName","state_name",1,"form-control"],["type","text","formControlName","postal_code",1,"form-control"],["type","text","formControlName","mobile",1,"form-control"],["type","text","formControlName","phone",1,"form-control"],["formControlName","tax_rate_id"],["formControlName","accounting_account_id",3,"virtualScroll"],["formControlName","means_payment_id"],["formControlName","sales_term",3,"virtualScroll"],["currencyMask","","name","initial_balance","formControlName","initial_balance",1,"form-control"],["type","date","name","initial_date","formControlName","initial_date",1,"form-control"]],template:function(e,t){if(1&e&&(m.cc(0,"div",0),m.cc(1,"div",1),m.Uc(2),m.pc(3,"uppercase"),m.pc(4,"translate"),m.pc(5,"uppercase"),m.bc(),m.cc(6,"div",2),m.cc(7,"form",3),m.cc(8,"ul",4,5),m.mc("activeIdChange",function(e){return t.active=e}),m.cc(10,"li",6),m.cc(11,"a",7),m.Uc(12,"General"),m.bc(),m.Sc(13,te,89,40,"ng-template",8),m.bc(),m.cc(14,"li",6),m.cc(15,"a",7),m.Uc(16,"Ubicaci\xf3n/Direcci\xf3n"),m.bc(),m.Sc(17,ce,37,0,"ng-template",8),m.bc(),m.cc(18,"li",6),m.cc(19,"a",7),m.Uc(20,"Pago y facturaci\xf3n"),m.bc(),m.Sc(21,re,46,9,"ng-template",8),m.bc(),m.bc(),m.Xb(22,"div",9),m.bc(),m.bc(),m.cc(23,"div",10),m.cc(24,"app-footer-form",11),m.mc("closeEvent",function(){return t.cancel()})("saveAndCreateEvent",function(){return t.saveAndCreate()})("saveAndCloseEvent",function(){return t.saveAndClose()}),m.bc(),m.bc(),m.bc()),2&e){const e=m.Ic(9);m.Ib(2),m.Xc(" ",m.qc(3,12,m.qc(4,14,"general.createEdit"))," ",m.qc(5,16,t.title)," "),m.Ib(5),m.vc("formGroup",t.customForm),m.Ib(1),m.vc("activeId",t.active),m.Ib(2),m.vc("ngbNavItem",1),m.Ib(4),m.vc("ngbNavItem",2),m.Ib(4),m.vc("ngbNavItem",3),m.Ib(4),m.vc("ngbNavOutlet",e),m.Ib(2),m.vc("loading",t.loading)("showAaveACreate",!0)("saveAClose",t.saveAClose)("saveAClose",t.saveAClose)}},directives:[i.z,i.q,i.h,d.u,d.w,d.x,d.v,d.z,H.a,l.a,i.p,i.g,i.w,n.m,i.c,i.a,n.n,l.d,u.a],pipes:[n.v,P.c],styles:["nb-checkbox[_ngcontent-%COMP%]{margin-bottom:1rem}.form-inline[_ngcontent-%COMP%]   [fullWidth][_ngcontent-%COMP%]{flex:1}.form-inline[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin:0 1.5rem 1.5rem 0}nb-card.inline-form-card[_ngcontent-%COMP%]   nb-card-body[_ngcontent-%COMP%]{padding-bottom:0}"]}),e})();var le=c("PSD3"),de=c.n(le),ue=c("xg8E"),be=c("PU63"),me=c("4IXu");const pe=["customGrid"],ge=["myDataTable"],he=["searchField"],fe=["cashele"],ve=["searchbar"],ye=["searchbar2"],_e=["searchbar3"],we=["myTabs"];function Ce(e,t){if(1&e&&(m.cc(0,"ng-option",69),m.Uc(1),m.bc()),2&e){const e=t.$implicit;m.vc("value",e.id),m.Ib(1),m.Xc(" ",e.code," - ",e.voucher_name," ")}}function Ie(e,t){if(1&e&&(m.cc(0,"ng-option",69),m.Uc(1),m.bc()),2&e){const e=t.$implicit;m.vc("value",e.id),m.Ib(1),m.Yc(" ",e.dni," - ",e.full_name," - ",e.company_name," ")}}function xe(e,t){if(1&e&&(m.cc(0,"ng-option",69),m.Xb(1,"img",70),m.Uc(2),m.bc()),2&e){const e=t.$implicit;m.vc("value",e.id),m.Ib(1),m.vc("src","assets/flags/"+e.image,m.Oc),m.Ib(1),m.Wc(" ",e.CurrencyName," ")}}function Se(e,t){if(1&e&&(m.cc(0,"ng-option",69),m.Uc(1),m.bc()),2&e){const e=t.$implicit;m.vc("value",e.id),m.Ib(1),m.Wc(" ",e.branch_name," ")}}function ke(e,t){if(1&e&&(m.cc(0,"p",80),m.Uc(1),m.bc()),2&e){const e=m.oc().$implicit;m.Ib(1),m.Xc("",e.unit_name," - ",e.abbre_unit,"")}}function Ue(e,t){if(1&e){const e=m.dc();m.cc(0,"div",71),m.mc("click",function(){m.Lc(e);const c=t.$implicit;return m.oc().onClickItem(c)}),m.cc(1,"div",72),m.cc(2,"div",73),m.cc(3,"span",74),m.cc(4,"strong"),m.Uc(5),m.bc(),m.bc(),m.bc(),m.cc(6,"div",75),m.Xb(7,"img",76),m.bc(),m.bc(),m.cc(8,"div",72),m.cc(9,"h6",77),m.Uc(10),m.pc(11,"currency"),m.bc(),m.cc(12,"p",78),m.Uc(13),m.bc(),m.Sc(14,ke,2,2,"p",79),m.bc(),m.bc()}if(2&e){const e=t.$implicit;m.Ib(5),m.Vc(e.stock),m.Ib(2),m.vc("src",e.image,m.Oc),m.Ib(3),m.Wc(" ",m.qc(11,6,e.sale_price),""),m.Ib(3),m.Xc("",e.product_name," - ",e.abbre_unit,""),m.Ib(1),m.vc("ngIf",e.unit_name.length>0)}}function Oe(e,t){if(1&e&&(m.cc(0,"ng-option",69),m.Uc(1),m.bc()),2&e){const e=t.$implicit;m.vc("value",e.id),m.Ib(1),m.Xc(" ",e.code," - ",e.voucher_name," ")}}function Me(e,t){if(1&e&&(m.cc(0,"ng-option",69),m.Uc(1),m.bc()),2&e){const e=t.$implicit;m.vc("value",e.id),m.Ib(1),m.Xc(" ",e.code," - ",e.payment_method," ")}}function Fe(e,t){if(1&e&&(m.cc(0,"ng-option",69),m.Uc(1),m.bc()),2&e){const e=t.$implicit;m.vc("value",e.id),m.Ib(1),m.Xc(" ",e.code," - ",e.payment_method," ")}}function Pe(e,t){if(1&e&&(m.cc(0,"ng-option",69),m.Uc(1),m.bc()),2&e){const e=t.$implicit;m.vc("value",e.id),m.Ib(1),m.Wc(" ",e.term_name," ")}}function qe(e,t){if(1&e){const e=m.dc();m.cc(0,"div",81),m.cc(1,"h4",82),m.Uc(2,"Guardar documento"),m.bc(),m.cc(3,"button",83),m.mc("click",function(){return t.$implicit.dismiss("Cross click")}),m.cc(4,"span",84),m.Uc(5,"\xd7"),m.bc(),m.bc(),m.bc(),m.cc(6,"div",85),m.cc(7,"div",86),m.cc(8,"div",87),m.cc(9,"label"),m.Uc(10,"Forma de pago"),m.bc(),m.bc(),m.cc(11,"div",88),m.cc(12,"ng-select",89),m.mc("change",function(t){return m.Lc(e),m.oc().onPaymenMethods(t)}),m.Sc(13,Me,2,3,"ng-option",10),m.bc(),m.bc(),m.bc(),m.cc(14,"div",86),m.cc(15,"div",87),m.cc(16,"label"),m.Uc(17,"Medio de pago"),m.bc(),m.bc(),m.cc(18,"div",88),m.cc(19,"ng-select",90),m.Sc(20,Fe,2,3,"ng-option",10),m.bc(),m.bc(),m.bc(),m.cc(21,"div",86),m.cc(22,"div",87),m.cc(23,"label"),m.Uc(24,"Fecha de emisi\xf3n"),m.bc(),m.bc(),m.cc(25,"div",88),m.cc(26,"input",91,92),m.mc("change",function(){m.Lc(e);const t=m.Ic(27);return m.oc().onDate(t.value)}),m.bc(),m.bc(),m.bc(),m.cc(28,"div",86),m.cc(29,"div",93),m.cc(30,"label"),m.Uc(31,"Plazo"),m.bc(),m.bc(),m.cc(32,"div",94),m.cc(33,"ng-select",95),m.mc("change",function(t){return m.Lc(e),m.oc().onTimeLimits(t)}),m.Sc(34,Pe,2,2,"ng-option",10),m.bc(),m.bc(),m.bc(),m.cc(35,"div",86),m.cc(36,"div",87),m.cc(37,"label"),m.Uc(38,"Fecha de vencimiento"),m.bc(),m.bc(),m.cc(39,"div",88),m.cc(40,"input",96,97),m.mc("change",function(){m.Lc(e);const t=m.Ic(41);return m.oc().onExpirationDate(t.value)}),m.bc(),m.bc(),m.bc(),m.cc(42,"div",86),m.cc(43,"div",98),m.cc(44,"label"),m.Uc(45,"Total"),m.bc(),m.bc(),m.cc(46,"div",99),m.Xb(47,"input",100),m.bc(),m.bc(),m.cc(48,"div",86),m.cc(49,"div",98),m.cc(50,"label"),m.Uc(51,"Efectivo"),m.bc(),m.bc(),m.cc(52,"div",99),m.cc(53,"input",101,102),m.mc("keyup",function(){m.Lc(e);const t=m.Ic(54);return m.oc().onChaneCash(t.value)}),m.bc(),m.bc(),m.bc(),m.cc(55,"div",86),m.cc(56,"div",98),m.cc(57,"label"),m.Uc(58,"Cambio"),m.bc(),m.bc(),m.cc(59,"div",99),m.Xb(60,"input",103),m.bc(),m.bc(),m.bc(),m.cc(61,"div",104),m.cc(62,"button",105),m.mc("click",function(){m.Lc(e);const t=m.oc(),c=m.Ic(156);return t.onSave(c)}),m.Xb(63,"i",106),m.Uc(64),m.pc(65,"translate"),m.bc(),m.cc(66,"button",107),m.mc("click",function(){return t.$implicit.close("Cancel")}),m.Xb(67,"i",108),m.cc(68,"strong"),m.Uc(69),m.pc(70,"translate"),m.bc(),m.bc(),m.bc()}if(2&e){const e=m.oc();m.Ib(13),m.vc("ngForOf",e.paymentMethods),m.Ib(7),m.vc("ngForOf",e.meansPayment),m.Ib(13),m.vc("readonly",e.isCounted),m.Ib(1),m.vc("ngForOf",e.timeLimits),m.Ib(28),m.vc("disabled",e.customForm.invalid),m.Ib(2),m.Wc(" ",m.qc(65,7,"buttons.save")," "),m.Ib(5),m.Wc("",m.qc(70,9,"buttons.cancel")," ")}}function Ve(e,t){if(1&e&&(m.cc(0,"div",81),m.cc(1,"h4",82),m.Uc(2,"Visor de documentos"),m.bc(),m.cc(3,"button",83),m.mc("click",function(){return t.$implicit.dismiss("Cross click")}),m.cc(4,"span",84),m.Uc(5,"\xd7"),m.bc(),m.bc(),m.bc(),m.cc(6,"div",85),m.Xb(7,"ngx-doc-viewer",109),m.bc()),2&e){const e=m.oc();m.Ib(7),m.vc("url",e.pathfile)}}const De=[{path:"",component:V,children:[{path:"pos",component:(()=>{class e extends ue.a{constructor(e,t,c,n,a,o,r,s,l,d,u,b,m,p,g){super(e,t,c,n,a,o,b),this.fb=e,this.msg=t,this.api=c,this.router=n,this.translate=a,this.aRouter=o,this.resSer=r,this.perSer=s,this.currSer=l,this.reporstSer=d,this.itemsSer=u,this.spinner=b,this.documents=m,this.branch=p,this.modalService=g,this.title="Productos/Servicios",this.aDocuments=[],this.customers=[],this.currency=[],this.items=[],this.itemsResult=[],this.lines=[],this.timeLimits=[],this.paymentMethods=[],this.meansPayment=[],this.points_of_sale=[],this.selectedRow=!1,this.isCounted=!0,this.rowIndex=-1,this.pathfile="",this.source={localdata:this.lines,datatype:"array",datafields:[{name:"product_class_name",type:"string"},{name:"sku",type:" string"},{name:"image",type:" string"},{name:"unit_name",type:" string"},{name:"unit_description",type:" string"},{name:"abbre_unit",type:" string"},{name:"qr_code",type:"string"},{name:"product_name",type:"string"},{name:"notes",type:"string"},{name:"description_sales",type:"string"},{name:"shopping_description",type:"string"},{name:"barcode",type:"string"},{name:"rate_name",type:"string"},{name:"internal_code",type:"string"},{name:"state",type:"number"},{name:"quantity",type:"number"},{name:"total",type:"number"},{name:"discount",type:"number"},{name:"sale_price",type:"number"},{name:"purchase_cost",type:"number"},{name:"tax_sales",type:"number"},{name:"tax_amount",type:"number"},{name:"tax_bill",type:"number"},{name:"tax_bill_rate",type:"number"},{name:"tax_sale_rate",type:"number"},{name:"stock_min",type:"number"},{name:"stock_max",type:"number"},{name:"tax_sales_id",type:"number"},{name:"brand_id",type:" number"},{name:"stock",type:" number"},{name:"category_id",type:" number"},{name:"product_unit_id",type:" number"},{name:"factor",type:" number"},{name:"sub_category_id",type:" number"},{name:"percentage_gain",type:"number"},{name:"tax_bill_id",type:"number"},{name:"item_type_id",type:"number"},{name:"unit_id",type:"number"},{name:"base_factor",type:"number"},{name:"class_id",type:"number"},{name:"average_cost",type:"number"},{name:"recipe",type:"boolean"},{name:"vat_included",type:"boolean"},{name:"selling_out_of_inventory",type:"boolean"},{name:"perishable",type:"boolean"},{name:"id",type:"number"}]},this.dataAdapter=new jqx.dataAdapter(this.source),this.columns=[{text:"Detalle",dataField:"product_name",minWidth:200,align:"center",cellsAlign:"center",editable:!1},{text:"Cant",dataField:"quantity",width:60,align:"center",cellsAlign:"right"},{text:"U.M",dataField:"abbre_unit",minWidth:40,width:40,align:"center",cellsAlign:"center",editable:!1},{text:"Precio",dataField:"sale_price",width:100,align:"center",cellsAlign:"right",cellsFormat:"c2"},{text:"IVA",editable:!1,dataField:"tax_sales",width:50,align:"center",cellsAlign:"right"},{text:"Vr. IVA",editable:!1,dataField:"tax_amount",width:120,align:"right",cellsAlign:"right",cellsFormat:"c2"},{text:"Descuento",dataField:"discount",width:120,align:"right",cellsAlign:"right",cellsFormat:"c2"},{text:"Motivo Dtco",dataField:"reason",width:150,align:"right",cellsAlign:"right"},{text:"Total",dataField:"total",width:100,align:"right",cellsAlign:"right",cellsFormat:"c2",editable:!1}],this.editSettings={saveOnPageChange:!0,saveOnBlur:!0,saveOnSelectionChange:!0,cancelOnEsc:!0,saveOnEnter:!0,editSingleCell:!0,editOnDoubleClick:!0,editOnF2:!0},this.theme="bootstrap",this.source2={localdata:[],datafields:[{name:"CurrencyISO",type:"string"},{name:"Money",type:"string"},{name:"active",type:"number"},{name:"address",type:"string"},{name:"apply_notes",type:"boolean"},{name:"cash",type:"number"},{name:"code_ad",type:"string"},{name:"company_id",type:"number"},{name:"company_name",type:"string"},{name:"cufe",type:"string"},{name:"currency_id",type:"number"},{name:"customer_id",type:"number"},{name:"denomination",type:"string"},{name:"discount",type:"number"},{name:"dni",type:"string"},{name:"document_name",type:"string"},{name:"dv",type:"string"},{name:"electronic",type:"boolean"},{name:"email",type:"string"},{name:"expiration_date",type:"string"},{name:"id",type:"number"},{name:"image",type:"string"},{name:"invoice_date",type:"string"},{name:"invoice_name",type:"string"},{name:"invoice_nro",type:"string"},{name:"invoice_time",type:"string"},{name:"invoice_type_id",type:"number"},{name:"location",type:"string"},{name:"means_name",type:"string"},{name:"means_payment_id",type:"number"},{name:"merchant_registration",type:"string"},{name:"mobile",type:"string"},{name:"months",type:"number"},{name:"name_city",type:"string"},{name:"name_department",type:"string"},{name:"notes",type:"string"},{name:"path_report",type:"string"},{name:"payment_change",type:"string"},{name:"payment_method",type:"string"},{name:"payment_method_id",type:"number"},{name:"phone",type:"string"},{name:"plural_name",type:"string"},{name:"postal_code",type:"string"},{name:"prefix",type:"string"},{name:"prefix_doc",type:"string"},{name:"qrcode",type:"string"},{name:"singular_name",type:"string"},{name:"status",type:"number"},{name:"subtotal",type:"number"},{name:"tax_value",type:"number"},{name:"tax_amount",type:"number"},{name:"tax_sale_rate",type:"number"},{name:"taxlevel",type:"string"},{name:"taxregime",type:"string"},{name:"term_value",type:"number"},{name:"time_limit",type:"string"},{name:"total",type:"number"},{name:"stock",type:"number"},{name:"total_allowance",type:"number"},{name:"total_charges",type:"number"},{name:"typeorganization",type:"string"},{name:"username",type:"string"},{name:"voucher_name",type:"string"},{name:"zipkey",type:"string"}],datatype:"array"},this.dataAdapter2=new jqx.dataAdapter(this.source2),this.cellClass=(e,t,c)=>{const n=this.customGrid.getrowdata(e);return console.log(n),1==n.status?"fas-fa-ok-thumbs fa-cursor":2==n.status?"fas-fa-error fa-cursor":0==n.electronic?"fas-fa-ok fa-cursor":"fas-fa-warning fa-cursor"},this.columns2=[{columngroup:"Actions",text:"",sortable:!1,filterable:!1,editable:!1,align:"center",groupable:!1,draggable:!1,resizable:!1,datafield:"#mail_#",columntype:"text",width:32,cellsrenderer:(e,t,c)=>'<span><i class="fas fa-envelope-open-text fa-cursor fas-fa-mail"></span>'},{columngroup:"Actions",text:"",sortable:!1,filterable:!1,editable:!1,align:"center",groupable:!1,draggable:!1,resizable:!1,datafield:"#pdf_#",columntype:"text",width:32,cellsrenderer:(e,t,c)=>'<span><i class="fas fa-file-pdf fa-cursor fas-fa-pdf"></i></span>'},{columngroup:"Actions",text:"",filterable:!1,editable:!1,align:"center",groupable:!1,draggable:!1,resizable:!1,datafield:"#cancel_#",columntype:"text",width:32,cellsrenderer:(e,t,c)=>1==this.customGrid.getrowdata(e).active?'<i class="fas fa-check-double fas-fa-ok fa-cursor">':'<i class="fas fa-ban fas-fa-delete fa-cursor"></i>'},{text:"Factura N\xba.",dataField:"invoice_nro",width:80,cellsalign:"right"},{text:"Pref",dataField:"prefix",width:50},{text:"Adquiriente",dataField:"company_name",minwidth:350},{text:"Documento",dataField:"dni",width:90,cellsalign:"right"},{text:"Total",dataField:"total",cellsalign:"right",width:120,cellsformat:"c2"},{text:"Moneda",dataField:"Money",width:90},{text:"Fecha",dataField:"invoice_date",width:90},{text:"Estado",dataField:"active",width:90,cellsrenderer:(e,t,c)=>{switch(c){case 1:return'<p class="active-green">Activa</p>';default:return'<p class="active-red">Anulada</p>'}}}],this.customForm=this.fb.group({invoice_date:[(new Date).toISOString().split("T")[0],[i.y.required]],expiration_date:[(new Date).toISOString().split("T")[0],[i.y.required]],invoice_type_id:["",[i.y.required]],currency_id:["",[i.y.required]],customer_id:["0",[i.y.required]],point_of_sale_id:["0",[i.y.required]],discount:[0,[i.y.required]],cash:[0,[i.y.required]],payment_change:[0,[i.y.required]],vat:[0,[i.y.required]],subtotal:[0,[i.y.required]],total:[0,[i.y.required]],means_payment_id:[1,[i.y.required]],payment_method_id:[1,[i.y.required]],time_limit_id:[1,[i.y.required]]});let h=new Date;h.setDate(h.getDate()-60),this.modalForm=this.fb.group({date_from:[h.toISOString().split("T")[0]],date_up:[(new Date).toISOString().split("T")[0]],invoice_type_id:[""]})}ngOnInit(){super.ngOnInit();const e=this;let t=e.customForm;e.showSpinner();const c={where:JSON.stringify({category_id:"1",active:"1"})};e.resSer.getAccountingDocuments(c).subscribe(c=>{e.aDocuments=c,t.get("invoice_type_id").setValue(c[0].id),this.modalForm.get("invoice_type_id").setValue(c[0].id)}),e.currSer.getData({}).subscribe(c=>{if(e.currency=c,c.length>0){const e=c.find(e=>1==e.national_currency);e?t.get("currency_id").setValue(e.id):t.get("currency_id").setValue(c[0].id)}}),e.documents.getPaymentMethods({}).subscribe(t=>{e.paymentMethods=t}),e.documents.getMeansPayment({}).subscribe(c=>{e.meansPayment=c,t.get("means_payment_id").setValue(c[0].id)}),e.documents.getTimeLimits({}).subscribe(t=>{e.timeLimits=t}),e.perSer.getCustomersAll().subscribe(t=>{e.customers=t,e.hideSpinner()}),e.branch.getPointsOfSale({}).subscribe(t=>{e.points_of_sale=t,t.length>0&&e.customForm.get("point_of_sale_id").setValue(t[0].id)})}ngAfterViewInit(){}onChanegCustomer(e){console.log(e)}onClickItem(e){const t=this;let c=e,n=t.myDataTable;const i=n.getRows();if(i.length>0){let e=-1;const a=i.find((t,n)=>(e=n,t.id===c.id&&t.product_unit_id===c.product_unit_id));a?(n.setCellValue(e,"quantity",a.quantity+1),n.clearSelection(),n.selectRow(e),t.onLineTotal(a,e)):(c.discount=0,c.total=0,c.quantity=1,n.addRow(null,c,"last"),n.clearSelection(),n.selectRow(i.length-1),t.onLineTotal(c,i.length-1))}else c.discount=0,c.total=0,c.quantity=1,n.addRow(null,c,"last"),n.clearSelection(),n.selectRow(i.length-1),t.onLineTotal(c,0)}onRowSelect(e){this.selectedRow=!0,this.rowIndex=e.args.index}onRowUnselect(e){this.selectedRow=!1,this.rowIndex=-1}onCellEndEdit(e){"reason"!=e.args.dataField&&(""==e.args.displayValue&&this.myDataTable.setCellValue(e.args.index,e.args.dataField,0),this.onLineTotal(e.args.row,e.args.index))}onClearFilter(){const e=this;e.searchbar.nativeElement.value="",e.searchbar2.nativeElement.value="",e.searchbar3.nativeElement.value="",e.itemsResult=e.items,e.onSearchProducts("",0)}onSearchProducts(e,t){const c=this;if(c.showSpinner(),c.items.length>=0&&0===e.length)return c.items=[],c.itemsResult=[],void c.hideSpinner();const n=c.customForm.get("point_of_sale_id").value;c.itemsSer.getSalesProducts({point_of_sale_id:n,query_search:e,type:t}).subscribe(e=>{c.items=e,c.itemsResult=e,c.hideSpinner()},e=>{console.log(e),c.hideSpinner()})}onAdd(){const e=this;let t=e.myDataTable,c=t.getSelection()[0];if(e.rowIndex>=0&&c){const n=parseFloat(c.quantity.toString())+1;t.setCellValue(e.rowIndex,"quantity",n),e.onLineTotal(c,e.rowIndex)}else e.msg.toastMessage("Seleccionar","Debe seleccionar una l\xednea.",4)}onDelete(){const e=this;e.rowIndex>=0&&(e.myDataTable.deleteRow(e.rowIndex),e.msg.toastMessage("Quitar cantidad","Se ha quitado una linea de venta."),e.onSum())}onMinus(){const e=this;let t=e.myDataTable,c=t.getSelection()[0];if(e.rowIndex<0&&!c)return void e.msg.toastMessage("Seleccionar","Debe seleccionar una l\xednea.",4);const n=parseFloat(c.quantity.toString())-1;n<=0?e.msg.toastMessage("Quitar cantidad","No se puede dejar la cantidad en cero.",3):(t.setCellValue(e.rowIndex,"quantity",n),e.onLineTotal(c,e.rowIndex))}onCancel(){this.myDataTable.clear(),this.onSum()}onCash(e){this.modal=this.modalService.open(e,{ariaLabelledBy:"modal-basic-title"}),this.modal.result.then(e=>{},e=>{console.log(e)})}onLineTotal(e,t){let c=this.myDataTable;const n=parseFloat(e.tax_sale_rate.toString()),i=parseFloat(e.discount.toString()),a=parseFloat(e.sale_price.toString())*parseFloat(e.quantity.toString())-i,o=a-a/n;c.setCellValue(t,"total",a),c.setCellValue(t,"tax_amount",o),this.onSum()}onSum(){let e=0,t=0,c=0,n=0,i=this.customForm;const a=this.myDataTable.getRows();a.length>0&&a.map((i,a)=>{n+=i.discount,e+=i.quantity*i.sale_price,t+=i.total,c+=i.tax_amount}),i.get("discount").setValue(n),i.get("subtotal").setValue(e-c),i.get("vat").setValue(c),i.get("total").setValue(t),i.get("cash").setValue(t),i.get("payment_change").setValue(0)}onSave(e){const t=this;let c=t.customForm;const n=t.myDataTable.getRows();if(0==n.length)return void t.msg.toastMessage("","No hay items para generar el documento.",4);let i=!0;if(n.map(e=>{if(0==e.quantity)return t.msg.toastMessage("","Hay un error en una de las lineas del documento.",4),i=!1,!1}),!i)return;if(c.invalid)return void t.msg.toastMessage("","El formulario contiene campos sin llenar.",4);const a=n;let o=c.getRawValue();o.lines=a;let r={records:JSON.stringify(o)};t.showSpinner("Guardando el documento."),t.modal.close(),t.api.post("/sales/create",r).subscribe(t=>{const c=this;if(c.hideSpinner(),t.success){c.msg.toastMessage("",t.message),c.myDataTable.clear(),c.onSum();let n=`${c.api.getAppUrl()}${t.report.pathFile}`;c.pathfile=n,c.onViewDocs(e)}else c.msg.toastMessage("",t.message,4)},e=>{t.msg.toastMessage("",e.error.message,4),t.hideSpinner()})}onDate(e){this.AddDays()}onChaneCash(e){let t=this.customForm,c=parseFloat(t.get("cash").value),n=parseFloat(t.get("total").value);t.get("payment_change").setValue(c-n)}onExpirationDate(e){console.log(e)}onPaymenMethods(e){const t=this;t.isCounted=1===e,t.isCounted&&(t.customForm.get("time_limit_id").setValue(t.timeLimits[0].id),t.AddDays())}onTimeLimits(e){this.AddDays()}AddDays(){let e=this.customForm,t=e.get("invoice_date").value,c=new Date(t),n=this.timeLimits.find(t=>t.id===e.get("time_limit_id").value);if(n){let t=n.months*n.term_value;c.setDate(c.getDate()+t);let i=c.toISOString().split("T")[0];e.get("expiration_date").setValue(i)}}onSearch(){const e=this,t=e.modalForm.getRawValue();e.showSpinner(),e.customGrid.clear(),e.reporstSer.getSales({initDate:t.date_from,finalDate:t.date_up,typeId:t.invoice_type_id}).subscribe(t=>{e.hideSpinner(),this.source2.localdata=t,this.customGrid.updatebounddata("cells")},t=>{e.hideSpinner(),console.log(t)})}getWidth(){return"100%"}cellClick(e,t){const c=this,n=e.args,i=this.customGrid.getrowdata(n.rowindex);if("#pdf_#"===n.datafield)if(i.path_report&&1==i.status||i.path_report&&!i.electronic){let e=`${c.api.getAppUrl()}${i.path_report}`;c.pathfile=e,c.onViewDocs(t)}else c.showSpinner("Generando archivo..."),c.reporstSer.onInvoice(i).subscribe(e=>{let n=`${c.api.getAppUrl()}${e.pathFile}`;c.pathfile=n,c.hideSpinner(),c.onSearch(),c.onViewDocs(t)},()=>c.hideSpinner());else"#send_#"===n.datafield?c.sendDocument(i):"#mail_#"===n.datafield?(c.showSpinner("Enviando correo al cliente..."),c.reporstSer.onSendMail(i).subscribe(()=>c.hideSpinner(),()=>c.hideSpinner())):"#cancel_#"===n.datafield&&c.onCancelInvoice(i)}onViewDocs(e){this.cashele&&this.cashele.nativeElement.focus(),this.modal=this.modalService.open(e,{windowClass:"fullscreen-modal",backdrop:!1})}sendDocument(e){const t=this;return e.electronic?1===e.status?(t.msg.toastMessage("","El documento ya fue enviado y validado por la DIAN."),null):(t.showSpinner("Enviando documento a la DIAN..."),void t.api.post(`/sendInvoice/${e.id}`).subscribe(e=>{e.success?t.msg.toastMessage("",e.message):t.msg.toastMessage("",e.message,4),t.onSearch(),t.hideSpinner()},()=>t.hideSpinner())):(t.msg.toastMessage("","El documento documento no requiere validaci\xf3n por la DIAN."),null)}onReport(e){const t=this,c=t.modalForm.getRawValue();t.showSpinner("Generando informe de ventas"),t.reporstSer.getSalesReport({initDate:c.date_from,finalDate:c.date_up,typeId:c.invoice_type_id,typeReport:1}).subscribe(c=>{t.hideSpinner();let n=`${t.api.getAppUrl()}${c.pathFile}`;t.pathfile=n,t.onViewDocs(e)},e=>{t.hideSpinner(),console.log(e)})}onCancelInvoice(e){const t=this,c=t.translate;if(4==e.invoice_type_id||5==e.invoice_type_id)return t.msg.toastMessage("","No se puede anular una nota contable.",2),!1;1==e.active?de.a.fire({title:"Anular factura",text:"\xbfSeguro que desea anular el documento?",icon:"question",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:c.instant("buttons.yes"),cancelButtonText:c.instant("buttons.not")}).then(c=>{c.value&&(t.showSpinner("Procesando petici\xf3n."),t.api.post(`/sales/cancel/${e.id}`).subscribe(e=>{t.hideSpinner(),t.onSearch(),t.msg.toastMessage("","El documento se ha anulado.")},e=>{t.msg.errorMessage("",e.error.message)}))}):de.a.fire({title:"Activar factura anulada.",text:"\xbfSeguro que desea activar el documento anulado?",icon:"question",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:c.instant("buttons.yes"),cancelButtonText:c.instant("buttons.not")}).then(c=>{c.value&&(t.showSpinner("Procesando petici\xf3n."),t.api.post(`/sales/activate/${e.id}`).subscribe(e=>{t.hideSpinner(),t.onSearch(),t.msg.toastMessage("","El documento se ha activado.")},e=>{t.msg.errorMessage("",e.error.message)}))})}onCreateProduct(){localStorage.setItem("oldRoute",this.router.url),this.goRoute("products/items/create")}}return e.\u0275fac=function(t){return new(t||e)(m.Wb(i.e),m.Wb(N.b),m.Wb(N.a),m.Wb(q.c),m.Wb(P.d),m.Wb(q.a),m.Wb(z.d),m.Wb(z.b),m.Wb(z.a),m.Wb(be.a),m.Wb(R.e),m.Wb(F.c),m.Wb(me.a),m.Wb($.a),m.Wb(d.r))},e.\u0275cmp=m.Qb({type:e,selectors:[["app-check-in"]],viewQuery:function(e,t){if(1&e&&(m.Zc(pe,1),m.Zc(ge,1),m.Zc(he,1),m.Zc(fe,1),m.Zc(ve,1),m.Zc(ye,1),m.Zc(_e,1),m.Zc(we,1)),2&e){let e;m.Hc(e=m.nc())&&(t.customGrid=e.first),m.Hc(e=m.nc())&&(t.myDataTable=e.first),m.Hc(e=m.nc())&&(t.searchField=e.first),m.Hc(e=m.nc())&&(t.cashele=e.first),m.Hc(e=m.nc())&&(t.searchbar=e.first),m.Hc(e=m.nc())&&(t.searchbar2=e.first),m.Hc(e=m.nc())&&(t.searchbar3=e.first),m.Hc(e=m.nc())&&(t.myTabs=e.first)}},features:[m.Fb],decls:160,vars:63,consts:[[3,"formGroup"],[1,"search-custom",3,"width","height","position","animationType","selectionTracker","theme"],["myTabs",""],[2,"margin-left","30px"],[1,"container-fluid","padding-top-bottom"],[1,"row"],[1,"col-md-4"],[1,"form-group"],[1,"asterisk"],["formControlName","invoice_type_id","required",""],[3,"value",4,"ngFor","ngForOf"],[1,"col-md-8"],["formControlName","customer_id","required","",3,"virtualScroll","change"],["value","0"],[1,"col-md-6"],["formControlName","currency_id","required",""],["fullWidth","","formControlName","point_of_sale_id","required",""],[1,"col"],[1,"page-search-input","form-group"],[1,"input-group"],["type","search","id","searchbar","placeholder","Nombre o referencia",1,"form-control","rounded-right","form-control-lg","shadow","pl-2","space-right",3,"keyup.enter"],["searchbar",""],["type","search","placeholder","SKU",1,"form-control","rounded-right","form-control-lg","shadow","pl-2","search-sku",3,"keyup.enter"],["searchbar2",""],["type","search","placeholder","C\xf3digo de barras",1,"form-control","rounded-right","form-control-lg","shadow","pl-2","search-barcode",3,"keyup.enter"],["searchbar3",""],[1,"input-group-append"],["type","button","ngbTooltip","Crear nuevo producto",1,"btn","btn-success","space-right","radius-button",3,"click"],[1,"fas","fa-plus","fas-fa-22"],["type","button","ngbTooltip","Limpiar",1,"btn","btn-danger","radius-button",3,"click"],[1,"fas","fa-broom","fas-fa-22"],[1,"col-md-5"],[1,"col","card-col"],[1,"card-columns"],["class","card card-sales",3,"click",4,"ngFor","ngForOf"],[1,"col-md-7","card-col"],[1,"col-sm-12","col-md-12","padding-top-bottom"],["type","button",1,"btn","radius-button","btn-primary","space-right","radius-button",3,"disabled","click"],[1,"fas","fa-trash-alt","fas-fa-22"],["type","button",1,"btn","radius-button","btn-success","space-right","radius-button",3,"disabled","click"],["type","button",1,"btn","radius-button","btn-danger","space-right",3,"disabled","click"],[1,"fas","fa-minus","fas-fa-22"],["type","button",1,"btn","radius-button","btn-info","space-right","radius-button",3,"disabled","click"],[1,"fas","fa-money-bill","fas-fa-22","space-right"],["type","button",1,"btn","radius-button","btn-danger","radius-button",3,"disabled","click"],[1,"fas","fa-broom","fas-fa-22","space-right"],["currencyMask","","formControlName","total","aria-describedby","helpId","readonly","",1,"form-control","radius-button","small","total-bg"],[3,"source","columns","theme","columnsResize","editSettings","altRows","editable","height","width","onRowSelect","onRowUnselect","onCellEndEdit"],["myDataTable",""],["currencyMask","","formControlName","subtotal","aria-describedby","helpId","readonly","",1,"form-control","radius-button","small","total"],["currencyMask","","formControlName","discount","aria-describedby","helpId","readonly","",1,"form-control","radius-button","small","discounts"],["currencyMask","","formControlName","vat","aria-describedby","helpId","readonly","",1,"form-control","radius-button","small","vat"],["currencyMask","","formControlName","total","aria-describedby","helpId","readonly","",1,"form-control","radius-button","small","total"],[1,"col-md-2"],["for",""],["type","date","formControlName","date_from","aria-describedby","helpId",1,"form-control"],["type","date","formControlName","date_up","aria-describedby","helpId",1,"form-control"],[1,"col-md-3","padding-top-bottom"],["role","group",1,"btn-group","btn-group-md"],["type","button",1,"btn","btn-info","mb-2","mb-md-0",3,"click"],[1,"fas","fa-search","fas-fa-22","space-right"],["type","button",1,"btn","btn-success","mb-2","mb-md-0",3,"click"],[1,"fas","fa-newspaper","fas-fa-22","space-right"],[3,"width","height","source","columns","theme","selectionmode","columnsresize","sortable","filterable","onCellselect"],["customGrid",""],["content",""],["class","fullscreen-modal"],["contentpdf",""],[2,"color","white"],[3,"value"],["height","15","width","15",3,"src"],[1,"card","card-sales",3,"click"],[1,"card-body"],[1,"stock"],[1,"span"],[1,"img-top"],["fallimg","product",1,"img-product","card-img-top",3,"src"],[1,"price"],[1,"product-name"],["class","unit-name",4,"ngIf"],[1,"unit-name"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"form-group","row","align-items-center"],[1,"col-lg-5","col-6"],[1,"col-lg-7","col-6"],["formControlName","payment_method_id","ngbAutofocus","","autofocus","",3,"change"],["formControlName","means_payment_id"],["type","date","formControlName","invoice_date",1,"form-control",3,"change"],["invoicedate",""],[1,"col-lg-5","col-3"],[1,"col-lg-7","col-9"],["formControlName","time_limit_id",3,"readonly","change"],["type","date","formControlName","expiration_date","readonly","",1,"form-control",3,"change"],["expirationdate",""],[1,"col-lg-2","col-3"],[1,"col-lg-10","col-9"],["currencyMask","","formControlName","total","aria-describedby","helpId","readonly","",1,"form-control","total-bg"],["currencyMask","","type","text","formControlName","cash","aria-describedby","helpId","ngbAutofocus","","autofocus","",1,"form-control","total-bg",3,"keyup"],["cashele",""],["currencyMask","","formControlName","payment_change","aria-describedby","helpId","readonly","",1,"form-control","total-bg"],[1,"modal-footer"],["type","button",1,"btn","radius-button","btn-sm","btn-primary","space-right",3,"disabled","click"],[1,"fas","fa-save","fas-fa-22","space-right"],[1,"btn","radius-button","btn-danger","btn-sm",3,"click"],[1,"fas","fa-undo","fas-fa-22","space-right"],["viewer","url",2,"width","100%","height","100vh",3,"url"]],template:function(e,t){if(1&e){const e=m.dc();m.cc(0,"form",0),m.cc(1,"jqxTabs",1,2),m.cc(3,"ul"),m.cc(4,"li",3),m.Uc(5,"FACTURACI\xd3N"),m.bc(),m.cc(6,"li"),m.Uc(7,"DOCUMENTOS GENERADOS"),m.bc(),m.bc(),m.cc(8,"div",4),m.cc(9,"div",5),m.cc(10,"div",6),m.cc(11,"div",7),m.cc(12,"label"),m.cc(13,"span",8),m.Uc(14),m.pc(15,"translate"),m.bc(),m.Uc(16,"Tipo de documento"),m.bc(),m.cc(17,"ng-select",9),m.Sc(18,Ce,2,3,"ng-option",10),m.bc(),m.bc(),m.bc(),m.cc(19,"div",11),m.cc(20,"div",7),m.cc(21,"label"),m.cc(22,"span",8),m.Uc(23),m.pc(24,"translate"),m.bc(),m.Uc(25,"Cliente"),m.bc(),m.cc(26,"ng-select",12),m.mc("change",function(e){return t.onChanegCustomer(e)}),m.cc(27,"ng-option",13),m.Uc(28,"Cliente final"),m.bc(),m.Sc(29,Ie,2,4,"ng-option",10),m.bc(),m.bc(),m.bc(),m.bc(),m.cc(30,"div",5),m.cc(31,"div",14),m.cc(32,"div",7),m.cc(33,"label"),m.cc(34,"span",8),m.Uc(35),m.pc(36,"translate"),m.bc(),m.Uc(37),m.pc(38,"translate"),m.bc(),m.cc(39,"ng-select",15),m.Sc(40,xe,3,3,"ng-option",10),m.bc(),m.bc(),m.bc(),m.cc(41,"div",14),m.cc(42,"div",7),m.cc(43,"label"),m.cc(44,"span",8),m.Uc(45),m.pc(46,"translate"),m.bc(),m.Uc(47,"Punto de venta"),m.bc(),m.cc(48,"ng-select",16),m.cc(49,"ng-option",13),m.Uc(50,"Seleccionar punto de venta"),m.bc(),m.Sc(51,Se,2,2,"ng-option",10),m.bc(),m.bc(),m.bc(),m.bc(),m.cc(52,"div",5),m.cc(53,"div",17),m.cc(54,"div",18),m.cc(55,"fieldset"),m.cc(56,"div",19),m.cc(57,"input",20,21),m.mc("keyup.enter",function(){m.Lc(e);const c=m.Ic(58);return t.onSearchProducts(c.value,1)}),m.bc(),m.cc(59,"input",22,23),m.mc("keyup.enter",function(){m.Lc(e);const c=m.Ic(60);return t.onSearchProducts(c.value,2)}),m.bc(),m.cc(61,"input",24,25),m.mc("keyup.enter",function(){m.Lc(e);const c=m.Ic(62);return t.onSearchProducts(c.value,3)}),m.bc(),m.cc(63,"div",26),m.cc(64,"button",27),m.mc("click",function(){return t.onCreateProduct()}),m.Xb(65,"i",28),m.bc(),m.cc(66,"button",29),m.mc("click",function(){return t.onClearFilter()}),m.Xb(67,"i",30),m.bc(),m.bc(),m.bc(),m.bc(),m.bc(),m.bc(),m.bc(),m.cc(68,"div",5),m.cc(69,"div",31),m.cc(70,"div",5),m.cc(71,"div",32),m.cc(72,"div",33),m.Sc(73,Ue,15,8,"div",34),m.bc(),m.bc(),m.bc(),m.bc(),m.cc(74,"div",35),m.cc(75,"div",5),m.cc(76,"div",36),m.cc(77,"button",37),m.mc("click",function(){return t.onDelete()}),m.Xb(78,"i",38),m.bc(),m.cc(79,"button",39),m.mc("click",function(){return t.onAdd()}),m.Xb(80,"i",28),m.bc(),m.cc(81,"button",40),m.mc("click",function(){return t.onMinus()}),m.Xb(82,"i",41),m.bc(),m.cc(83,"button",42),m.mc("click",function(){m.Lc(e);const c=m.Ic(154);return t.onCash(c)}),m.Xb(84,"i",43),m.Uc(85,"Cobrar"),m.bc(),m.cc(86,"button",44),m.mc("click",function(){return t.onCancel()}),m.Xb(87,"i",45),m.Uc(88,"Cancelar"),m.bc(),m.bc(),m.cc(89,"div",36),m.Xb(90,"input",46),m.bc(),m.bc(),m.cc(91,"div",5),m.cc(92,"div",17),m.cc(93,"jqxDataTable",47,48),m.mc("onRowSelect",function(e){return t.onRowSelect(e)})("onRowUnselect",function(e){return t.onRowUnselect(e)})("onCellEndEdit",function(e){return t.onCellEndEdit(e)}),m.bc(),m.bc(),m.bc(),m.cc(95,"div",5),m.cc(96,"div",14),m.cc(97,"div",7),m.cc(98,"label"),m.Uc(99," Subtotal"),m.bc(),m.Xb(100,"input",49),m.bc(),m.bc(),m.cc(101,"div",14),m.cc(102,"div",7),m.cc(103,"label"),m.Uc(104," Descuento"),m.bc(),m.Xb(105,"input",50),m.bc(),m.bc(),m.bc(),m.cc(106,"div",5),m.cc(107,"div",14),m.cc(108,"div",7),m.cc(109,"label"),m.Uc(110," IVA"),m.bc(),m.Xb(111,"input",51),m.bc(),m.bc(),m.cc(112,"div",14),m.cc(113,"div",7),m.cc(114,"label"),m.Uc(115," Total"),m.bc(),m.Xb(116,"input",52),m.bc(),m.bc(),m.bc(),m.bc(),m.bc(),m.bc(),m.cc(117,"div",4),m.cc(118,"form",0),m.cc(119,"div",5),m.cc(120,"div",53),m.cc(121,"div",7),m.cc(122,"label",54),m.Uc(123,"Fecha desde"),m.bc(),m.Xb(124,"input",55),m.bc(),m.bc(),m.cc(125,"div",53),m.cc(126,"div",7),m.cc(127,"label",54),m.Uc(128,"Fecha hasta"),m.bc(),m.Xb(129,"input",56),m.bc(),m.bc(),m.cc(130,"div",31),m.cc(131,"div",7),m.cc(132,"label"),m.cc(133,"span",8),m.Uc(134),m.pc(135,"translate"),m.bc(),m.Uc(136,"Tipo de documento"),m.bc(),m.cc(137,"ng-select",9),m.Sc(138,Oe,2,3,"ng-option",10),m.bc(),m.bc(),m.bc(),m.cc(139,"div",57),m.cc(140,"div",58),m.cc(141,"button",59),m.mc("click",function(){return t.onSearch()}),m.Xb(142,"i",60),m.Uc(143),m.pc(144,"translate"),m.bc(),m.cc(145,"button",61),m.mc("click",function(){m.Lc(e);const c=m.Ic(156);return t.onReport(c)}),m.Xb(146,"i",62),m.Uc(147),m.pc(148,"translate"),m.bc(),m.bc(),m.bc(),m.bc(),m.cc(149,"div",5),m.cc(150,"div",17),m.cc(151,"jqxGrid",63,64),m.mc("onCellselect",function(c){m.Lc(e);const n=m.Ic(156);return t.cellClick(c,n)}),m.bc(),m.bc(),m.bc(),m.bc(),m.bc(),m.bc(),m.Sc(153,qe,71,11,"ng-template",null,65,m.Tc),m.Sc(155,Ve,8,1,"ng-template",66,67,m.Tc),m.bc(),m.cc(157,"ngx-spinner"),m.cc(158,"p",68),m.Uc(159),m.bc(),m.bc()}2&e&&(m.vc("formGroup",t.customForm),m.Ib(1),m.vc("width","100%")("height","100%")("position","top")("animationType","fade")("selectionTracker",!1)("theme",t.theme),m.Ib(13),m.Vc(m.qc(15,47,"general.asterisk")),m.Ib(4),m.vc("ngForOf",t.aDocuments),m.Ib(5),m.Vc(m.qc(24,49,"general.asterisk")),m.Ib(3),m.vc("virtualScroll",!0),m.Ib(3),m.vc("ngForOf",t.customers),m.Ib(6),m.Vc(m.qc(36,51,"general.asterisk")),m.Ib(2),m.Vc(m.qc(38,53,"general.currency")),m.Ib(3),m.vc("ngForOf",t.currency),m.Ib(5),m.Wc(" ",m.qc(46,55,"general.asterisk"),""),m.Ib(6),m.vc("ngForOf",t.points_of_sale),m.Ib(22),m.vc("ngForOf",t.itemsResult),m.Ib(4),m.vc("disabled",!t.selectedRow),m.Ib(2),m.vc("disabled",!t.selectedRow),m.Ib(2),m.vc("disabled",!t.selectedRow),m.Ib(2),m.vc("disabled",!t.selectedRow),m.Ib(3),m.vc("disabled",!t.selectedRow),m.Ib(7),m.vc("source",t.dataAdapter)("columns",t.columns)("theme",t.theme)("columnsResize",!0)("editSettings",t.editSettings)("altRows",!0)("editable",!0)("height",300)("width",t.getWidth()),m.Ib(25),m.vc("formGroup",t.modalForm),m.Ib(16),m.Vc(m.qc(135,57,"general.asterisk")),m.Ib(4),m.vc("ngForOf",t.aDocuments),m.Ib(5),m.Wc(" ",m.qc(144,59,"buttons.search")," "),m.Ib(4),m.Wc(" ",m.qc(148,61,"buttons.report")," "),m.Ib(4),m.vc("width",t.getWidth())("height",550)("source",t.dataAdapter2)("columns",t.columns2)("theme",t.theme)("selectionmode","singlecell")("columnsresize",!0)("sortable",!0)("filterable",!0),m.Ib(8),m.Wc(" ",t.maskSpinner," "))},directives:[i.z,i.q,i.h,s.a,l.a,i.p,i.g,i.w,n.m,l.d,d.N,i.c,u.a,r.a,a.a,F.a,n.n,U],pipes:[P.c,n.d],styles:[".search-sku[_ngcontent-%COMP%]{margin-right:5px;max-width:200px}.search-barcode[_ngcontent-%COMP%]{margin-right:5px;max-width:250px}@media (max-width:768px){.search-barcode[_ngcontent-%COMP%], .search-sku[_ngcontent-%COMP%]{margin-right:0;max-width:0;visibility:hidden}}.create-customer[_ngcontent-%COMP%]{background-color:#a50721!important;color:#fff!important;font-weight:700!important}.search-custom[_ngcontent-%COMP%]{background:#fff!important;border-radius:10px;box-shadow:0 2px 8px 0 rgba(50,50,50,.322);padding-bottom:5px!important}.card-col[_ngcontent-%COMP%]{min-height:200px;overflow:auto}.card-col-product[_ngcontent-%COMP%]{max-height:200px;min-height:100px;overflow:auto}.discounts[_ngcontent-%COMP%]{color:green;font-weight:700}.total[_ngcontent-%COMP%], .total-bg[_ngcontent-%COMP%]{color:red;font-weight:700}.total-bg[_ngcontent-%COMP%]{font-size:18px}.vat[_ngcontent-%COMP%]{color:#00f;font-weight:700}.padding-card[_ngcontent-%COMP%]{padding:5px}.padding-2[_ngcontent-%COMP%]{padding:2px}.card-sales[_ngcontent-%COMP%]{border:2px solid hsla(0,0%,100%,.247);box-shadow:0 2px 6px 0 rgba(50,50,50,.322);margin:5px!important;min-height:120px!important}.card-sales[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]{color:red;font-size:14px;font-weight:700;margin-bottom:auto;margin-top:auto;padding-bottom:4px;padding-top:4px;text-align:right}.card-sales[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{padding:4px}.card-sales[_ngcontent-%COMP%]   .stock[_ngcontent-%COMP%]{background-color:rgba(23,58,253,.796078431372549);border-radius:10px 0 10px 0;height:24px;margin-left:auto;max-width:120px;padding:4px;position:absolute;text-align:right;width:67%;z-index:2}.card-sales[_ngcontent-%COMP%]   .stock[_ngcontent-%COMP%]   .span[_ngcontent-%COMP%]{color:#fff;font-size:14px;font-weight:700}.card-sales[_ngcontent-%COMP%]   .product-name[_ngcontent-%COMP%], .card-sales[_ngcontent-%COMP%]   .unit-name[_ngcontent-%COMP%]{font-size:12px;font-weight:700;margin-bottom:0!important;text-align:center;text-transform:uppercase}.card-sales[_ngcontent-%COMP%]   .unit-name[_ngcontent-%COMP%]{background-color:#470147;border-radius:4px;color:#fff;padding:2px}.card-sales[_ngcontent-%COMP%]   .img-product[_ngcontent-%COMP%]{display:block;margin:auto;max-width:62px}.card-sales[_ngcontent-%COMP%]   .img-product[_ngcontent-%COMP%]:hover{border-radius:10px;box-shadow:0 2px 8px 0 rgba(50,50,50,.75)}.card-sales[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding-bottom:1px!important;padding-left:4px;padding-right:4px;padding-top:1px!important}.card-sales[_ngcontent-%COMP%]:hover{border:2px solid rgba(23,58,253,.12156862745098039);cursor:pointer}.card-sales[_ngcontent-%COMP%]::-moz-selection{border:2px solid #8a2be2}.card-sales[_ngcontent-%COMP%]::selection{border:2px solid #8a2be2}[_nghost-%COMP%]     .switchery-primary .switch{background:#fff}[_nghost-%COMP%]     .switchery-primary .switch.checked{background:#975aff}[_nghost-%COMP%]     .switchery-info .switch{background:#fff}[_nghost-%COMP%]     .switchery-info .switch.checked{background:#2f8be6}[_nghost-%COMP%]     .switchery-success .switch{background:#fff}[_nghost-%COMP%]     .switchery-success .switch.checked{background:#40c057}[_nghost-%COMP%]     .switchery-warning .switch{background:#fff}[_nghost-%COMP%]     .switchery-warning .switch.checked{background:#f77e17}[_nghost-%COMP%]     .switchery-danger .switch{background:#fff}[_nghost-%COMP%]     .switchery-danger .switch.checked{background:#f55252}[_nghost-%COMP%]     .switchery-secondary .switch{background:#fff}[_nghost-%COMP%]     .switchery-secondary .switch.checked{background:#616d89}"]}),e})()},{path:"customers",component:T},{path:"customers/create",component:se},{path:"customers/edit/:id",component:se}]}];let Ne=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=m.Ub({type:e}),e.\u0275inj=m.Tb({imports:[[q.f.forChild(De)],q.f]}),e})();const Xe={align:"right",allowNegative:!0,allowZero:!0,decimal:".",precision:2,prefix:"$ ",suffix:"",thousands:",",nullable:!0};let Ae=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=m.Ub({type:e}),e.\u0275inj=m.Tb({imports:[[n.c,Ne,d.t,M.a,F.b,d.C,O,u.b.forRoot(Xe),o.b,s.b,r.b,l.c,a.b,i.v,P.b]]}),e})()}}]);