!function(){function e(e,t){for(var c=0;c<t.length;c++){var a=t[c];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function t(t,c,a){return c&&e(t.prototype,c),a&&e(t,a),t}function c(e,t,a){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,c){var a=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=r(e)););return e}(e,t);if(a){var n=Object.getOwnPropertyDescriptor(a,t);return n.get?n.get.call(c):n.value}})(e,t,a||e)}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&n(e,t)}function n(e,t){return(n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var c,a=r(e);if(t){var n=r(this).constructor;c=Reflect.construct(a,arguments,n)}else c=a.apply(this,arguments);return o(this,c)}}function o(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function r(e){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{aAFz:function(e,n,o){"use strict";o.r(n),o.d(n,"customCurrencyMaskConfig",function(){return vt}),o.d(n,"ShoppingModule",function(){return ht});var s,d=o("ofXK"),u=o("3Pt+"),b=o("aSZe"),p=o("7M0M"),m=o("Z1v9"),f=o("3HhI"),g=o("ZOsW"),v=o("1kSV"),h=o("TT0I"),_=o("pKmL"),y=o("JqCM"),x=o("sYmb"),C=o("tyNb"),S=o("fXoL"),I=((s=function e(){l(this,e)}).\u0275fac=function(e){return new(e||s)},s.\u0275cmp=S.Qb({type:s,selectors:[["app-shopping"]],decls:1,vars:0,template:function(e,t){1&e&&S.Xb(0,"router-outlet")},directives:[C.g],encapsulation:2}),s),k=o("py8Q"),w=o("YMfE"),O=["customGrid"],U=["searchField"];function F(e,t){if(1&e){var c=S.dc();S.cc(0,"div"),S.cc(1,"button",21),S.mc("click",function(){return S.Lc(c),S.oc().importData()}),S.Xb(2,"i",33),S.Uc(3),S.pc(4,"translate"),S.bc(),S.bc()}if(2&e){var a=S.oc();S.Ib(1),S.vc("disabled",a.loading),S.Ib(2),S.Wc(" ",S.qc(4,2,"buttons.import")," ")}}var P,M=((P=function(e){a(o,e);var n=i(o);function o(e,t,c,a,i){var r;return l(this,o),(r=n.call(this,e,t,c,a,i)).msg=e,r.api=t,r.router=c,r.translate=a,r.aRouter=i,r.title="Proveedores",r}return t(o,[{key:"ngOnInit",value:function(){this.changeLanguage(this.activeLang)}},{key:"ngAfterViewInit",value:function(){var e=this;e.crudApi={create:"/persons/create/provider",read:"/persons/providers",update:"/persons/update/",delete:"/persons/delete/"},e.showActions=!0,e.showRowNumber=!0,e.pagesize=10,e.datafields=[{name:"id",type:"number"},{name:"company_name",type:"string"},{name:"dni",type:"string"},{name:"description",type:"string"},{name:"full_name",type:"string"}],e.sourceColumns=[{text:"Mostrar nombre como",datafield:"full_name",align:"center"},{text:"DNI",datafield:"dni",align:"center",minWidth:100,cellsalign:"right"},{text:"Empresa",datafield:"company_name",align:"center"}],this.prepareGrid()}},{key:"createData",value:function(){c(r(o.prototype),"createData",this).call(this),this.goRoute("shopping/providers/create")}},{key:"editData",value:function(e){c(r(o.prototype),"editData",this).call(this,e),this.goRoute("shopping/providers/edit/".concat(e.id))}}]),o}(k.a)).\u0275fac=function(e){return new(e||P)(S.Wb(w.b),S.Wb(w.a),S.Wb(C.c),S.Wb(x.d),S.Wb(C.a))},P.\u0275cmp=S.Qb({type:P,selectors:[["app-providers"]],viewQuery:function(e,t){var c;1&e&&(S.Zc(O,1),S.Zc(U,1)),2&e&&(S.Hc(c=S.nc())&&(t.customGrid=c.first),S.Hc(c=S.nc())&&(t.searchField=c.first))},features:[S.Fb],decls:77,vars:38,consts:[[1,"card"],[1,"card-header"],[1,"card-title"],[1,"menuExport"],[1,"space-right"],[1,"btn","btn-danger","round","mr-1","mb-1",3,"disabled","click"],[1,"fa","fa-sync","mr-1","fas-fa-22"],[1,"myMenu","space-right"],[1,"clearColor",3,"height","onItemclick"],["myMenu",""],["id","Exports"],[1,"fas","fa-cog","fas-fa-22","fas-fa-red"],["href","javascript:void(0)"],[2,"width","200px"],[1,"fas","fa-file-excel","fas-fa-xls"],[1,"fas","fa-file-csv","fas-fa-xls"],["type","separator"],[1,"fas","fa-file-pdf","fas-fa-pdf"],[1,"fas","fa-file-code","fas-fa-code"],[1,"fas","fa-print","fas-fa-print"],[1,"margin-left","space-right"],[1,"btn","btn-success","round","mr-1","mb-1",3,"disabled","click"],[1,"fa","fa-plus","mr-1","fas-fa-22"],[4,"ngIf"],[1,"container-fluid"],[1,"input-group"],["type","text","autofocus","",1,"form-control",3,"placeholder","keyup"],["searchField",""],[1,"input-group-append"],[1,"btn","btn-primary",3,"disabled","click"],[1,"fa","fa-search"],["width","100%",3,"disabled","auto-create","onCellselect","onBindingcomplete"],["customGrid",""],[1,"fa","fa-upload","mr-1","fas-fa-22"]],template:function(e,t){1&e&&(S.cc(0,"div",0),S.cc(1,"div",1),S.cc(2,"h4",2),S.Uc(3),S.pc(4,"uppercase"),S.bc(),S.bc(),S.cc(5,"div",0),S.cc(6,"div",3),S.cc(7,"div",4),S.cc(8,"button",5),S.mc("click",function(){return t.searchQuery()}),S.Xb(9,"i",6),S.bc(),S.bc(),S.cc(10,"div",7),S.cc(11,"jqxMenu",8,9),S.mc("onItemclick",function(e){return t.itemclick(e)}),S.cc(13,"ul"),S.cc(14,"li",10),S.Xb(15,"i",11),S.Xb(16,"a",12),S.cc(17,"ul",13),S.cc(18,"li"),S.cc(19,"a",12),S.Xb(20,"i",14),S.Uc(21),S.pc(22,"translate"),S.bc(),S.bc(),S.cc(23,"li"),S.cc(24,"a",12),S.Xb(25,"i",15),S.Uc(26),S.pc(27,"translate"),S.bc(),S.bc(),S.cc(28,"li"),S.cc(29,"a",12),S.Xb(30,"i",14),S.Uc(31),S.pc(32,"translate"),S.bc(),S.bc(),S.Xb(33,"li",16),S.cc(34,"li"),S.cc(35,"a",12),S.Xb(36,"i",17),S.Uc(37),S.pc(38,"translate"),S.bc(),S.bc(),S.Xb(39,"li",16),S.cc(40,"li"),S.cc(41,"a",12),S.Xb(42,"i",18),S.Uc(43),S.pc(44,"translate"),S.bc(),S.bc(),S.cc(45,"li"),S.cc(46,"a",12),S.Xb(47,"i",18),S.Uc(48),S.pc(49,"translate"),S.bc(),S.bc(),S.cc(50,"li"),S.cc(51,"a",12),S.Xb(52,"i",18),S.Uc(53),S.pc(54,"translate"),S.bc(),S.bc(),S.Xb(55,"li",16),S.cc(56,"li"),S.cc(57,"a",12),S.Xb(58,"i",19),S.Uc(59),S.pc(60,"translate"),S.bc(),S.bc(),S.bc(),S.bc(),S.bc(),S.bc(),S.bc(),S.cc(61,"div",20),S.cc(62,"button",21),S.mc("click",function(){return t.createData()}),S.Xb(63,"i",22),S.Uc(64),S.pc(65,"translate"),S.bc(),S.bc(),S.Sc(66,F,5,4,"div",23),S.bc(),S.cc(67,"div",24),S.cc(68,"fieldset"),S.cc(69,"div",25),S.cc(70,"input",26,27),S.mc("keyup",function(e){return t.inputKey(e)}),S.bc(),S.cc(72,"div",28),S.cc(73,"button",29),S.mc("click",function(){return t.searchQuery()}),S.Xb(74,"i",30),S.bc(),S.bc(),S.bc(),S.bc(),S.cc(75,"jqxGrid",31,32),S.mc("onCellselect",function(e){return t.cellClick(e)})("onBindingcomplete",function(e){return t.Bindingcomplete(e)}),S.bc(),S.bc(),S.bc(),S.bc()),2&e&&(S.Ib(3),S.Vc(S.qc(4,18,t.title)),S.Ib(5),S.vc("disabled",t.loading),S.Ib(3),S.vc("height",36),S.Ib(10),S.Vc(S.qc(22,20,"export.excel")),S.Ib(5),S.Vc(S.qc(27,22,"export.csv")),S.Ib(5),S.Vc(S.qc(32,24,"export.xml")),S.Ib(6),S.Vc(S.qc(38,26,"export.pdf")),S.Ib(6),S.Vc(S.qc(44,28,"export.html")),S.Ib(5),S.Vc(S.qc(49,30,"export.json")),S.Ib(5),S.Vc(S.qc(54,32,"export.tsv")),S.Ib(6),S.Vc(S.qc(60,34,"export.print")),S.Ib(3),S.vc("disabled",t.loading),S.Ib(2),S.Wc(" ",S.qc(65,36,"buttons.new")," "),S.Ib(2),S.vc("ngIf",t.useImport),S.Ib(4),S.vc("placeholder",t.placeholderSearch),S.Ib(3),S.vc("disabled",t.loading),S.Ib(2),S.vc("disabled",t.loading)("auto-create",!1))},directives:[p.a,d.n,b.a],pipes:[d.v,x.c],encapsulation:2}),P),W=o("TK7J"),N=o("UnFQ"),q=o("Absx"),X=o("mm0L"),D=o("PcHl"),V=o("dKyG"),T=o("uHPU"),A=["focusElement"],E=["uploadFile"],R=["imgUp"];function B(e,t){if(1&e&&(S.cc(0,"ng-option",31),S.Uc(1),S.bc()),2&e){var c=t.$implicit;S.vc("value",c.id),S.Ib(1),S.Wc("",c.description," ")}}function G(e,t){if(1&e&&(S.cc(0,"ng-option",31),S.Xb(1,"img",32),S.Uc(2),S.bc()),2&e){var c=t.$implicit;S.vc("value",c.id),S.Ib(1),S.vc("src","assets/flags/"+c.image,S.Oc),S.Ib(1),S.Wc(" ",c.CurrencyName," ")}}function L(e,t){if(1&e&&(S.cc(0,"ng-option",31),S.Xb(1,"img",32),S.Uc(2),S.bc()),2&e){var c=t.$implicit;S.vc("value",c.id),S.Ib(1),S.vc("src","assets/flags/"+c.image,S.Oc),S.Ib(1),S.Wc(" ",c.country_name," ")}}function H(e,t){if(1&e&&(S.cc(0,"div",12),S.cc(1,"div",13),S.cc(2,"div",14),S.cc(3,"label"),S.cc(4,"span",15),S.Uc(5),S.pc(6,"translate"),S.bc(),S.Uc(7),S.pc(8,"translate"),S.bc(),S.cc(9,"ng-select",16),S.Sc(10,B,2,2,"ng-option",17),S.bc(),S.bc(),S.bc(),S.cc(11,"div",13),S.cc(12,"div",14),S.cc(13,"label"),S.cc(14,"span",15),S.Uc(15),S.pc(16,"translate"),S.bc(),S.Uc(17,"Mostrar nombre como"),S.bc(),S.Xb(18,"input",18,19),S.bc(),S.bc(),S.bc(),S.cc(20,"div",12),S.cc(21,"div",13),S.cc(22,"div",14),S.cc(23,"label"),S.cc(24,"span",15),S.Uc(25),S.pc(26,"translate"),S.bc(),S.Uc(27),S.pc(28,"translate"),S.bc(),S.cc(29,"ng-select",20),S.Sc(30,G,3,3,"ng-option",17),S.bc(),S.bc(),S.bc(),S.cc(31,"div",13),S.cc(32,"div",14),S.cc(33,"label"),S.cc(34,"span",15),S.Uc(35),S.pc(36,"translate"),S.bc(),S.Uc(37),S.pc(38,"translate"),S.bc(),S.cc(39,"ng-select",21),S.Sc(40,L,3,3,"ng-option",17),S.bc(),S.bc(),S.bc(),S.bc(),S.cc(41,"div",12),S.cc(42,"div",22),S.cc(43,"div",14),S.cc(44,"label"),S.Uc(45,"Titulo"),S.bc(),S.Xb(46,"input",23),S.bc(),S.bc(),S.cc(47,"div",24),S.cc(48,"div",14),S.cc(49,"label"),S.Uc(50,"Nombres"),S.bc(),S.Xb(51,"input",25),S.bc(),S.bc(),S.cc(52,"div",24),S.cc(53,"div",14),S.cc(54,"label"),S.Uc(55,"Apellidos"),S.bc(),S.Xb(56,"input",26),S.bc(),S.bc(),S.bc(),S.cc(57,"div",12),S.cc(58,"div",13),S.cc(59,"div",14),S.cc(60,"label"),S.Uc(61,"DNI"),S.bc(),S.Xb(62,"input",27),S.bc(),S.bc(),S.cc(63,"div",13),S.cc(64,"div",14),S.cc(65,"label"),S.Uc(66,"Nombre de la empresa"),S.bc(),S.Xb(67,"input",28),S.bc(),S.bc(),S.bc(),S.cc(68,"div",12),S.cc(69,"div",13),S.cc(70,"div",14),S.cc(71,"label"),S.Uc(72,"Correo electr\xf3nico"),S.bc(),S.Xb(73,"input",29),S.bc(),S.bc(),S.cc(74,"div",13),S.cc(75,"div",14),S.cc(76,"label"),S.Uc(77,"Web"),S.bc(),S.Xb(78,"input",30),S.bc(),S.bc(),S.bc()),2&e){var c=S.oc();S.Ib(5),S.Vc(S.qc(6,25,"general.asterisk")),S.Ib(2),S.Vc(S.qc(8,27,"companies.type_organization")),S.Ib(2),S.Ob("is-invalid",c.invalidOrganization),S.vc("virtualScroll",!0),S.Ib(1),S.vc("ngForOf",c.typeOrg),S.Ib(5),S.Vc(S.qc(16,29,"general.asterisk")),S.Ib(3),S.Ob("is-invalid",c.invalidFullName)("status-danger",c.invalidFullName),S.Ib(7),S.Vc(S.qc(26,31,"general.asterisk")),S.Ib(2),S.Vc(S.qc(28,33,"companies.currency")),S.Ib(2),S.Ob("is-invalid",c.invalidCurrency),S.vc("virtualScroll",!0),S.Ib(1),S.vc("ngForOf",c.currency),S.Ib(5),S.Vc(S.qc(36,35,"general.asterisk")),S.Ib(2),S.Vc(S.qc(38,37,"companies.country")),S.Ib(2),S.Ob("is-invalid",c.invalidCountry)("status-danger",c.invalidCountry),S.vc("virtualScroll",!0),S.Ib(1),S.vc("ngForOf",c.countries)}}function z(e,t){1&e&&(S.cc(0,"div",12),S.cc(1,"div",13),S.cc(2,"div",14),S.cc(3,"label"),S.Uc(4,"Direcci\xf3n principal"),S.bc(),S.Xb(5,"textarea",33),S.bc(),S.bc(),S.cc(6,"div",13),S.cc(7,"div",14),S.cc(8,"label"),S.Uc(9,"Direcci\xf3n postal"),S.bc(),S.Xb(10,"textarea",34),S.bc(),S.bc(),S.bc(),S.cc(11,"div",12),S.cc(12,"div",13),S.cc(13,"div",14),S.cc(14,"label"),S.Uc(15,"Ciudad/Distrito"),S.bc(),S.Xb(16,"input",35),S.bc(),S.bc(),S.cc(17,"div",13),S.cc(18,"label"),S.Uc(19,"Estado/Provincia"),S.bc(),S.Xb(20,"input",36),S.bc(),S.bc(),S.cc(21,"div",12),S.cc(22,"div",13),S.cc(23,"div",14),S.cc(24,"label"),S.Uc(25,"C\xf3digo postal"),S.bc(),S.Xb(26,"input",37),S.bc(),S.bc(),S.cc(27,"div",13),S.cc(28,"label"),S.Uc(29,"Movil"),S.bc(),S.Xb(30,"input",38),S.bc(),S.bc(),S.cc(31,"div",12),S.cc(32,"div",13),S.cc(33,"div",14),S.cc(34,"label"),S.Uc(35,"Fijo"),S.bc(),S.Xb(36,"input",39),S.bc(),S.bc(),S.bc())}function Z(e,t){if(1&e&&(S.cc(0,"ng-option",31),S.Uc(1),S.bc()),2&e){var c=t.$implicit;S.vc("value",c.id),S.Ib(1),S.Xc(" ",c.name_taxe," - ",c.rate_name," ")}}function j(e,t){if(1&e&&(S.cc(0,"ng-option",31),S.Uc(1),S.bc()),2&e){var c=t.$implicit;S.vc("value",c.id),S.Ib(1),S.Xc(" ",c.account_number," - ",c.account_name," ")}}function $(e,t){if(1&e&&(S.cc(0,"ng-option",31),S.Uc(1),S.bc()),2&e){var c=t.$implicit;S.vc("value",c.id),S.Ib(1),S.Wc(" ",c.payment_method," ")}}function Q(e,t){if(1&e&&(S.cc(0,"ng-option",31),S.Uc(1),S.bc()),2&e){var c=t.$implicit;S.vc("value",c.id),S.Ib(1),S.Wc(" ",c.term_name," ")}}function K(e,t){if(1&e&&(S.cc(0,"div",12),S.cc(1,"div",13),S.cc(2,"div",14),S.cc(3,"label"),S.Uc(4),S.pc(5,"translate"),S.bc(),S.cc(6,"ng-select",40),S.cc(7,"ng-option",41),S.Uc(8,"Seleccionar"),S.bc(),S.Sc(9,Z,2,3,"ng-option",17),S.bc(),S.bc(),S.bc(),S.cc(10,"div",13),S.cc(11,"div",14),S.cc(12,"label"),S.Uc(13,"Cuenta contable"),S.bc(),S.cc(14,"ng-select",42),S.cc(15,"ng-option",41),S.Uc(16,"Seleccionar"),S.bc(),S.Sc(17,j,2,3,"ng-option",17),S.bc(),S.bc(),S.bc(),S.bc(),S.cc(18,"div",12),S.cc(19,"div",13),S.cc(20,"div",14),S.cc(21,"label"),S.Uc(22,"Metodo de pago preferido"),S.bc(),S.cc(23,"ng-select",43),S.cc(24,"ng-option",41),S.Uc(25,"Seleccionar"),S.bc(),S.Sc(26,$,2,2,"ng-option",17),S.bc(),S.bc(),S.bc(),S.cc(27,"div",13),S.cc(28,"div",14),S.cc(29,"label"),S.Uc(30,"Condiciones de pago"),S.bc(),S.cc(31,"ng-select",44),S.cc(32,"ng-option",41),S.Uc(33,"Seleccionar"),S.bc(),S.Sc(34,Q,2,2,"ng-option",17),S.bc(),S.bc(),S.bc(),S.bc(),S.cc(35,"div",12),S.cc(36,"div",13),S.cc(37,"div",14),S.cc(38,"label"),S.Uc(39,"Saldo inicial"),S.bc(),S.Xb(40,"input",45),S.bc(),S.bc(),S.cc(41,"div",13),S.cc(42,"div",14),S.cc(43,"label"),S.Uc(44,"A partir de la fecha"),S.bc(),S.Xb(45,"input",46),S.bc(),S.bc(),S.bc()),2&e){var c=S.oc();S.Ib(4),S.Vc(S.qc(5,8,"general.tax")),S.Ib(5),S.vc("ngForOf",c.tax),S.Ib(5),S.vc("virtualScroll",!0),S.Ib(3),S.vc("ngForOf",c.accounts),S.Ib(6),S.vc("virtualScroll",!0),S.Ib(3),S.vc("ngForOf",c.payments),S.Ib(5),S.vc("virtualScroll",!0),S.Ib(3),S.vc("ngForOf",c.timelimits)}}var J,Y=((J=function(e){a(o,e);var n=i(o);function o(e,t,c,a,i,r,s,d,b,p,m,f,g,v,h,_){var y;return l(this,o),(y=n.call(this,e,t,c,a,i,r,b)).fb=e,y.msg=t,y.api=c,y.router=a,y.translate=i,y.aRouter=r,y.termsSer=s,y.attrSer=d,y.spinner=b,y.docs=p,y.cnt=m,y.curr=f,y.tor=g,y.taxSer=v,y.accountSer=h,y.custSer=_,y.typepersons=[],y.identityDocs=[],y.typeOrg=[],y.countries=[],y.currency=[],y.tax=[],y.persons=[],y.accounts=[],y.payments=[],y.timelimits=[],y.active=1,y.title="Proveedor",y.translate.setDefaultLang(y.activeLang),y.customForm=y.fb.group({address:[""],city_name:[""],company_name:[""],description:[""],dni:[""],email:[""],last_name:[""],location:[""],mobile:[""],names:[""],phone:[""],postal_code:[""],state_name:[""],title:[""],web:[""],currency_id:["",[u.y.required]],country_id:[113,[u.y.required]],type_organization_id:[1,[u.y.required]],person_type_id:[1,[u.y.required]],tax_rate_id:["0"],means_payment_id:["0"],sales_term:["0"],accounting_account_id:["0"],initial_balance:[""],initial_date:[(new Date).toISOString().split("T")[0]],full_name:["",[u.y.required,u.y.minLength(6)]]}),y}return t(o,[{key:"invalidFullName",get:function(){return this.customForm.get("full_name").invalid&&this.customForm.get("full_name").touched}},{key:"invalidPersonType",get:function(){return this.customForm.get("person_type_id").value<=0}},{key:"invalidCountry",get:function(){return this.customForm.get("country_id").value<=0}},{key:"invalidCurrency",get:function(){return this.customForm.get("currency_id").value<=0}},{key:"invalidOrganization",get:function(){return this.customForm.get("type_organization_id").value<=0}},{key:"ngOnInit",value:function(){var e=this;c(r(o.prototype),"ngOnInit",this).call(this);var t=this;t.PutURL="/persons/update/",t.PostURL="/persons/create/provider",t.docs.getData({}).subscribe(function(e){t.identityDocs=e}),t.cnt.getData().subscribe(function(e){t.countries=e}),t.curr.getData().subscribe(function(e){t.currency=e,e.length>0&&(e.length>1?e.map(function(e){if(e.national_currency)return t.customForm.get("currency_id").setValue(e.id),!1}):t.customForm.get("currency_id").setValue(e[0].id))}),this.tor.getData({}).subscribe(function(t){e.typeOrg=t}),t.taxSer.getData({isVat:1}).subscribe(function(e){t.tax=e}),t.accountSer.getsubAccounts({}).subscribe(function(e){t.accounts=e}),t.custSer.getMeansPayment({}).subscribe(function(e){t.payments=e}),t.custSer.getTimeLimit({}).subscribe(function(e){t.timelimits=e})}},{key:"loadData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=this.customForm;this.editing=!0,this.custSer.getCustomers({uid:e}).subscribe(function(e){var c,a,n,i,o,r;t.setValue({address:e[0].address,city_name:e[0].city_name,company_name:e[0].company_name,country_id:e[0].country_id,currency_id:e[0].currency_id,description:e[0].description,dni:e[0].dni,email:e[0].email,full_name:e[0].full_name,last_name:e[0].last_name,location:e[0].location,mobile:e[0].mobile,names:e[0].names,person_type_id:e[0].person_type_id,type_organization_id:e[0].type_organization_id,tax_rate_id:null!==(c=e[0].tax_rate_id)&&void 0!==c?c:"0",means_payment_id:null!==(a=e[0].means_payment_id)&&void 0!==a?a:"0",sales_term:null!==(n=e[0].sales_term)&&void 0!==n?n:"0",accounting_account_id:null!==(i=e[0].accounting_account_id)&&void 0!==i?i:"0",initial_balance:null!==(o=e[0].initial_balance)&&void 0!==o?o:0,initial_date:null!==(r=e[0].initial_date)&&void 0!==r?r:(new Date).toISOString().split("T")[0],phone:e[0].phone,postal_code:e[0].postal_code,state_name:e[0].state_name,title:e[0].title,web:e[0].web})})}}]),o}(W.a)).\u0275fac=function(e){return new(e||J)(S.Wb(u.e),S.Wb(w.b),S.Wb(w.a),S.Wb(C.c),S.Wb(x.d),S.Wb(C.a),S.Wb(N.h),S.Wb(N.a),S.Wb(y.c),S.Wb(q.c),S.Wb(q.a),S.Wb(q.b),S.Wb(X.d),S.Wb(D.f),S.Wb(V.b),S.Wb(D.b))},J.\u0275cmp=S.Qb({type:J,selectors:[["app-customer-form"]],viewQuery:function(e,t){var c;1&e&&(S.Zc(A,1),S.Zc(E,1),S.Zc(R,1)),2&e&&(S.Hc(c=S.nc())&&(t.focusElement=c.first),S.Hc(c=S.nc())&&(t.uploadFile=c.first),S.Hc(c=S.nc())&&(t.imgUp=c.first))},features:[S.Fb],decls:25,vars:18,consts:[[1,"card"],[1,"card-header"],[1,"card-body"],[3,"formGroup"],["ngbNav","",1,"nav-tabs",3,"activeId","activeIdChange"],["nav","ngbNav"],[3,"ngbNavItem"],["ngbNavLink","",1,"display-none"],["ngbNavContent",""],[1,"mt-2",3,"ngbNavOutlet"],[1,"card-footer"],[3,"loading","showAaveACreate","saveAClose","closeEvent","saveAndCreateEvent","saveAndCloseEvent"],[1,"row"],[1,"col-md-6"],[1,"form-group"],[1,"asterisk"],["formControlName","type_organization_id","required","","name","type_organization_id",3,"virtualScroll"],[3,"value",4,"ngFor","ngForOf"],["type","text","formControlName","full_name","required","","autofocus","",1,"form-control"],["focusElement",""],["formControlName","currency_id","name","currency_id","required","",3,"virtualScroll"],["formControlName","country_id","required","",3,"virtualScroll"],[1,"col-md-2"],["type","text","formControlName","title","name","title",1,"form-control"],[1,"col-md-5"],["type","text","formControlName","names",1,"form-control"],["type","text","formControlName","last_name",1,"form-control"],["type","text","formControlName","dni",1,"form-control"],["type","text","formControlName","company_name",1,"form-control"],["type","text","formControlName","email",1,"form-control"],["type","text","formControlName","web",1,"form-control"],[3,"value"],["height","15","width","15",3,"src"],["formControlName","address","rows","2",1,"form-control"],["formControlName","location","rows","2",1,"form-control"],["type","text","formControlName","city_name",1,"form-control"],["type","text","formControlName","state_name",1,"form-control"],["type","text","formControlName","postal_code",1,"form-control"],["type","text","formControlName","mobile",1,"form-control"],["type","text","formControlName","phone",1,"form-control"],["formControlName","tax_rate_id"],["value","0"],["formControlName","accounting_account_id",3,"virtualScroll"],["formControlName","means_payment_id",3,"virtualScroll"],["formControlName","sales_term",3,"virtualScroll"],["currencyMask","","name","initial_balance","formControlName","initial_balance",1,"form-control"],["type","date","name","initial_date","formControlName","initial_date",1,"form-control"]],template:function(e,t){if(1&e&&(S.cc(0,"div",0),S.cc(1,"div",1),S.Uc(2),S.pc(3,"uppercase"),S.pc(4,"translate"),S.pc(5,"uppercase"),S.bc(),S.cc(6,"div",2),S.cc(7,"form",3),S.cc(8,"ul",4,5),S.mc("activeIdChange",function(e){return t.active=e}),S.cc(10,"li",6),S.cc(11,"a",7),S.Uc(12,"General"),S.bc(),S.Sc(13,H,79,39,"ng-template",8),S.bc(),S.cc(14,"li",6),S.cc(15,"a",7),S.Uc(16,"Ubicaci\xf3n/Direcci\xf3n"),S.bc(),S.Sc(17,z,37,0,"ng-template",8),S.bc(),S.cc(18,"li",6),S.cc(19,"a",7),S.Uc(20,"Pago y facturaci\xf3n"),S.bc(),S.Sc(21,K,46,10,"ng-template",8),S.bc(),S.bc(),S.Xb(22,"div",9),S.bc(),S.bc(),S.cc(23,"div",10),S.cc(24,"app-footer-form",11),S.mc("closeEvent",function(){return t.cancel()})("saveAndCreateEvent",function(){return t.saveAndCreate()})("saveAndCloseEvent",function(){return t.saveAndClose()}),S.bc(),S.bc(),S.bc()),2&e){var c=S.Ic(9);S.Ib(2),S.Xc(" ",S.qc(3,12,S.qc(4,14,"general.createEdit"))," ",S.qc(5,16,t.title)," "),S.Ib(5),S.vc("formGroup",t.customForm),S.Ib(1),S.vc("activeId",t.active),S.Ib(2),S.vc("ngbNavItem",1),S.Ib(4),S.vc("ngbNavItem",2),S.Ib(4),S.vc("ngbNavItem",3),S.Ib(4),S.vc("ngbNavOutlet",c),S.Ib(2),S.vc("loading",t.loading)("showAaveACreate",!0)("saveAClose",t.saveAClose)("saveAClose",t.saveAClose)}},directives:[u.z,u.q,u.h,v.u,v.w,v.x,v.v,v.z,T.a,g.a,u.p,u.g,u.w,d.m,u.c,g.d,h.a],pipes:[d.v,x.c],styles:["nb-checkbox[_ngcontent-%COMP%]{margin-bottom:1rem}.form-inline[_ngcontent-%COMP%]   [fullWidth][_ngcontent-%COMP%]{flex:1}.form-inline[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin:0 1.5rem 1.5rem 0}nb-card.inline-form-card[_ngcontent-%COMP%]   nb-card-body[_ngcontent-%COMP%]{padding-bottom:0}"]}),J),ee=o("PSD3"),te=o.n(ee),ce=["customGrid"],ae=["detailGrid"],ne=["searchField"],ie=["myTabs"];function oe(e,t){if(1&e){var c=S.dc();S.cc(0,"div"),S.cc(1,"button",24),S.mc("click",function(){return S.Lc(c),S.oc().importData()}),S.Xb(2,"i",39),S.Uc(3),S.pc(4,"translate"),S.bc(),S.bc()}if(2&e){var a=S.oc();S.Ib(1),S.vc("disabled",a.loading),S.Ib(2),S.Wc(" ",S.qc(4,2,"buttons.import")," ")}}var re,le=((re=function(e){a(o,e);var n=i(o);function o(e,t,c,a,i,r){var s;return l(this,o),(s=n.call(this,e,t,c,a,i)).msg=e,s.api=t,s.router=c,s.translate=a,s.aRouter=i,s.shopSer=r,s.title="Registro de compras",s.invoiceName="",s.source2={localdata:[],datafields:[{name:"active",type:"boolean"},{name:"admission_date",type:"string"},{name:"amount",type:"number"},{name:"barcode",type:"string"},{name:"batch",type:"string"},{name:"expiration_date",type:"string"},{name:"fabrication_date",type:"string"},{name:"freight",type:"number"},{name:"id",type:"number"},{name:"internal_code",type:"string"},{name:"invoice_id",type:"number"},{name:"perishable",type:"boolean"},{name:"product_id",type:"number"},{name:"product_name",type:"string"},{name:"sale_price",type:"number"},{name:"state",type:"number"},{name:"tax_bill",type:"number"},{name:"tax_bill_id",type:"number"},{name:"tax_sale",type:"number"},{name:"tax_sale_id",type:"number"},{name:"total_cost",type:"number"},{name:"unit_cost",type:"number"},{name:"vat_included",type:"boolean"}],datatype:"array"},s.dataAdapter2=new jqx.dataAdapter(s.source2),s.columnsDet=[{columngroup:"Actions",text:"",sortable:!1,filterable:!1,editable:!1,align:"center",groupable:!1,draggable:!1,resizable:!1,datafield:"#edit_#",columntype:"text",width:32,cellsrenderer:function(e,t,c){return'<span><i class="fas fa-pen fas-fa-edit fa-cursor"></i></span>'}},{columngroup:"Actions",text:"",sortable:!1,filterable:!1,editable:!1,align:"center",groupable:!1,draggable:!1,resizable:!1,datafield:"#delete_#",columntype:"text",width:32,cellsrenderer:function(e,t,c){return'<span><i class="fas fa-trash-alt fas-fa-delete fa-cursor"></i></span>'}},{text:"Cantidad",datafield:"amount",align:"center",width:80,cellsalign:"right"},{text:"Producto",datafield:"product_name",align:"center",minWidth:250},{text:"Precio unitario",datafield:"unit_cost",align:"center",cellsalign:"right",cellsformat:"c2",width:120},{text:"Precio de venta",datafield:"sale_price",align:"center",cellsalign:"right",cellsformat:"c2",width:120},{text:"Total",datafield:"total_cost",align:"center",cellsalign:"right",cellsformat:"c2",width:120}],s}return t(o,[{key:"ngOnInit",value:function(){this.changeLanguage(this.activeLang)}},{key:"ngAfterViewInit",value:function(){var e=this;e.crudApi={create:"/shopping/create",read:"/shopping/read",update:"/shopping/update/",delete:"/shopping/delete/"},e.showActions=!0,e.showRowNumber=!0,e.pagesize=10,e.datafields=[{name:"id",type:"number"},{name:"invoice_nro",type:"string"},{name:"total",type:"number"},{name:"branch_name",type:"string"},{name:"full_name",type:"string"},{name:"winery_name",type:"string"}],e.sourceColumns=[{columngroup:"Actions",text:"",sortable:!1,filterable:!1,editable:!1,align:"center",groupable:!1,draggable:!1,resizable:!1,datafield:"#edit_shopping_#",columntype:"text",width:32,cellsrenderer:function(e,t,c){return'<span><i class="fas fa-shopping-cart fas-fa-edit fa-cursor"></i></span>'}},{text:"N\xba. Factura",datafield:"invoice_nro",align:"center",minwidth:80,width:100},{text:"Proveedor",datafield:"full_name",align:"center",minwidth:100},{text:"Bodega",datafield:"branch_name",align:"center",minwidth:100},{text:"Total",datafield:"total",align:"center",cellsalign:"right",cellsformat:"c2",minwidth:100}],this.prepareGrid()}},{key:"cellDetailClick",value:function(e){var t=e.args,c=this.detailGrid.getrowdata(t.rowindex);"#edit_#"===t.datafield?this.goRoute("shopping/invoices/detail/edit/".concat(c.id)):"#delete_#"===t.datafield&&this.deleteDetail(c)}},{key:"cellClick",value:function(e){var t=e.args,c=this.customGrid.getrowdata(t.rowindex),a=this;a.invoiceName=c.invoice_nro,"#edit_shopping_#"===t.datafield?a.goRoute("shopping/invoices/create/detail/".concat(c.id)):"#edit_#"===t.datafield?a.editData(c):"#delete_#"===t.datafield?a.deleteData(c):a.refreshDetail(c.id)}},{key:"deleteDetail",value:function(e){var t=this,c=t.translate;te.a.fire({title:c.instant("titleMessages.delete"),text:c.instant("bodyMessages.delete"),icon:"question",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:c.instant("buttons.yes"),cancelButtonText:c.instant("buttons.not")}).then(function(a){a.value&&t.api.delete("/shopping/delete/detail/".concat(e.id)).subscribe(function(c){t.refreshDetail(e.invoice_id)},function(e){t.msg.toastMessage(c.instant("general.error"),e.error.message,4)})})}},{key:"refreshDetail",value:function(e){var t=this;t.source2.localdata=[],t.detailGrid.updatebounddata("cells"),t.detailGrid.showloadelement(),t.shopSer.getDetail(e).subscribe(function(e){t.source2.localdata=e,t.detailGrid.updatebounddata("cells"),t.detailGrid.hideloadelement()},function(){return t.detailGrid.hideloadelement()})}},{key:"createData",value:function(){c(r(o.prototype),"createData",this).call(this),this.goRoute("shopping/invoices/create")}},{key:"editData",value:function(e){c(r(o.prototype),"editData",this).call(this,e),this.goRoute("shopping/invoices/edit/".concat(e.id))}}]),o}(k.a)).\u0275fac=function(e){return new(e||re)(S.Wb(w.b),S.Wb(w.a),S.Wb(C.c),S.Wb(x.d),S.Wb(C.a),S.Wb(q.d))},re.\u0275cmp=S.Qb({type:re,selectors:[["app-invoices"]],viewQuery:function(e,t){var c;1&e&&(S.Zc(ce,1),S.Zc(ae,1),S.Zc(ne,1),S.Zc(ie,1)),2&e&&(S.Hc(c=S.nc())&&(t.customGrid=c.first),S.Hc(c=S.nc())&&(t.detailGrid=c.first),S.Hc(c=S.nc())&&(t.searchField=c.first),S.Hc(c=S.nc())&&(t.myTabs=c.first))},features:[S.Fb],decls:93,vars:56,consts:[[3,"width","height","position","animationType","selectionTracker","theme"],["myTabs",""],[2,"margin-left","30px"],[1,"card"],[1,"card-header"],[1,"card-title"],[1,"menuExport"],[1,"space-right"],[1,"btn","btn-danger","round","mr-1","mb-1",3,"disabled","click"],[1,"fa","fa-sync","mr-1","fas-fa-22"],[1,"myMenu","space-right"],[1,"clearColor",3,"height","onItemclick"],["myMenu",""],["id","Exports"],[1,"fas","fa-cog","fas-fa-22","fas-fa-red"],["href","javascript:void(0)"],[2,"width","200px"],[1,"fas","fa-file-excel","fas-fa-xls"],[1,"fas","fa-file-csv","fas-fa-xls"],["type","separator"],[1,"fas","fa-file-pdf","fas-fa-pdf"],[1,"fas","fa-file-code","fas-fa-code"],[1,"fas","fa-print","fas-fa-print"],[1,"margin-left","space-right"],[1,"btn","btn-success","round","mr-1","mb-1",3,"disabled","click"],[1,"fa","fa-plus","mr-1","fas-fa-22"],[4,"ngIf"],[1,"container-fluid"],[1,"input-group"],["type","text","autofocus","",1,"form-control",3,"placeholder","keyup"],["searchField",""],[1,"input-group-append"],[1,"btn","btn-primary",3,"disabled","click"],[1,"fa","fa-search"],["width","100%",3,"disabled","auto-create","onCellselect","onBindingcomplete"],["customGrid",""],[1,"example-items-col"],["width","100%",3,"source","columns","theme","disabled","selectionmode","columnsresize","sortable","filterable","showfilterrow","onCellselect"],["detailGrid",""],[1,"fa","fa-upload","mr-1","fas-fa-22"]],template:function(e,t){1&e&&(S.cc(0,"jqxTabs",0,1),S.cc(2,"ul"),S.cc(3,"li",2),S.Uc(4,"Facturas"),S.bc(),S.cc(5,"li"),S.Uc(6,"Detalle de la factura"),S.bc(),S.bc(),S.cc(7,"div"),S.cc(8,"div",3),S.cc(9,"div",4),S.cc(10,"h4",5),S.Uc(11),S.pc(12,"uppercase"),S.bc(),S.bc(),S.cc(13,"div",3),S.cc(14,"div",6),S.cc(15,"div",7),S.cc(16,"button",8),S.mc("click",function(){return t.searchQuery()}),S.Xb(17,"i",9),S.bc(),S.bc(),S.cc(18,"div",10),S.cc(19,"jqxMenu",11,12),S.mc("onItemclick",function(e){return t.itemclick(e)}),S.cc(21,"ul"),S.cc(22,"li",13),S.Xb(23,"i",14),S.Xb(24,"a",15),S.cc(25,"ul",16),S.cc(26,"li"),S.cc(27,"a",15),S.Xb(28,"i",17),S.Uc(29),S.pc(30,"translate"),S.bc(),S.bc(),S.cc(31,"li"),S.cc(32,"a",15),S.Xb(33,"i",18),S.Uc(34),S.pc(35,"translate"),S.bc(),S.bc(),S.cc(36,"li"),S.cc(37,"a",15),S.Xb(38,"i",17),S.Uc(39),S.pc(40,"translate"),S.bc(),S.bc(),S.Xb(41,"li",19),S.cc(42,"li"),S.cc(43,"a",15),S.Xb(44,"i",20),S.Uc(45),S.pc(46,"translate"),S.bc(),S.bc(),S.Xb(47,"li",19),S.cc(48,"li"),S.cc(49,"a",15),S.Xb(50,"i",21),S.Uc(51),S.pc(52,"translate"),S.bc(),S.bc(),S.cc(53,"li"),S.cc(54,"a",15),S.Xb(55,"i",21),S.Uc(56),S.pc(57,"translate"),S.bc(),S.bc(),S.cc(58,"li"),S.cc(59,"a",15),S.Xb(60,"i",21),S.Uc(61),S.pc(62,"translate"),S.bc(),S.bc(),S.Xb(63,"li",19),S.cc(64,"li"),S.cc(65,"a",15),S.Xb(66,"i",22),S.Uc(67),S.pc(68,"translate"),S.bc(),S.bc(),S.bc(),S.bc(),S.bc(),S.bc(),S.bc(),S.cc(69,"div",23),S.cc(70,"button",24),S.mc("click",function(){return t.createData()}),S.Xb(71,"i",25),S.Uc(72),S.pc(73,"translate"),S.bc(),S.bc(),S.Sc(74,oe,5,4,"div",26),S.bc(),S.cc(75,"div",27),S.cc(76,"fieldset"),S.cc(77,"div",28),S.cc(78,"input",29,30),S.mc("keyup",function(e){return t.inputKey(e)}),S.bc(),S.cc(80,"div",31),S.cc(81,"button",32),S.mc("click",function(){return t.searchQuery()}),S.Xb(82,"i",33),S.bc(),S.bc(),S.bc(),S.bc(),S.cc(83,"jqxGrid",34,35),S.mc("onCellselect",function(e){return t.cellClick(e)})("onBindingcomplete",function(e){return t.Bindingcomplete(e)}),S.bc(),S.bc(),S.bc(),S.bc(),S.bc(),S.cc(85,"div"),S.cc(86,"div",3),S.cc(87,"div",4),S.Uc(88),S.pc(89,"uppercase"),S.bc(),S.cc(90,"div",36),S.cc(91,"jqxGrid",37,38),S.mc("onCellselect",function(e){return t.cellDetailClick(e)}),S.bc(),S.bc(),S.bc(),S.bc(),S.bc()),2&e&&(S.vc("width","100%")("height",600)("position","top")("animationType","fade")("selectionTracker",!1)("theme",t.theme),S.Ib(11),S.Vc(S.qc(12,34,t.title)),S.Ib(5),S.vc("disabled",t.loading),S.Ib(3),S.vc("height",36),S.Ib(10),S.Vc(S.qc(30,36,"export.excel")),S.Ib(5),S.Vc(S.qc(35,38,"export.csv")),S.Ib(5),S.Vc(S.qc(40,40,"export.xml")),S.Ib(6),S.Vc(S.qc(46,42,"export.pdf")),S.Ib(6),S.Vc(S.qc(52,44,"export.html")),S.Ib(5),S.Vc(S.qc(57,46,"export.json")),S.Ib(5),S.Vc(S.qc(62,48,"export.tsv")),S.Ib(6),S.Vc(S.qc(68,50,"export.print")),S.Ib(3),S.vc("disabled",t.loading),S.Ib(2),S.Wc(" ",S.qc(73,52,"buttons.new")," "),S.Ib(2),S.vc("ngIf",t.useImport),S.Ib(4),S.vc("placeholder",t.placeholderSearch),S.Ib(3),S.vc("disabled",t.loading),S.Ib(2),S.vc("disabled",t.loading)("auto-create",!1),S.Ib(5),S.Wc("FACTURA N\xba: ",S.qc(89,54,t.invoiceName),""),S.Ib(3),S.vc("source",t.dataAdapter2)("columns",t.columnsDet)("theme",t.theme)("disabled",t.loading)("selectionmode","singlecell")("columnsresize",!0)("sortable",!0)("filterable",!0)("showfilterrow",!0))},directives:[m.a,p.a,d.n,b.a],pipes:[d.v,x.c],encapsulation:2}),re),se=o("52YP"),de=o("4IXu"),ue=o("Cx/d"),be=["focusElement"];function pe(e,t){if(1&e&&(S.cc(0,"ng-option",31),S.Uc(1),S.bc()),2&e){var c=t.$implicit;S.vc("value",c.id),S.Ib(1),S.Yc(" ",c.dni," - ",c.company_name," ",c.full_name," ")}}function me(e,t){if(1&e&&(S.cc(0,"ng-option",31),S.Uc(1),S.bc()),2&e){var c=t.$implicit;S.vc("value",c.id),S.Ib(1),S.Wc(" ",c.branch_name," ")}}function fe(e,t){if(1&e&&(S.cc(0,"ng-option",31),S.Uc(1),S.bc()),2&e){var c=t.$implicit;S.vc("value",c.id),S.Ib(1),S.Wc(" ",c.winery_name," ")}}function ge(e,t){if(1&e&&(S.cc(0,"ng-option",31),S.Uc(1),S.bc()),2&e){var c=t.$implicit;S.vc("value",c.id),S.Ib(1),S.Wc(" ",c.payment_method," ")}}var ve,he=((ve=function(e){a(o,e);var n=i(o);function o(e,t,c,a,i,r,s,d,b,p,m,f){var g;return l(this,o),(g=n.call(this,e,t,c,a,i,r,f)).fb=e,g.msg=t,g.api=c,g.router=a,g.translate=i,g.aRouter=r,g.provSer=s,g.docsSer=d,g.shopSer=b,g.branchSer=p,g.wareHouseServ=m,g.spinner=f,g.providers=[],g.payments=[],g.ware_house=[],g.pointsOfSale=[],g.translate.setDefaultLang(g.activeLang),g.customForm=g.fb.group({admission_date:[(new Date).toISOString().split("T")[0],[u.y.required]],discount:[0],freight:[0],rfte:[0],invoice_nro:["",[u.y.required,u.y.minLength(2)]],vat:[0],notes:[""],pay_day:[(new Date).toISOString().split("T")[0],[u.y.required]],payment_method_id:["",[u.y.required]],point_of_sale_id:["0",[u.y.required]],warehouse_id:["0"],provider_id:["0",[u.y.required]],sub_total:[0,[u.y.required]],total:[0,[u.y.required]]}),g}return t(o,[{key:"invalidName",get:function(){return this.customForm.get("invoice_nro").invalid&&this.customForm.get("invoice_nro").touched}},{key:"invalidBranch",get:function(){return this.customForm.get("point_of_sale_id").invalid&&this.customForm.get("point_of_sale_id").touched}},{key:"ngOnInit",value:function(){c(r(o.prototype),"ngOnInit",this).call(this);var e=this;e.title="Crear/Editar factura de compra",e.PutURL="/shopping/update/",e.PostURL="/shopping/create",e.wareHouseServ.getData({}).subscribe(function(t){e.ware_house=t}),e.provSer.getProviders({}).subscribe(function(t){e.providers=t}),e.docsSer.getPaymentMethods({}).subscribe(function(t){e.payments=t,t.length>0&&e.customForm.get("payment_method_id").setValue(t[0].id)}),e.branchSer.getPointsOfSale({}).subscribe(function(t){e.pointsOfSale=t,t.length>0&&e.customForm.get("point_of_sale_id").setValue(t[0].id)})}},{key:"loadData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=this.customForm;this.editing=!0,this.shopSer.getData({uid:e}).subscribe(function(e){var c;t.setValue({admission_date:e[0].admission_date,discount:e[0].discount,freight:e[0].freight,invoice_nro:e[0].invoice_nro,vat:e[0].vat,rfte:e[0].rfte,notes:e[0].notes,pay_day:e[0].pay_day,warehouse_id:null!==(c=e[0].warehouse_id)&&void 0!==c?c:"0",payment_method_id:e[0].payment_method_id,point_of_sale_id:e[0].point_of_sale_id,provider_id:e[0].provider_id,sub_total:e[0].sub_total,total:e[0].total})})}}]),o}(W.a)).\u0275fac=function(e){return new(e||ve)(S.Wb(u.e),S.Wb(w.b),S.Wb(w.a),S.Wb(C.c),S.Wb(x.d),S.Wb(C.a),S.Wb(se.a),S.Wb(de.a),S.Wb(ue.a),S.Wb(X.a),S.Wb(X.e),S.Wb(y.c))},ve.\u0275cmp=S.Qb({type:ve,selectors:[["app-invoices-form"]],viewQuery:function(e,t){var c;1&e&&S.Zc(be,1),2&e&&S.Hc(c=S.nc())&&(t.focusElement=c.first)},features:[S.Fb],decls:122,vars:41,consts:[[1,"row"],[1,"col-md-12"],[1,"card"],[1,"card-header"],[1,"card-body"],[3,"formGroup"],[1,"col-md-4"],[1,"form-group"],[1,"asterisk"],["type","text","nbinput","","formControlName","invoice_nro","required","","autofocus","",1,"form-control"],["focusElement",""],[1,"col-md-8"],["formControlName","provider_id","required",""],["value","0"],[3,"value",4,"ngFor","ngForOf"],[1,"col-md-6"],["formControlName","point_of_sale_id","required",""],["formControlName","warehouse_id"],["formControlName","payment_method_id","required",""],["type","date","formControlName","admission_date","nbinput","","required","",1,"form-control"],["type","date","formControlName","pay_day","nbinput","","required","",1,"form-control"],["currencyMask","","formControlName","sub_total","nbinput","","required","",1,"form-control"],["currencyMask","","formControlName","discount","nbinput","",1,"form-control"],["currencyMask","","formControlName","vat","nbinput","",1,"form-control"],["currencyMask","","formControlName","freight","nbinput","",1,"form-control"],["currencyMask","","formControlName","rfte","nbinput","",1,"form-control"],["currencyMask","","formControlName","total","ngbTooltip","Total","nbinput","","required","",1,"form-control"],[1,"col"],["formControlName","notes","nbinput","",1,"form-control"],[1,"card-footer"],[3,"showAaveACreate","saveAClose","closeEvent","saveAndCreateEvent","saveAndCloseEvent"],[3,"value"]],template:function(e,t){1&e&&(S.cc(0,"div",0),S.cc(1,"div",1),S.cc(2,"div",2),S.cc(3,"div",3),S.Uc(4),S.pc(5,"uppercase"),S.pc(6,"translate"),S.bc(),S.cc(7,"div",4),S.cc(8,"form",5),S.cc(9,"div",0),S.cc(10,"div",6),S.cc(11,"div",7),S.cc(12,"label"),S.cc(13,"span",8),S.Uc(14),S.pc(15,"translate"),S.bc(),S.Uc(16,"N\xba. de la factura"),S.bc(),S.Xb(17,"input",9,10),S.bc(),S.bc(),S.cc(19,"div",11),S.cc(20,"div",7),S.cc(21,"label"),S.cc(22,"span",8),S.Uc(23),S.pc(24,"translate"),S.bc(),S.Uc(25,"Proveedor"),S.bc(),S.cc(26,"ng-select",12),S.cc(27,"ng-option",13),S.Uc(28,"Seleccionar proveedor"),S.bc(),S.Sc(29,pe,2,4,"ng-option",14),S.bc(),S.bc(),S.bc(),S.bc(),S.cc(30,"div",0),S.cc(31,"div",15),S.cc(32,"div",7),S.cc(33,"label"),S.cc(34,"span",8),S.Uc(35),S.pc(36,"translate"),S.bc(),S.Uc(37,"Punto de venta"),S.bc(),S.cc(38,"ng-select",16),S.cc(39,"ng-option",13),S.Uc(40,"Seleccionar punto de venta"),S.bc(),S.Sc(41,me,2,2,"ng-option",14),S.bc(),S.bc(),S.bc(),S.cc(42,"div",15),S.cc(43,"div",7),S.cc(44,"label"),S.Uc(45,"Bodega"),S.bc(),S.cc(46,"ng-select",17),S.cc(47,"ng-option",13),S.Uc(48,"Seleccionar bopdega"),S.bc(),S.Sc(49,fe,2,2,"ng-option",14),S.bc(),S.bc(),S.bc(),S.bc(),S.cc(50,"div",0),S.cc(51,"div",6),S.cc(52,"div",7),S.cc(53,"label"),S.cc(54,"span",8),S.Uc(55),S.pc(56,"translate"),S.bc(),S.Uc(57,"Forma de pago"),S.bc(),S.cc(58,"ng-select",18),S.Sc(59,ge,2,2,"ng-option",14),S.bc(),S.bc(),S.bc(),S.cc(60,"div",6),S.cc(61,"div",7),S.cc(62,"label"),S.cc(63,"span",8),S.Uc(64),S.pc(65,"translate"),S.bc(),S.Uc(66,"Fecha de emisi\xf3n"),S.bc(),S.Xb(67,"input",19),S.bc(),S.bc(),S.cc(68,"div",6),S.cc(69,"div",7),S.cc(70,"label"),S.cc(71,"span",8),S.Uc(72),S.pc(73,"translate"),S.bc(),S.Uc(74,"Fecha de pago"),S.bc(),S.Xb(75,"input",20),S.bc(),S.bc(),S.bc(),S.cc(76,"div",0),S.cc(77,"div",6),S.cc(78,"div",7),S.cc(79,"label"),S.cc(80,"span",8),S.Uc(81),S.pc(82,"translate"),S.bc(),S.Uc(83,"Subtotal"),S.bc(),S.Xb(84,"input",21),S.bc(),S.bc(),S.cc(85,"div",6),S.cc(86,"div",7),S.cc(87,"label"),S.Uc(88,"Descuento"),S.bc(),S.Xb(89,"input",22),S.bc(),S.bc(),S.cc(90,"div",6),S.cc(91,"div",7),S.cc(92,"label"),S.Uc(93,"IVA"),S.bc(),S.Xb(94,"input",23),S.bc(),S.bc(),S.bc(),S.cc(95,"div",0),S.cc(96,"div",6),S.cc(97,"div",7),S.cc(98,"label"),S.Uc(99,"Cargo/Seguro/Flete"),S.bc(),S.Xb(100,"input",24),S.bc(),S.bc(),S.cc(101,"div",6),S.cc(102,"div",7),S.cc(103,"label"),S.Uc(104,"Retefuente"),S.bc(),S.Xb(105,"input",25),S.bc(),S.bc(),S.cc(106,"div",6),S.cc(107,"div",7),S.cc(108,"label"),S.cc(109,"span",8),S.Uc(110),S.pc(111,"translate"),S.bc(),S.Uc(112,"Total"),S.bc(),S.Xb(113,"input",26),S.bc(),S.bc(),S.bc(),S.cc(114,"div",0),S.cc(115,"div",27),S.cc(116,"div",7),S.cc(117,"label"),S.Uc(118,"Notas"),S.bc(),S.Xb(119,"textarea",28),S.bc(),S.bc(),S.bc(),S.bc(),S.bc(),S.cc(120,"div",29),S.cc(121,"app-footer-form",30),S.mc("closeEvent",function(){return t.cancel()})("saveAndCreateEvent",function(){return t.saveAndCreate()})("saveAndCloseEvent",function(){return t.saveAndClose()}),S.bc(),S.bc(),S.bc(),S.bc(),S.bc()),2&e&&(S.Ib(4),S.Wc("",S.qc(5,21,S.qc(6,23,"general.createEdit"))," FACTURA DE COMPRA "),S.Ib(4),S.vc("formGroup",t.customForm),S.Ib(6),S.Wc(" ",S.qc(15,25,"general.asterisk"),""),S.Ib(3),S.Ob("status-danger",t.invalidName)("is-invalid",t.invalidName),S.Ib(6),S.Wc(" ",S.qc(24,27,"general.asterisk"),""),S.Ib(6),S.vc("ngForOf",t.providers),S.Ib(6),S.Wc(" ",S.qc(36,29,"general.asterisk"),""),S.Ib(6),S.vc("ngForOf",t.pointsOfSale),S.Ib(8),S.vc("ngForOf",t.ware_house),S.Ib(6),S.Wc(" ",S.qc(56,31,"general.asterisk"),""),S.Ib(4),S.vc("ngForOf",t.payments),S.Ib(5),S.Wc(" ",S.qc(65,33,"general.asterisk"),""),S.Ib(8),S.Wc(" ",S.qc(73,35,"general.asterisk"),""),S.Ib(9),S.Wc(" ",S.qc(82,37,"general.asterisk"),""),S.Ib(29),S.Wc(" ",S.qc(111,39,"general.asterisk"),""),S.Ib(11),S.vc("showAaveACreate",!1)("saveAClose",t.saveAClose)("saveAClose",t.saveAClose))},directives:[u.z,u.q,u.h,u.c,u.p,u.g,u.w,g.a,g.d,d.m,h.a,v.N,T.a],pipes:[d.v,x.c],styles:["nb-checkbox[_ngcontent-%COMP%]{margin-bottom:1rem}.form-inline[_ngcontent-%COMP%]   [fullWidth][_ngcontent-%COMP%]{flex:1}.form-inline[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin:0 1.5rem 1.5rem 0}nb-card.inline-form-card[_ngcontent-%COMP%]   nb-card-body[_ngcontent-%COMP%]{padding-bottom:0}"]}),ve),_e=o("xg8E"),ye=o("PU63"),xe=o("K56k"),Ce=["customGrid"],Se=["myDataTable"],Ie=["searchField"],ke=["focusElement"],we=["amountElement"],Oe=["cashele"],Ue=["searchbar"],Fe=["myTabs"];function Pe(e,t){1&e&&(S.cc(0,"label"),S.cc(1,"span",72),S.Uc(2),S.pc(3,"translate"),S.bc(),S.Uc(4,"N\xba. de la factura"),S.bc()),2&e&&(S.Ib(2),S.Wc(" ",S.qc(3,1,"general.asterisk"),""))}function Me(e,t){1&e&&(S.cc(0,"label"),S.cc(1,"span",72),S.Uc(2),S.pc(3,"translate"),S.bc(),S.Uc(4,"Proveedor"),S.bc()),2&e&&(S.Ib(2),S.Wc(" ",S.qc(3,1,"general.asterisk"),""))}function We(e,t){if(1&e&&(S.cc(0,"ng-option",73),S.Uc(1),S.bc()),2&e){var c=t.$implicit;S.vc("value",c.id),S.Ib(1),S.Yc(" ",c.dni," - ",c.full_name," ",c.company_name," ")}}function Ne(e,t){1&e&&(S.cc(0,"label"),S.cc(1,"span",72),S.Uc(2),S.pc(3,"translate"),S.bc(),S.Uc(4,"Punto de venta"),S.bc()),2&e&&(S.Ib(2),S.Wc(" ",S.qc(3,1,"general.asterisk"),""))}function qe(e,t){if(1&e&&(S.cc(0,"ng-option",73),S.Uc(1),S.bc()),2&e){var c=t.$implicit;S.vc("value",c.id),S.Ib(1),S.Wc(" ",c.branch_name," ")}}function Xe(e,t){1&e&&(S.cc(0,"label"),S.Uc(1,"Bodega"),S.bc())}function De(e,t){if(1&e&&(S.cc(0,"ng-option",73),S.Uc(1),S.bc()),2&e){var c=t.$implicit;S.vc("value",c.id),S.Ib(1),S.Wc(" ",c.winery_name," ")}}function Ve(e,t){if(1&e&&(S.cc(0,"ng-option",73),S.Uc(1),S.bc()),2&e){var c=t.$implicit;S.vc("value",c.id),S.Ib(1),S.Wc(" ",c.payment_method," ")}}function Te(e,t){if(1&e&&(S.cc(0,"div",5),S.cc(1,"div",6),S.cc(2,"div",7),S.cc(3,"label"),S.cc(4,"span",72),S.Uc(5),S.pc(6,"translate"),S.bc(),S.Uc(7,"Forma de pago"),S.bc(),S.cc(8,"ng-select",74),S.Sc(9,Ve,2,2,"ng-option",14),S.bc(),S.bc(),S.bc(),S.cc(10,"div",6),S.cc(11,"div",7),S.cc(12,"label"),S.cc(13,"span",72),S.Uc(14),S.pc(15,"translate"),S.bc(),S.Uc(16,"Fecha de emisi\xf3n"),S.bc(),S.Xb(17,"input",75),S.bc(),S.bc(),S.cc(18,"div",6),S.cc(19,"div",7),S.cc(20,"label"),S.cc(21,"span",72),S.Uc(22),S.pc(23,"translate"),S.bc(),S.Uc(24,"Fecha de pago"),S.bc(),S.Xb(25,"input",76),S.bc(),S.bc(),S.bc()),2&e){var c=S.oc();S.Ib(5),S.Wc(" ",S.qc(6,6,"general.asterisk"),""),S.Ib(4),S.vc("ngForOf",c.payments),S.Ib(5),S.Wc(" ",S.qc(15,8,"general.asterisk"),""),S.Ib(3),S.vc("readOnly",c.editing),S.Ib(5),S.Wc(" ",S.qc(23,10,"general.asterisk"),""),S.Ib(3),S.vc("readOnly",c.editing)}}function Ae(e,t){if(1&e&&(S.cc(0,"div",5),S.cc(1,"div",6),S.cc(2,"div",7),S.cc(3,"label"),S.cc(4,"span",72),S.Uc(5),S.pc(6,"translate"),S.bc(),S.Uc(7,"Subtotal"),S.bc(),S.Xb(8,"input",77),S.bc(),S.bc(),S.cc(9,"div",6),S.cc(10,"div",7),S.cc(11,"label"),S.Uc(12,"Descuento"),S.bc(),S.Xb(13,"input",78),S.bc(),S.bc(),S.cc(14,"div",6),S.cc(15,"div",7),S.cc(16,"label"),S.Uc(17,"IVA"),S.bc(),S.Xb(18,"input",79),S.bc(),S.bc(),S.bc()),2&e){var c=S.oc();S.Ib(5),S.Wc(" ",S.qc(6,4,"general.asterisk"),""),S.Ib(3),S.vc("readOnly",c.editing),S.Ib(5),S.vc("readOnly",c.editing),S.Ib(5),S.vc("readOnly",c.editing)}}function Ee(e,t){1&e&&(S.cc(0,"label"),S.Uc(1,"Cargo/Seguro/Flete"),S.bc())}function Re(e,t){1&e&&(S.cc(0,"label"),S.Uc(1,"Retefuente"),S.bc())}function Be(e,t){1&e&&(S.cc(0,"label"),S.cc(1,"span",72),S.Uc(2),S.pc(3,"translate"),S.bc(),S.Uc(4,"Total"),S.bc()),2&e&&(S.Ib(2),S.Wc(" ",S.qc(3,1,"general.asterisk"),""))}function Ge(e,t){if(1&e&&(S.cc(0,"div",5),S.cc(1,"div",23),S.cc(2,"div",7),S.cc(3,"label"),S.Uc(4,"Notas"),S.bc(),S.Xb(5,"textarea",80),S.bc(),S.bc(),S.bc()),2&e){var c=S.oc();S.Ib(5),S.vc("readOnly",c.editing)}}function Le(e,t){if(1&e){var c=S.dc();S.cc(0,"div",81),S.mc("click",function(){S.Lc(c);var e=t.$implicit;return S.oc().onClickItem(e)}),S.Xb(1,"img",82),S.cc(2,"div",2),S.cc(3,"h6",83),S.Uc(4),S.pc(5,"currency"),S.bc(),S.cc(6,"p",84),S.Uc(7),S.bc(),S.bc(),S.bc()}if(2&e){var a=t.$implicit;S.Ib(1),S.vc("src",a.image,S.Oc),S.Ib(3),S.Wc(" ",S.qc(5,3,a.sale_price),""),S.Ib(3),S.Vc(a.product_name)}}function He(e,t){if(1&e&&(S.cc(0,"ng-option",73),S.Uc(1),S.bc()),2&e){var c=t.$implicit;S.vc("value",c.id),S.Ib(1),S.Xc(" ",c.name_taxe," - ",c.rate_value," % ")}}function ze(e,t){if(1&e&&(S.cc(0,"ng-option",73),S.Uc(1),S.bc()),2&e){var c=t.$implicit;S.vc("value",c.id),S.Ib(1),S.Xc(" ",c.name_taxe," - ",c.rate_value," % ")}}function Ze(e,t){if(1&e&&(S.cc(0,"div",45),S.cc(1,"label",85),S.Uc(2,"Lote #"),S.bc(),S.cc(3,"div",86),S.Xb(4,"input",87),S.bc(),S.bc()),2&e){var c=S.oc();S.Ib(4),S.vc("readonly",!c.perishable)}}function je(e,t){if(1&e&&(S.cc(0,"div",45),S.cc(1,"label",85),S.Uc(2,"Fecha de fabricaci\xf3n"),S.bc(),S.cc(3,"div",86),S.Xb(4,"input",88),S.bc(),S.bc()),2&e){var c=S.oc();S.Ib(4),S.vc("readonly",!c.perishable)}}function $e(e,t){if(1&e&&(S.cc(0,"div",45),S.cc(1,"label",85),S.Uc(2,"Fecha de vencimiento"),S.bc(),S.cc(3,"div",86),S.Xb(4,"input",89),S.bc(),S.bc()),2&e){var c=S.oc();S.Ib(4),S.vc("readonly",!c.perishable)}}var Qe,Ke=((Qe=function(e){a(o,e);var n=i(o);function o(e,t,c,a,i,r,s,d,u,b,p,m,f,g,v,h,_){var y;return l(this,o),(y=n.call(this,e,t,c,a,i,r,m)).fb=e,y.msg=t,y.api=c,y.router=a,y.translate=i,y.aRouter=r,y.branchSer=s,y.perSer=d,y.currSer=u,y.reporstSer=b,y.itemsSer=p,y.spinner=m,y.documents=f,y.shopSer=g,y.taxSer=v,y.docsSer=h,y.wareHouseServ=_,y.title="Productos/Servicios",y.aDocuments=[],y.ware_house=[],y.providers=[],y.currency=[],y.items=[],y.itemsResult=[],y.lines=[],y.timeLimits=[],y.paymentMethods=[],y.payments=[],y.meansPayment=[],y.taxBill=[],y.taxSales=[],y.pointsOfSale=[],y.selectedRow=!1,y.isCounted=!0,y.perishable=!1,y.rowIndex=-1,y.pathfile="",y.itemName="",y.source={localdata:y.lines,datatype:"array",datafields:[{name:"quantity",type:"number"},{name:"price",type:"number"},{name:"discount",type:"number"},{name:"vat",type:"number"},{name:"total",type:"number"},{name:"product_class_name",type:"string"},{name:"reason",type:"string"},{name:"sku",type:"string"},{name:"image",type:"string"},{name:"qr_code",type:"string"},{name:"product_name",type:"string"},{name:"notes",type:"string"},{name:"description_sales",type:"string"},{name:"shopping_description",type:"string"},{name:"barcode",type:"string"},{name:"rate_name",type:"string"},{name:"internal_code",type:"string"},{name:"state",type:"number"},{name:"sale_price",type:"number"},{name:"purchase_cost",type:"number"},{name:"tax_sales",type:"number"},{name:"tax_bill",type:"number"},{name:"stock_min",type:"number"},{name:"stock_max",type:"number"},{name:"tax_sales_id",type:"number"},{name:"brand_id",type:"number"},{name:"category_id",type:"number"},{name:"sub_category_id",type:"number"},{name:"percentage_gain",type:"number"},{name:"tax_bill_id",type:"number"},{name:"item_type_id",type:"number"},{name:"class_id",type:"number"},{name:"average_cost",type:"number"},{name:"recipe",type:"boolean"},{name:"perishable",type:"boolean"},{name:"id",type:"number"}]},y.dataAdapter=new jqx.dataAdapter(y.source),y.columns=[{text:"Cant",dataField:"quantity",width:60,align:"center",cellsAlign:"right"},{text:"Detalle",dataField:"product_name",minWidth:200,align:"center",cellsAlign:"center",editable:!1},{text:"Precio",dataField:"sale_price",width:100,align:"center",cellsAlign:"right",cellsFormat:"c2"},{text:"IVA",editable:!1,dataField:"tax_sales",width:50,align:"center",cellsAlign:"right"},{text:"Descuento",dataField:"discount",width:120,align:"right",cellsAlign:"right",cellsFormat:"c2"},{text:"Motivo Dtco",dataField:"reason",width:150,align:"right",cellsAlign:"right"},{text:"Total",dataField:"total",width:100,align:"right",cellsAlign:"right",cellsFormat:"c2",editable:!1}],y.editSettings={saveOnPageChange:!0,saveOnBlur:!0,saveOnSelectionChange:!0,cancelOnEsc:!0,saveOnEnter:!0,editSingleCell:!0,editOnDoubleClick:!0,editOnF2:!0},y.theme="bootstrap",y.source2={localdata:[],datafields:[{name:"CurrencyISO",type:"string"},{name:"Money",type:"string"},{name:"active",type:"number"},{name:"address",type:"string"},{name:"apply_notes",type:"boolean"},{name:"cash",type:"number"},{name:"code_ad",type:"string"},{name:"company_id",type:"number"},{name:"company_name",type:"string"},{name:"cufe",type:"string"},{name:"currency_id",type:"number"},{name:"customer_id",type:"number"},{name:"denomination",type:"string"},{name:"discount",type:"number"},{name:"dni",type:"string"},{name:"document_name",type:"string"},{name:"dv",type:"string"},{name:"electronic",type:"boolean"},{name:"email",type:"string"},{name:"expiration_date",type:"string"},{name:"id",type:"number"},{name:"image",type:"string"},{name:"invoice_date",type:"string"},{name:"invoice_name",type:"string"},{name:"invoice_nro",type:"string"},{name:"invoice_time",type:"string"},{name:"invoice_type_id",type:"number"},{name:"location",type:"string"},{name:"means_name",type:"string"},{name:"means_payment_id",type:"number"},{name:"merchant_registration",type:"string"},{name:"mobile",type:"string"},{name:"months",type:"number"},{name:"name_city",type:"string"},{name:"name_department",type:"string"},{name:"notes",type:"string"},{name:"path_report",type:"string"},{name:"payment_change",type:"string"},{name:"payment_method",type:"string"},{name:"payment_method_id",type:"number"},{name:"phone",type:"string"},{name:"plural_name",type:"string"},{name:"postal_code",type:"string"},{name:"prefix",type:"string"},{name:"prefix_doc",type:"string"},{name:"qrcode",type:"string"},{name:"singular_name",type:"string"},{name:"status",type:"number"},{name:"subtotal",type:"number"},{name:"tax_value",type:"number"},{name:"taxlevel",type:"string"},{name:"taxregime",type:"string"},{name:"term_value",type:"number"},{name:"time_limit",type:"string"},{name:"total",type:"number"},{name:"total_allowance",type:"number"},{name:"total_charges",type:"number"},{name:"typeorganization",type:"string"},{name:"username",type:"string"},{name:"voucher_name",type:"string"},{name:"zipkey",type:"string"}],datatype:"array"},y.dataAdapter2=new jqx.dataAdapter(y.source2),y.cellClass=function(e,t,c){var a=y.customGrid.getrowdata(e);return console.log(a),1==a.status?"fas-fa-ok-thumbs fa-cursor":2==a.status?"fas-fa-error fa-cursor":0==a.electronic?"fas-fa-ok fa-cursor":"fas-fa-warning fa-cursor"},y.columns2=[{columngroup:"Actions",text:"",sortable:!1,filterable:!1,editable:!1,align:"center",groupable:!1,draggable:!1,resizable:!1,datafield:"#mail_#",columntype:"text",width:32,cellsrenderer:function(e,t,c){return'<span><i class="fas fa-envelope-open-text fa-cursor fas-fa-mail"></span>'}},{columngroup:"Actions",text:"",sortable:!1,filterable:!1,editable:!1,align:"center",groupable:!1,draggable:!1,resizable:!1,datafield:"#pdf_#",columntype:"text",width:32,cellsrenderer:function(e,t,c){return'<span><i class="fas fa-file-pdf fa-cursor fas-fa-pdf"></i></span>'}},{columngroup:"Actions",text:"",sortable:!1,filterable:!1,editable:!1,align:"center",groupable:!1,draggable:!1,resizable:!1,datafield:"#send_#",columntype:"text",width:32,cellsrenderer:function(e,t,c){var a=y.customGrid.getrowdata(e);return 1==a.status?'<i class="fas fa-thumbs-up fas-fa-ok-thumbs fa-cursor"></i>':2==a.status?'<i class="fas fa-bug fas-fa-error fa-cursor"></i>':a.electronic?'<i class="fas fa-exclamation-circle fas-fa-warning fa-cursor">':'<i class="fas fa-check fas-fa-ok fa-cursor"></i>'}},{text:"Factura N\xba.",dataField:"invoice_nro",width:80,cellsalign:"right"},{text:"Pref",dataField:"prefix",width:50},{text:"Adquiriente",dataField:"company_name",minwidth:350},{text:"Documento",dataField:"dni",width:90,cellsalign:"right"},{text:"Total",dataField:"total",cellsalign:"right",width:120,cellsformat:"c2"},{text:"Moneda",dataField:"Money",width:90},{text:"Fecha",dataField:"invoice_date",width:90},{text:"Estado",dataField:"active",width:90,cellsrenderer:function(e,t,c){switch(c){case 1:return'<p class="active-green">Activa</p>';case 2:return'<p class="active-red">Anulada</p>';default:return'<p class="active-orange">Inactiva</p>'}}}],y}return t(o,[{key:"invalidName",get:function(){return this.customForm.get("invoice_nro").invalid&&this.customForm.get("invoice_nro").touched}},{key:"invalidBranch",get:function(){return this.customForm.get("branch_id").invalid&&this.customForm.get("branch_id").touched}},{key:"ngOnInit",value:function(){var e=this;e.uid=e.aRouter.snapshot.paramMap.get("id"),e.showSpinner(),e.uid?e.customForm=this.fb.group({provider_id:new u.f({value:"0",disabled:!0}),warehouse_id:new u.f({value:"0",disabled:!0}),point_of_sale_id:new u.f({value:"0",disabled:!0}),payment_id:new u.f({value:"0",disabled:!0}),invoice_nro:["0"],discount:[0],vat:[0],total:[0],admission_date:[""],freight:[0],rfte:[0],notes:[""],pay_day:[""],tax_sale_id:[0],tax_bill_id:[0],product_id:[0],invoice_id:[0],gain:[0],batch:[""],fabrication_date:[""],expiration_date:[""],percentage_gain:["0"],vat_included:[!1],amount:[0],unit_cost:[0],unit_price:[0],total_cost:[0],sale_price:[0],quantity:[0],sub_total:[0]}):(e.customForm=this.fb.group({admission_date:[(new Date).toISOString().split("T")[0],[u.y.required]],discount:[0],freight:[0],rfte:[0],invoice_nro:["",[u.y.required,u.y.minLength(2)]],vat:[0],notes:[""],pay_day:[(new Date).toISOString().split("T")[0],[u.y.required]],payment_id:["",[u.y.required]],warehouse_id:["0",[u.y.required]],point_of_sale_id:["0",[u.y.required]],provider_id:["0",[u.y.required]],sub_total:[0,[u.y.required]],total:[0,[u.y.required]],tax_sale_id:[0],tax_bill_id:[0],product_id:[0],invoice_id:[0],gain:[0],batch:[""],fabrication_date:[""],expiration_date:[""],percentage_gain:["0"],vat_included:[!1],amount:[0],unit_cost:[0],unit_price:[0],total_cost:[0],sale_price:[0],quantity:[0]}),e.onRefresh());var t=e.customForm;e.wareHouseServ.getData({}).subscribe(function(t){e.ware_house=t}),e.docsSer.getPaymentMethods({}).subscribe(function(t){e.payments=t,t.length>0&&e.customForm.get("payment_id").setValue(t[0].id)}),e.branchSer.getPointsOfSale({}).subscribe(function(t){e.pointsOfSale=t,t.length>0&&e.customForm.get("point_of_sale_id").setValue(t[0].id)}),e.perSer.getProviders({}).subscribe(function(t){e.providers=t}),e.taxSer.getData({isVat:!0}).subscribe(function(c){e.taxBill=c,e.taxSales=c,c.length>0&&(t.get("tax_bill_id").setValue(c[0].id),t.get("tax_sale_id").setValue(c[0].id),e.taxBillSelect=c[0],e.taxSaleSelect=c[0])}),c(r(o.prototype),"ngOnInit",this).call(this)}},{key:"ngAfterViewInit",value:function(){}},{key:"loadData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=this,c=t.customForm;t.editing=!0,t.shopSer.getData({uid:e}).subscribe(function(e){c.get("invoice_nro").setValue(e[0].invoice_nro),c.get("total").setValue(e[0].total),c.get("provider_id").setValue(e[0].provider_id),c.get("admission_date").setValue(e[0].admission_date),c.get("discount").setValue(e[0].discount),c.get("freight").setValue(e[0].freight),c.get("rfte").setValue(e[0].rfte),c.get("vat").setValue(e[0].vat),c.get("notes").setValue(e[0].notes),c.get("pay_day").setValue(e[0].pay_day),c.get("payment_id").setValue(e[0].payment_id),c.get("warehouse_id").setValue(e[0].warehouse_id),c.get("point_of_sale_id").setValue(e[0].point_of_sale_id),c.get("sub_total").setValue(e[0].sub_total),t.onRefresh()})}},{key:"onChangeUnitPrice",value:function(){this.onPurchaseData()}},{key:"onChangeSalePrice",value:function(){this.onSalesData()}},{key:"onClickItem",value:function(e){var t=this,c=t.customForm,a=e;if(2!==a.class_id){t.perishable=a.perishable;var n=parseFloat(a.purchase_cost.toString())/parseFloat(a.tax_bill_rate.toString());c.get("amount").setValue(1),c.get("unit_price").setValue(n),c.get("tax_bill_id").setValue(a.tax_bill_id),c.get("tax_sale_id").setValue(a.tax_sales_id);var i=parseFloat((n*a.percentage_gain/100).toString())+n;a.sale_price>i&&(i=a.sale_price),c.get("sale_price").setValue(i),t.itemSelect=a,t.itemName=a.product_name,t.onChageTaxBill(a.tax_bill_id),t.onChangeTaxSale(a.tax_sales_id)}else t.msg.toastMessage("","El item seleccionado no maneja inventarios.",4),t.onClearForm()}},{key:"onClearFilter",value:function(){this.onClearForm(),this.focusElement.nativeElement.value="",this.itemsResult=this.items}},{key:"onRefresh",value:function(){var e=this;e.showSpinner("Cargando listado de productos."),e.itemsSer.getDataSales({}).subscribe(function(t){e.items=t,e.hideSpinner(),e.itemsResult=e.items},function(){return e.hideSpinner()}),e.onClearForm()}},{key:"onSearchProducts",value:function(e){var t=this;t.showSpinner(),t.onClearForm(),0===t.items.length&&e.length>0?t.itemsSer.getDataSales({}).subscribe(function(c){t.items=c,t.hideSpinner(),t.itemsResult=t.items.filter(function(t){return t.product_name.toLowerCase().indexOf(e.toLowerCase())>=0})}):e.length>0?(t.itemsResult=t.items.filter(function(t){return t.product_name.toLowerCase().indexOf(e.toLowerCase())>=0}),t.hideSpinner()):(t.itemsResult=t.items,t.hideSpinner())}},{key:"onClearForm",value:function(){var e=this,t=e.customForm;e.itemSelect=null,e.itemName="",t.get("amount").setValue(0),t.get("unit_cost").setValue(0),t.get("unit_price").setValue(0),t.get("total_cost").setValue(0),t.get("sale_price").setValue(0),t.get("gain").setValue(0),t.get("expiration_date").setValue(""),t.get("fabrication_date").setValue(""),e.taxBill.length>0&&(t.get("tax_bill_id").setValue(e.taxBill[0].id),t.get("tax_sale_id").setValue(e.taxSales[0].id),e.onChageTaxBill(e.taxBill[0].id),e.onChangeTaxSale(e.taxSales[0].id))}},{key:"onChageTaxBill",value:function(e){this.taxBillSelect=this.taxBill.find(function(t){return t.id===e}),this.onPurchaseData()}},{key:"onChageAmount",value:function(e){this.onPurchaseData()}},{key:"onChageIncluded",value:function(e){this.onPurchaseData()}},{key:"onChangeTaxSale",value:function(e){this.taxSaleSelect=this.taxSales.find(function(t){return t.id===e}),this.onSalesData()}},{key:"onSalesData",value:function(){var e,t,c=this.customForm,a=parseFloat(c.get("unit_price").value),n=parseFloat(c.get("sale_price").value),i=parseFloat(this.taxBillSelect.decimal_rate.toString()),o=0;o=(t=(e=n/parseFloat(this.taxSaleSelect.decimal_rate.toString()))-(1==c.get("vat_included").value?a/i:a))/e*100,c.get("gain").setValue(t),c.get("percentage_gain").setValue("".concat(o.toFixed(2)," %"))}},{key:"onPurchaseData",value:function(){var e=this.customForm,t=parseFloat(e.get("amount").value),c=parseFloat(e.get("unit_price").value),a=parseFloat(this.taxBillSelect.decimal_rate.toString()),n=a>0?c*a:c,i=n*t;1==e.get("vat_included").value?(e.get("unit_cost").setValue(c),e.get("total_cost").setValue(c*t)):(e.get("unit_cost").setValue(n),e.get("total_cost").setValue(i)),t>0&&this.onSalesData()}},{key:"onSave",value:function(){var e=this,t=e.customForm,c=e.uid,a=e.itemSelect,n=t.getRawValue();return a?parseFloat(n.amount)<=0||parseFloat(n.sale_price)<=0||parseFloat(n.unit_cost)<=0?(e.msg.toastMessage("","Hay un error en las cantidades.",4),!1):t.invalid?(e.msg.toastMessage("","Hay campos sin llenar.",4),!1):void(c?(n.invoice_id=c,n.product_id=a.id,e.onSaveDetail(n)):(n.product_id=a.id,e.showSpinner("Guardando factura"),e.api.post("/shopping/create",n).subscribe(function(t){if(e.hideSpinner(),t.success){var c=t.records;e.uid=c.id,e.editing=!0,n.invoice_id=c.id,e.onSaveDetail(n)}else e.msg.toastMessage("",t.message,4)},function(t){e.hideSpinner()}))):(e.msg.toastMessage("","No ha seleccionado un producto.",4),!1)}},{key:"onSaveDetail",value:function(e){var t=this;t.showSpinner("Guardando detalle"),t.itemSelect.perishable||(e.batch=null,e.fabrication_date=null,e.expiration_date=null);var c={records:JSON.stringify(e)};t.api.post("/shopping/create/detail",c).subscribe(function(e){e.success?(t.msg.toastMessage("","Se ha guardado correctamente el producto en el inventario."),t.onClearForm()):t.msg.toastMessage("",e.message,4),t.hideSpinner()},function(e){t.hideSpinner()})}},{key:"getWidth",value:function(){return"100%"}},{key:"onClose",value:function(){this.goRoute("shopping/invoices")}}]),o}(_e.a)).\u0275fac=function(e){return new(e||Qe)(S.Wb(u.e),S.Wb(w.b),S.Wb(w.a),S.Wb(C.c),S.Wb(x.d),S.Wb(C.a),S.Wb(X.a),S.Wb(D.b),S.Wb(D.a),S.Wb(ye.a),S.Wb(N.e),S.Wb(y.c),S.Wb(de.a),S.Wb(ue.a),S.Wb(D.f),S.Wb(de.a),S.Wb(xe.a))},Qe.\u0275cmp=S.Qb({type:Qe,selectors:[["app-shopping"]],viewQuery:function(e,t){var c;1&e&&(S.Zc(Ce,1),S.Zc(Se,1),S.Zc(Ie,1),S.Zc(ke,1),S.Zc(we,1),S.Zc(Oe,1),S.Zc(Ue,1),S.Zc(Fe,1)),2&e&&(S.Hc(c=S.nc())&&(t.customGrid=c.first),S.Hc(c=S.nc())&&(t.myDataTable=c.first),S.Hc(c=S.nc())&&(t.searchField=c.first),S.Hc(c=S.nc())&&(t.focusElement=c.first),S.Hc(c=S.nc())&&(t.amountElement=c.first),S.Hc(c=S.nc())&&(t.cashele=c.first),S.Hc(c=S.nc())&&(t.searchbar=c.first),S.Hc(c=S.nc())&&(t.myTabs=c.first))},features:[S.Fb],decls:154,vars:39,consts:[[1,"card"],[1,"card-header"],[1,"card-body"],[3,"formGroup"],[1,"container-fluid","padding-top-bottom"],[1,"row"],[1,"col-md-4"],[1,"form-group"],[4,"ngIf"],["type","text","nbinput","","fullWidth","","formControlName","invoice_nro","required","","autofocus","","placement","bottom","ngbTooltip","N\xba. de la factura",1,"form-control",3,"readOnly"],["focusElement",""],[1,"col-md-8"],["fullWidth","","formControlName","provider_id","required","","placement","bottom","ngbTooltip","Proveedor"],["value","0"],[3,"value",4,"ngFor","ngForOf"],[1,"col-md-6"],["fullWidth","","formControlName","point_of_sale_id","required","","placement","bottom","ngbTooltip","Punto de venta"],["fullWidth","","formControlName","warehouse_id","required","","placement","bottom","ngbTooltip","Bodega"],["class","row",4,"ngIf"],["currencyMask","","formControlName","freight","nbinput","","fullWidth","",1,"form-control",3,"readOnly"],["currencyMask","","formControlName","rfte","nbinput","","fullWidth","",1,"form-control",3,"readOnly"],["currencyMask","","formControlName","total","nbinput","","fullWidth","","required","","ngbTooltip","Total",1,"form-control",3,"readOnly"],[1,"col-md-7"],[1,"col"],[1,"page-search-input","form-group"],[1,"input-group"],["type","search","id","searchbar","placeholder","B\xfasqueda","autofocus","",1,"form-control","rounded-right","form-control-lg","shadow","pl-2",3,"keyup.enter"],["searchField",""],[1,"input-group-append"],["type","button",1,"btn","btn-primary","search-btn","rounded","space-right",3,"click"],[1,"d-none","d-sm-block"],[1,"fas","fa-search"],["type","button","ngbTooltip","Crear nuevo producto",1,"btn","btn-success","space-right","radius-button"],[1,"fas","fa-plus","fas-fa-22"],["type","button","ngbTooltip","Refrescar",1,"btn","btn-info","space-right","radius-button",3,"click"],[1,"fas","fa-sync","fas-fa-22"],["type","button","ngbTooltip","Limpiar",1,"btn","btn-danger","space-right","radius-button",3,"click"],[1,"fas","fa-broom","fas-fa-22"],["type","button","ngbTooltip","Cerrar",1,"btn","btn-danger","radius-button",3,"click"],[1,"fas","fa-times","fas-fa-22"],[1,"col","product-name-header"],[1,"col","card-col"],[1,"card-columns"],["class","card card-sales",3,"click",4,"ngFor","ngForOf"],[1,"col-md-5","card-col"],[1,"form-group","row"],["for","inputQuantity",1,"col-sm-3","col-form-label"],[1,"col-sm-9"],["type","number","id","inputQuantity","placeholder","Cantidad","formControlName","amount",1,"form-control",3,"change"],["amountElement",""],["for","selectBill",1,"col-sm-3","col-form-label"],["id","selectBill","formControlName","tax_bill_id",3,"change"],[1,"form-check"],["type","checkbox","id","ckInclude","formControlName","vat_included",1,"form-check-input",3,"change"],["for","ckInclude",1,"form-check-label"],["for","inputAmount1",1,"col-sm-3","col-form-label"],["formControlName","unit_price","currencyMask","","type","text","id","inputAmount1","ngbTooltip","Costo unitario sin impuesto","placeholder","Costo unitario",1,"form-control",3,"keyup"],[1,"col-sm-6"],["formControlName","unit_cost","currencyMask","","type","text","id","inputAmount","ngbTooltip","Costo unitario con impuesto","placeholder","Costo unitario","readonly","",1,"form-control","radius-button","total"],["formControlName","total_cost","type","text","currencyMask","","placeholder","Total","readonly","",1,"form-control","radius-button","total"],["for","selectSale",1,"col-sm-4","col-form-label"],[1,"col-sm-8"],["id","selectSale","formControlName","tax_sale_id",3,"change"],["for","salePrice",1,"col-sm-4","col-form-label"],["formControlName","sale_price","currencyMask","","type","text","id","salePrice","placement","bottom","ngbTooltip","Precio de venta con impuesto incluido","placeholder","Precio de venta",1,"form-control",3,"keyup"],[1,"col-sm-4","col-form-label"],["readonly","","formControlName","gain","currencyMask","","type","text","placement","bottom","ngbTooltip","Ganancia posible","placeholder","Ganancia posible",1,"form-control"],["readonly","","formControlName","percentage_gain","type","text","placement","bottom","ngbTooltip","Procentaje Ganancia posible",1,"form-control"],["class","form-group row",4,"ngIf"],["type","button",1,"btn","radius-button","btn-primary","space-right","radius-button","btn-block",3,"disabled","click"],[1,"fas","fa-save","fas-fa-22"],[2,"color","white"],[1,"asterisk"],[3,"value"],["fullWidth","","formControlName","payment_id","required",""],["type","date","formControlName","admission_date","nbinput","","fullWidth","","required","",1,"form-control",3,"readOnly"],["type","date","formControlName","pay_day","nbinput","","fullWidth","","required","",1,"form-control",3,"readOnly"],["currencyMask","","formControlName","sub_total","nbinput","","fullWidth","","required","",1,"form-control",3,"readOnly"],["currencyMask","","formControlName","discount","nbinput","","fullWidth","",1,"form-control",3,"readOnly"],["currencyMask","","formControlName","vat","nbinput","","fullWidth","",1,"form-control",3,"readOnly"],["formControlName","notes","nbinput","","fullWidth","",1,"form-control",3,"readOnly"],[1,"card","card-sales",3,"click"],["fallimg","product",1,"img-product","card-img-top",3,"src"],[1,"price"],[1,"product-name"],[1,"col-sm-5","col-form-label"],[1,"col-sm-7"],["formControlName","batch","type","text",1,"form-control",3,"readonly"],["formControlName","fabrication_date","type","date",1,"form-control",3,"readonly"],["formControlName","expiration_date","type","date",1,"form-control",3,"readonly"]],template:function(e,t){if(1&e){var c=S.dc();S.cc(0,"div",0),S.cc(1,"div",1),S.Uc(2),S.pc(3,"uppercase"),S.pc(4,"translate"),S.bc(),S.cc(5,"div",2),S.cc(6,"form",3),S.cc(7,"div",4),S.cc(8,"div",5),S.cc(9,"div",6),S.cc(10,"div",7),S.Sc(11,Pe,5,3,"label",8),S.Xb(12,"input",9,10),S.bc(),S.bc(),S.cc(14,"div",11),S.cc(15,"div",7),S.Sc(16,Me,5,3,"label",8),S.cc(17,"ng-select",12),S.cc(18,"ng-option",13),S.Uc(19,"Seleccionar proveedor"),S.bc(),S.Sc(20,We,2,4,"ng-option",14),S.bc(),S.bc(),S.bc(),S.bc(),S.cc(21,"div",5),S.cc(22,"div",15),S.cc(23,"div",7),S.Sc(24,Ne,5,3,"label",8),S.cc(25,"ng-select",16),S.cc(26,"ng-option",13),S.Uc(27,"Seleccionar punto de venta"),S.bc(),S.Sc(28,qe,2,2,"ng-option",14),S.bc(),S.bc(),S.bc(),S.cc(29,"div",15),S.cc(30,"div",7),S.Sc(31,Xe,2,0,"label",8),S.cc(32,"ng-select",17),S.cc(33,"ng-option",13),S.Uc(34,"Seleccionar una bodega"),S.bc(),S.Sc(35,De,2,2,"ng-option",14),S.bc(),S.bc(),S.bc(),S.bc(),S.Sc(36,Te,26,12,"div",18),S.Sc(37,Ae,19,6,"div",18),S.cc(38,"div",5),S.cc(39,"div",6),S.cc(40,"div",7),S.Sc(41,Ee,2,0,"label",8),S.Xb(42,"input",19),S.bc(),S.bc(),S.cc(43,"div",6),S.cc(44,"div",7),S.Sc(45,Re,2,0,"label",8),S.Xb(46,"input",20),S.bc(),S.bc(),S.cc(47,"div",6),S.cc(48,"div",7),S.Sc(49,Be,5,3,"label",8),S.Xb(50,"input",21),S.bc(),S.bc(),S.bc(),S.Sc(51,Ge,6,1,"div",18),S.cc(52,"div",5),S.cc(53,"div",22),S.cc(54,"div",5),S.cc(55,"div",23),S.cc(56,"div",24),S.cc(57,"fieldset"),S.cc(58,"div",25),S.cc(59,"input",26,27),S.mc("keyup.enter",function(){S.Lc(c);var e=S.Ic(60);return t.onSearchProducts(e.value)}),S.bc(),S.cc(61,"div",28),S.cc(62,"button",29),S.mc("click",function(){S.Lc(c);var e=S.Ic(60);return t.onSearchProducts(e.value)}),S.Xb(63,"span",30),S.Xb(64,"i",31),S.bc(),S.cc(65,"button",32),S.Xb(66,"i",33),S.bc(),S.cc(67,"button",34),S.mc("click",function(){return t.onRefresh()}),S.Xb(68,"i",35),S.bc(),S.cc(69,"button",36),S.mc("click",function(){return t.onClearFilter()}),S.Xb(70,"i",37),S.bc(),S.cc(71,"button",38),S.mc("click",function(){return t.onClose()}),S.Xb(72,"i",39),S.bc(),S.bc(),S.bc(),S.bc(),S.bc(),S.bc(),S.bc(),S.cc(73,"div",5),S.cc(74,"div",40),S.cc(75,"label"),S.cc(76,"span"),S.Uc(77),S.bc(),S.bc(),S.bc(),S.bc(),S.cc(78,"div",5),S.cc(79,"div",41),S.cc(80,"div",42),S.Sc(81,Le,8,5,"div",43),S.bc(),S.bc(),S.bc(),S.bc(),S.cc(82,"div",44),S.cc(83,"div",5),S.cc(84,"div",23),S.cc(85,"div",0),S.cc(86,"div",1),S.Uc(87," Datos de compra "),S.bc(),S.cc(88,"div",2),S.cc(89,"div",45),S.cc(90,"label",46),S.Uc(91,"Cantidad"),S.bc(),S.cc(92,"div",47),S.cc(93,"input",48,49),S.mc("change",function(e){return t.onChageAmount(e)}),S.bc(),S.bc(),S.bc(),S.cc(95,"div",45),S.cc(96,"label",50),S.Uc(97,"Impuesto"),S.bc(),S.cc(98,"div",47),S.cc(99,"ng-select",51),S.mc("change",function(e){return t.onChageTaxBill(e)}),S.Sc(100,He,2,3,"ng-option",14),S.bc(),S.bc(),S.bc(),S.cc(101,"div",45),S.cc(102,"div",52),S.cc(103,"input",53),S.mc("change",function(e){return t.onChageIncluded(e)}),S.bc(),S.cc(104,"label",54),S.Uc(105," Incluido "),S.bc(),S.bc(),S.bc(),S.cc(106,"div",45),S.cc(107,"label",55),S.Uc(108,"Costo U."),S.bc(),S.cc(109,"div",47),S.cc(110,"input",56),S.mc("keyup",function(){return t.onChangeUnitPrice()}),S.bc(),S.bc(),S.bc(),S.cc(111,"div",45),S.cc(112,"div",57),S.Xb(113,"input",58),S.bc(),S.cc(114,"div",57),S.Xb(115,"input",59),S.bc(),S.bc(),S.bc(),S.bc(),S.bc(),S.bc(),S.cc(116,"div",5),S.cc(117,"div",23),S.cc(118,"div",0),S.cc(119,"div"),S.Uc(120," Datos de venta "),S.bc(),S.cc(121,"div"),S.cc(122,"div",45),S.cc(123,"label",60),S.Uc(124,"Impuesto"),S.bc(),S.cc(125,"div",61),S.cc(126,"ng-select",62),S.mc("change",function(e){return t.onChangeTaxSale(e)}),S.Sc(127,ze,2,3,"ng-option",14),S.bc(),S.bc(),S.bc(),S.cc(128,"div",45),S.cc(129,"label",63),S.Uc(130,"Precio de venta"),S.bc(),S.cc(131,"div",61),S.cc(132,"input",64),S.mc("keyup",function(){return t.onChangeSalePrice()}),S.bc(),S.bc(),S.bc(),S.cc(133,"div",45),S.cc(134,"label",65),S.Uc(135,"Ganancia posible"),S.bc(),S.cc(136,"div",61),S.Xb(137,"input",66),S.bc(),S.bc(),S.cc(138,"div",45),S.cc(139,"label",65),S.Uc(140,"% Ganancia"),S.bc(),S.cc(141,"div",61),S.Xb(142,"input",67),S.bc(),S.bc(),S.Sc(143,Ze,5,1,"div",68),S.Sc(144,je,5,1,"div",68),S.Sc(145,$e,5,1,"div",68),S.cc(146,"div",7),S.cc(147,"button",69),S.mc("click",function(){return t.onSave()}),S.Xb(148,"i",70),S.Uc(149),S.pc(150,"translate"),S.bc(),S.bc(),S.bc(),S.bc(),S.bc(),S.bc(),S.bc(),S.bc(),S.bc(),S.bc(),S.bc(),S.bc(),S.cc(151,"ngx-spinner"),S.cc(152,"p",71),S.Uc(153),S.bc(),S.bc()}2&e&&(S.Ib(2),S.Wc(" ",S.qc(3,33,S.qc(4,35,"general.createEdit"))," DETALLE DE LA FACTURA "),S.Ib(4),S.vc("formGroup",t.customForm),S.Ib(5),S.vc("ngIf",!t.editing),S.Ib(1),S.Ob("status-danger",t.invalidName)("is-invalid",t.invalidName),S.vc("readOnly",t.editing),S.Ib(4),S.vc("ngIf",!t.editing),S.Ib(4),S.vc("ngForOf",t.providers),S.Ib(4),S.vc("ngIf",!t.editing),S.Ib(4),S.vc("ngForOf",t.pointsOfSale),S.Ib(3),S.vc("ngIf",!t.editing),S.Ib(4),S.vc("ngForOf",t.ware_house),S.Ib(1),S.vc("ngIf",!t.editing),S.Ib(1),S.vc("ngIf",!t.editing),S.Ib(4),S.vc("ngIf",!t.editing),S.Ib(1),S.vc("readOnly",t.editing),S.Ib(3),S.vc("ngIf",!t.editing),S.Ib(1),S.vc("readOnly",t.editing),S.Ib(3),S.vc("ngIf",!t.editing),S.Ib(1),S.vc("readOnly",t.editing),S.Ib(1),S.vc("ngIf",!t.editing),S.Ib(26),S.Wc(" ",t.itemName," "),S.Ib(4),S.vc("ngForOf",t.itemsResult),S.Ib(19),S.vc("ngForOf",t.taxBill),S.Ib(27),S.vc("ngForOf",t.taxSales),S.Ib(16),S.vc("ngIf",t.perishable),S.Ib(1),S.vc("ngIf",t.perishable),S.Ib(1),S.vc("ngIf",t.perishable),S.Ib(2),S.vc("disabled",!t.customForm.valid),S.Ib(2),S.Wc(" ",S.qc(150,37,"buttons.save")," "),S.Ib(4),S.Wc(" ",t.maskSpinner," "))},directives:[u.z,u.q,u.h,d.n,u.c,u.p,u.g,u.w,v.N,g.a,g.d,d.m,h.a,u.u,u.a,y.a],pipes:[d.v,x.c,d.d],styles:[".create-customer[_ngcontent-%COMP%]{background-color:#a50721!important;color:#fff!important;font-weight:700!important}.search-custom[_ngcontent-%COMP%]{background:#fff!important;border-radius:10px;box-shadow:0 2px 8px 0 rgba(50,50,50,.322);padding-bottom:5px!important}.card-col[_ngcontent-%COMP%]{max-height:870px;min-height:200px;overflow:auto}.discounts[_ngcontent-%COMP%]{color:green;font-weight:700}.total[_ngcontent-%COMP%], .total-bg[_ngcontent-%COMP%]{color:red;font-weight:700}.total-bg[_ngcontent-%COMP%]{font-size:24px}.vat[_ngcontent-%COMP%]{color:#00f;font-weight:700}.card-sales[_ngcontent-%COMP%]{border:2px solid hsla(0,0%,100%,.247);box-shadow:0 2px 6px 0 rgba(50,50,50,.322);margin:5px!important;min-height:138px!important}.card-sales[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]{color:red;font-size:16px;font-weight:700;margin-bottom:auto;margin-top:auto;padding-bottom:4px;padding-top:4px;text-align:right}.card-sales[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{padding:4px}.card-sales[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]:hover{background-color:red;color:#fff}.card-sales[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]:hover   .price[_ngcontent-%COMP%]{color:#fff}.card-sales[_ngcontent-%COMP%]   .product-name[_ngcontent-%COMP%]{font-size:12px;font-weight:700;margin-bottom:0!important;text-align:center;text-transform:uppercase}.card-sales[_ngcontent-%COMP%]   .img-product[_ngcontent-%COMP%]{display:block;margin:auto;max-width:62px}.card-sales[_ngcontent-%COMP%]   .img-product[_ngcontent-%COMP%]:hover{border-radius:10px;box-shadow:0 2px 8px 0 rgba(50,50,50,.75)}.card-sales[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding-bottom:1px!important;padding-left:4px;padding-right:4px;padding-top:1px!important}.card-sales[_ngcontent-%COMP%]:hover{border:2px solid rgba(23,58,253,.12156862745098039);cursor:pointer}.card-sales[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]:hover{background-color:#173afd;color:#fff}.product-name-header[_ngcontent-%COMP%]{background-color:#639;border:2px solid hsla(0,0%,100%,.5137254901960784);border-radius:25px;color:#fff;font-size:16px;font-weight:700;height:32px;padding:4px;text-align:center;word-break:break-all}"]}),Qe),Je=["customGrid"],Ye=["myDataTable"],et=["searchField"],tt=["focusElement"],ct=["amountElement"],at=["cashele"],nt=["searchbar"],it=["myTabs"];function ot(e,t){if(1&e){var c=S.dc();S.cc(0,"div",59),S.mc("click",function(){S.Lc(c);var e=t.$implicit;return S.oc().onClickItem(e)}),S.Xb(1,"img",60),S.cc(2,"div",2),S.cc(3,"h6",61),S.Uc(4),S.pc(5,"currency"),S.bc(),S.cc(6,"p",62),S.Uc(7),S.bc(),S.bc(),S.bc()}if(2&e){var a=t.$implicit;S.Ib(1),S.vc("src",a.image,S.Oc),S.Ib(3),S.Wc(" ",S.qc(5,3,a.sale_price),""),S.Ib(3),S.Vc(a.product_name)}}function rt(e,t){if(1&e&&(S.cc(0,"ng-option",63),S.Uc(1),S.bc()),2&e){var c=t.$implicit;S.vc("value",c.id),S.Ib(1),S.Xc(" ",c.name_taxe," - ",c.rate_value," % ")}}function lt(e,t){if(1&e&&(S.cc(0,"ng-option",63),S.Uc(1),S.bc()),2&e){var c=t.$implicit;S.vc("value",c.id),S.Ib(1),S.Xc(" ",c.name_taxe," - ",c.rate_value," % ")}}function st(e,t){if(1&e&&(S.cc(0,"div",31),S.cc(1,"label",64),S.Uc(2,"Lote #"),S.bc(),S.cc(3,"div",65),S.Xb(4,"input",66),S.bc(),S.bc()),2&e){var c=S.oc();S.Ib(4),S.vc("readonly",!c.perishable)}}function dt(e,t){if(1&e&&(S.cc(0,"div",31),S.cc(1,"label",64),S.Uc(2,"Fecha de fabricaci\xf3n"),S.bc(),S.cc(3,"div",65),S.Xb(4,"input",67),S.bc(),S.bc()),2&e){var c=S.oc();S.Ib(4),S.vc("readonly",!c.perishable)}}function ut(e,t){if(1&e&&(S.cc(0,"div",31),S.cc(1,"label",64),S.Uc(2,"Fecha de vencimiento"),S.bc(),S.cc(3,"div",65),S.Xb(4,"input",68),S.bc(),S.bc()),2&e){var c=S.oc();S.Ib(4),S.vc("readonly",!c.perishable)}}var bt,pt,mt,ft=[{path:"",component:I,children:[{path:"invoices",component:le},{path:"invoices/create",component:Ke},{path:"invoices/edit/:id",component:he},{path:"invoices/create/detail/:id",component:Ke},{path:"invoices/detail/edit/:id",component:(bt=function(e){a(o,e);var n=i(o);function o(e,t,c,a,i,r,s,d,u,b,p,m,f){var g;return l(this,o),(g=n.call(this,e,t,c,a,i,r,b)).fb=e,g.msg=t,g.api=c,g.router=a,g.translate=i,g.aRouter=r,g.currSer=s,g.reporstSer=d,g.itemsSer=u,g.spinner=b,g.documents=p,g.shopSer=m,g.taxSer=f,g.title="Productos/Servicios",g.items=[],g.itemsResult=[],g.lines=[],g.taxBill=[],g.taxSales=[],g.perishable=!1,g.itemName="",g.oldItem=[],g.customForm=g.fb.group({amount:[""],batch:[""],expiration_date:[""],fabrication_date:[""],product_name:[""],sale_price:[""],tax_bill_id:[""],tax_sale_id:[""],total_cost:[""],unit_cost:[""],unit_price:[""],gain:[""],percentage_gain:[""],vat_included:[""]}),g}return t(o,[{key:"ngOnInit",value:function(){var e=this,t=this;t.showSpinner(),t.taxSer.getData({isVat:!0}).subscribe(function(a){t.taxBill=a,t.taxSales=a,c(r(o.prototype),"ngOnInit",e).call(e)})}},{key:"ngAfterViewInit",value:function(){}},{key:"loadData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=this;t.editing=!0,t.shopSer.getDetailID(e).subscribe(function(e){t.oldItem=e,t.onClearForm(),t.onRefresh()})}},{key:"onChangeUnitPrice",value:function(){this.onPurchaseData()}},{key:"onChangeSalePrice",value:function(){this.onSalesData()}},{key:"onClickItem",value:function(e){var t=this,c=t.customForm,a=e,n=t.translate;2!==a.class_id?te.a.fire({title:"Cambiar item",text:"Est\xe1 a punto de cambiar el ITEM, \xbfDesea continuar.?",icon:"question",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:n.instant("buttons.yes"),cancelButtonText:n.instant("buttons.not")}).then(function(e){if(e.value){t.perishable=a.perishable;var n=parseFloat(a.purchase_cost.toString())/parseFloat(a.tax_bill_rate.toString());c.get("amount").setValue(1),c.get("unit_price").setValue(n),c.get("tax_bill_id").setValue(a.tax_bill_id),c.get("tax_sale_id").setValue(a.tax_sales_id);var i=parseFloat((n*a.percentage_gain/100).toString())+n;a.sale_price>i&&(i=a.sale_price),c.get("sale_price").setValue(i),t.itemSelect=a,t.itemName=a.product_name,t.onChageTaxBill(a.tax_bill_id),t.onChangeTaxSale(a.tax_sales_id)}}):(t.msg.toastMessage("","El item seleccionado no maneja inventarios.",4),t.onClearForm())}},{key:"onClearFilter",value:function(){this.onClearForm(),this.searchField.nativeElement.value="",this.itemsResult=this.items}},{key:"onRefresh",value:function(){var e=this;e.showSpinner("Cargando listado de productos."),e.itemsSer.getDataSales({}).subscribe(function(t){e.items=t,e.hideSpinner(),e.itemsResult=e.items},function(){return e.hideSpinner()})}},{key:"onSearchProducts",value:function(e){var t=this;t.showSpinner(),t.onClearForm(),0===t.items.length&&e.length>0?t.itemsSer.getDataSales({}).subscribe(function(c){t.items=c,t.hideSpinner(),t.itemsResult=t.items.filter(function(t){return t.product_name.toLowerCase().indexOf(e.toLowerCase())>=0})}):e.length>0?(t.itemsResult=t.items.filter(function(t){return t.product_name.toLowerCase().indexOf(e.toLowerCase())>=0}),t.hideSpinner()):(t.itemsResult=t.items,t.hideSpinner())}},{key:"onClearForm",value:function(){var e=this,t=e.customForm,c=e.oldItem;e.itemSelect=null,e.itemName="",e.taxBillSelect=e.taxBill.find(function(e){return e.id===c[0].tax_bill_id});var a=c[0].unit_cost;c[0].vat_included||(a=parseFloat(c[0].unit_cost.toString())/parseFloat(e.taxBillSelect.decimal_rate.toString())),t.setValue({amount:c[0].amount,batch:c[0].batch,expiration_date:c[0].expiration_date,fabrication_date:c[0].fabrication_date,product_name:c[0].product_name,sale_price:c[0].sale_price,tax_bill_id:c[0].tax_bill_id,tax_sale_id:c[0].tax_sale_id,total_cost:c[0].total_cost,unit_cost:c[0].unit_cost,unit_price:a,gain:0,percentage_gain:0,vat_included:c[0].vat_included}),e.perishable=c[0].perishable,e.onChageTaxBill(c[0].tax_bill_id),e.onChangeTaxSale(c[0].tax_sale_id),e.onPurchaseData()}},{key:"onChageTaxBill",value:function(e){this.taxBillSelect=this.taxBill.find(function(t){return t.id===e}),this.onPurchaseData()}},{key:"onChageAmount",value:function(e){this.onPurchaseData()}},{key:"onChageIncluded",value:function(e){this.onPurchaseData()}},{key:"onChangeTaxSale",value:function(e){this.taxSaleSelect=this.taxSales.find(function(t){return t.id===e}),this.onSalesData()}},{key:"onSalesData",value:function(){var e=this;if(e.taxSaleSelect){var t,c,a=e.customForm,n=parseFloat(a.get("unit_price").value),i=parseFloat(a.get("sale_price").value),o=parseFloat(e.taxBillSelect.decimal_rate.toString()),r=0;r=(c=(t=i/parseFloat(e.taxSaleSelect.decimal_rate.toString()))-(1==a.get("vat_included").value?n/o:n))/t*100,a.get("gain").setValue(c),a.get("percentage_gain").setValue("".concat(r.toFixed(2)," %"))}}},{key:"onPurchaseData",value:function(){var e=this;if(e.taxBillSelect){var t=e.customForm,c=parseFloat(t.get("amount").value),a=parseFloat(t.get("unit_price").value),n=parseFloat(e.taxBillSelect.decimal_rate.toString()),i=n>0?a*n:a,o=i*c;1==t.get("vat_included").value?(t.get("unit_cost").setValue(a),t.get("total_cost").setValue(a*c)):(t.get("unit_cost").setValue(i),t.get("total_cost").setValue(o)),c>0&&e.onSalesData()}}},{key:"onSave",value:function(){var e=this,t=e.customForm,c=e.uid,a=t.getRawValue();return parseFloat(a.amount)<=0||parseFloat(a.sale_price)<=0||parseFloat(a.unit_cost)<=0?(e.msg.toastMessage("","Hay un error en las cantidades.",4),!1):t.invalid?(e.msg.toastMessage("","Hay campos sin llenar.",4),!1):void(c?e.onSaveDetail(a):e.msg.toastMessage("Error","Error en la aplicaci\xf3n"))}},{key:"onSaveDetail",value:function(e){var t=this;t.showSpinner("Guardando cambios"),t.itemSelect?(t.itemSelect.perishable||(e.batch=null,e.fabrication_date=null,e.expiration_date=null),e.product_id=t.itemSelect.id):t.oldItem[0].perishable||(e.batch=null,e.fabrication_date=null,e.expiration_date=null);var c={records:JSON.stringify(e)};t.api.put("/shopping/update/detail/".concat(t.uid),c).subscribe(function(e){e.success?(t.msg.toastMessage("","Los cambios se han guardado correctamente."),t.onClose()):t.msg.toastMessage("",e.message,4),t.hideSpinner()},function(e){t.hideSpinner()})}},{key:"onClose",value:function(){this.goRoute("shopping/invoices")}}]),o}(_e.a),bt.\u0275fac=function(e){return new(e||bt)(S.Wb(u.e),S.Wb(w.b),S.Wb(w.a),S.Wb(C.c),S.Wb(x.d),S.Wb(C.a),S.Wb(D.a),S.Wb(ye.a),S.Wb(N.e),S.Wb(y.c),S.Wb(de.a),S.Wb(ue.a),S.Wb(D.f))},bt.\u0275cmp=S.Qb({type:bt,selectors:[["app-detail-edit"]],viewQuery:function(e,t){var c;1&e&&(S.Zc(Je,1),S.Zc(Ye,1),S.Zc(et,1),S.Zc(tt,1),S.Zc(ct,1),S.Zc(at,1),S.Zc(nt,1),S.Zc(it,1)),2&e&&(S.Hc(c=S.nc())&&(t.customGrid=c.first),S.Hc(c=S.nc())&&(t.myDataTable=c.first),S.Hc(c=S.nc())&&(t.searchField=c.first),S.Hc(c=S.nc())&&(t.focusElement=c.first),S.Hc(c=S.nc())&&(t.amountElement=c.first),S.Hc(c=S.nc())&&(t.cashele=c.first),S.Hc(c=S.nc())&&(t.searchbar=c.first),S.Hc(c=S.nc())&&(t.myTabs=c.first))},features:[S.Fb],decls:114,vars:14,consts:[[1,"card"],[1,"card-header"],[1,"card-body"],[3,"formGroup"],[1,"container-fluid","padding-top-bottom"],[1,"row"],[1,"col"],[1,"form-group"],["type","text","nbinput","","fullWidth","","formControlName","product_name",1,"form-control",3,"readOnly"],[1,"col-md-7"],[1,"page-search-input","form-group"],[1,"input-group"],["type","search","id","searchbar","placeholder","B\xfasqueda","autofocus","",1,"form-control","rounded-right","form-control-lg","shadow","pl-2",3,"keyup.enter"],["searchField",""],[1,"input-group-append"],["type","button",1,"btn","btn-primary","search-btn","rounded","space-right",3,"click"],[1,"d-none","d-sm-block"],[1,"fas","fa-search"],["type","button","ngbTooltip","Crear nuevo producto",1,"btn","btn-success","space-right","radius-button"],[1,"fas","fa-plus","fas-fa-22"],["type","button","ngbTooltip","Refrescar",1,"btn","btn-info","space-right","radius-button",3,"click"],[1,"fas","fa-sync","fas-fa-22"],["type","button","ngbTooltip","Limpiar",1,"btn","btn-danger","space-right","radius-button",3,"click"],[1,"fas","fa-broom","fas-fa-22"],["type","button","ngbTooltip","Cerrar",1,"btn","btn-danger","radius-button",3,"click"],[1,"fas","fa-times","fas-fa-22"],[1,"col","product-name-header"],[1,"col","card-col"],[1,"card-columns"],["class","card card-sales",3,"click",4,"ngFor","ngForOf"],[1,"col-md-5","card-col"],[1,"form-group","row"],["for","inputQuantity",1,"col-sm-3","col-form-label"],[1,"col-sm-9"],["type","number","id","inputQuantity","placeholder","Cantidad","formControlName","amount",1,"form-control",3,"change"],["amountElement",""],["for","selectBill",1,"col-sm-3","col-form-label"],["id","selectBill","formControlName","tax_bill_id",3,"change"],[3,"value",4,"ngFor","ngForOf"],[1,"form-check"],["type","checkbox","id","ckInclude","formControlName","vat_included",1,"form-check-input",3,"change"],["for","ckInclude",1,"form-check-label"],["for","inputAmount1",1,"col-sm-3","col-form-label"],["formControlName","unit_price","currencyMask","","type","text","id","inputAmount1","ngbTooltip","Costo unitario sin impuesto","placeholder","Costo unitario",1,"form-control",3,"keyup"],[1,"col-sm-6"],["formControlName","unit_cost","currencyMask","","type","text","id","inputAmount","ngbTooltip","Costo unitario con impuesto","placeholder","Costo unitario","readonly","",1,"form-control","radius-button","total"],["formControlName","total_cost","type","text","currencyMask","","placeholder","Total","readonly","",1,"form-control","radius-button","total"],["for","selectSale",1,"col-sm-4","col-form-label"],[1,"col-sm-8"],["id","selectSale","formControlName","tax_sale_id",3,"change"],["for","salePrice",1,"col-sm-4","col-form-label"],["formControlName","sale_price","currencyMask","","type","text","id","salePrice","placement","bottom","ngbTooltip","Precio de venta con impuesto incluido","placeholder","Precio de venta",1,"form-control",3,"keyup"],[1,"col-sm-4","col-form-label"],["readonly","","formControlName","gain","currencyMask","","type","text","placement","bottom","ngbTooltip","Ganancia posible","placeholder","Ganancia posible",1,"form-control"],["readonly","","formControlName","percentage_gain","type","text","placement","bottom","ngbTooltip","Procentaje Ganancia posible",1,"form-control"],["class","form-group row",4,"ngIf"],["type","button",1,"btn","radius-button","btn-primary","space-right","radius-button","btn-block",3,"disabled","click"],[1,"fas","fa-save","fas-fa-22"],[2,"color","white"],[1,"card","card-sales",3,"click"],["fallimg","product",1,"img-product","card-img-top",3,"src"],[1,"price"],[1,"product-name"],[3,"value"],[1,"col-sm-5","col-form-label"],[1,"col-sm-7"],["formControlName","batch","type","text",1,"form-control",3,"readonly"],["formControlName","fabrication_date","type","date",1,"form-control",3,"readonly"],["formControlName","expiration_date","type","date",1,"form-control",3,"readonly"]],template:function(e,t){if(1&e){var c=S.dc();S.cc(0,"div",0),S.cc(1,"div",1),S.Uc(2," EDITAR DETALLE DEL ITEM "),S.bc(),S.cc(3,"div",2),S.cc(4,"form",3),S.cc(5,"div",4),S.cc(6,"div",5),S.cc(7,"div",6),S.cc(8,"div",7),S.cc(9,"label"),S.Uc(10,"Nombre del producto."),S.bc(),S.Xb(11,"input",8),S.bc(),S.bc(),S.bc(),S.cc(12,"div",5),S.cc(13,"div",9),S.cc(14,"div",5),S.cc(15,"div",6),S.cc(16,"div",10),S.cc(17,"fieldset"),S.cc(18,"div",11),S.cc(19,"input",12,13),S.mc("keyup.enter",function(){S.Lc(c);var e=S.Ic(20);return t.onSearchProducts(e.value)}),S.bc(),S.cc(21,"div",14),S.cc(22,"button",15),S.mc("click",function(){S.Lc(c);var e=S.Ic(20);return t.onSearchProducts(e.value)}),S.Xb(23,"span",16),S.Xb(24,"i",17),S.bc(),S.cc(25,"button",18),S.Xb(26,"i",19),S.bc(),S.cc(27,"button",20),S.mc("click",function(){return t.onRefresh()}),S.Xb(28,"i",21),S.bc(),S.cc(29,"button",22),S.mc("click",function(){return t.onClearFilter()}),S.Xb(30,"i",23),S.bc(),S.cc(31,"button",24),S.mc("click",function(){return t.onClose()}),S.Xb(32,"i",25),S.bc(),S.bc(),S.bc(),S.bc(),S.bc(),S.bc(),S.bc(),S.cc(33,"div",5),S.cc(34,"div",26),S.cc(35,"label"),S.cc(36,"span"),S.Uc(37),S.bc(),S.bc(),S.bc(),S.bc(),S.cc(38,"div",5),S.cc(39,"div",27),S.cc(40,"div",28),S.Sc(41,ot,8,5,"div",29),S.bc(),S.bc(),S.bc(),S.bc(),S.cc(42,"div",30),S.cc(43,"div",5),S.cc(44,"div",6),S.cc(45,"div",0),S.cc(46,"div",1),S.Uc(47," Datos de compra "),S.bc(),S.cc(48,"div"),S.cc(49,"div",31),S.cc(50,"label",32),S.Uc(51,"Cantidad"),S.bc(),S.cc(52,"div",33),S.cc(53,"input",34,35),S.mc("change",function(e){return t.onChageAmount(e)}),S.bc(),S.bc(),S.bc(),S.cc(55,"div",31),S.cc(56,"label",36),S.Uc(57,"Impuesto"),S.bc(),S.cc(58,"div",33),S.cc(59,"ng-select",37),S.mc("change",function(e){return t.onChageTaxBill(e)}),S.Sc(60,rt,2,3,"ng-option",38),S.bc(),S.bc(),S.bc(),S.cc(61,"div",31),S.cc(62,"div",39),S.cc(63,"input",40),S.mc("change",function(e){return t.onChageIncluded(e)}),S.bc(),S.cc(64,"label",41),S.Uc(65," Incluido "),S.bc(),S.bc(),S.bc(),S.cc(66,"div",31),S.cc(67,"label",42),S.Uc(68,"Costo U."),S.bc(),S.cc(69,"div",33),S.cc(70,"input",43),S.mc("keyup",function(){return t.onChangeUnitPrice()}),S.bc(),S.bc(),S.bc(),S.cc(71,"div",31),S.cc(72,"div",44),S.Xb(73,"input",45),S.bc(),S.cc(74,"div",44),S.Xb(75,"input",46),S.bc(),S.bc(),S.bc(),S.bc(),S.bc(),S.bc(),S.cc(76,"div",5),S.cc(77,"div",6),S.cc(78,"div",0),S.cc(79,"div"),S.Uc(80," Datos de venta "),S.bc(),S.cc(81,"div"),S.cc(82,"div",31),S.cc(83,"label",47),S.Uc(84,"Impuesto"),S.bc(),S.cc(85,"div",48),S.cc(86,"ng-select",49),S.mc("change",function(e){return t.onChangeTaxSale(e)}),S.Sc(87,lt,2,3,"ng-option",38),S.bc(),S.bc(),S.bc(),S.cc(88,"div",31),S.cc(89,"label",50),S.Uc(90,"Precio de venta"),S.bc(),S.cc(91,"div",48),S.cc(92,"input",51),S.mc("keyup",function(){return t.onChangeSalePrice()}),S.bc(),S.bc(),S.bc(),S.cc(93,"div",31),S.cc(94,"label",52),S.Uc(95,"Ganancia posible"),S.bc(),S.cc(96,"div",48),S.Xb(97,"input",53),S.bc(),S.bc(),S.cc(98,"div",31),S.cc(99,"label",52),S.Uc(100,"% Ganancia"),S.bc(),S.cc(101,"div",48),S.Xb(102,"input",54),S.bc(),S.bc(),S.Sc(103,st,5,1,"div",55),S.Sc(104,dt,5,1,"div",55),S.Sc(105,ut,5,1,"div",55),S.cc(106,"div",7),S.cc(107,"button",56),S.mc("click",function(){return t.onSave()}),S.Xb(108,"i",57),S.Uc(109),S.pc(110,"translate"),S.bc(),S.bc(),S.bc(),S.bc(),S.bc(),S.bc(),S.bc(),S.bc(),S.bc(),S.bc(),S.bc(),S.bc(),S.cc(111,"ngx-spinner"),S.cc(112,"p",58),S.Uc(113),S.bc(),S.bc()}2&e&&(S.Ib(4),S.vc("formGroup",t.customForm),S.Ib(7),S.vc("readOnly",t.editing),S.Ib(26),S.Wc(" ",t.itemName," "),S.Ib(4),S.vc("ngForOf",t.itemsResult),S.Ib(19),S.vc("ngForOf",t.taxBill),S.Ib(27),S.vc("ngForOf",t.taxSales),S.Ib(16),S.vc("ngIf",t.perishable),S.Ib(1),S.vc("ngIf",t.perishable),S.Ib(1),S.vc("ngIf",t.perishable),S.Ib(2),S.vc("disabled",!t.customForm.valid),S.Ib(2),S.Wc(" ",S.qc(110,12,"buttons.save")," "),S.Ib(4),S.Wc(" ",t.maskSpinner," "))},directives:[u.z,u.q,u.h,u.c,u.p,u.g,v.N,d.m,u.u,g.a,u.a,h.a,d.n,y.a,g.d],pipes:[x.c,d.d],styles:[".create-customer[_ngcontent-%COMP%]{background-color:#a50721!important;color:#fff!important;font-weight:700!important}.search-custom[_ngcontent-%COMP%]{background:#fff!important;border-radius:10px;box-shadow:0 2px 8px 0 rgba(50,50,50,.322);padding-bottom:5px!important}.card-col[_ngcontent-%COMP%]{max-height:870px;min-height:200px;overflow:auto}.discounts[_ngcontent-%COMP%]{color:green;font-weight:700}.total[_ngcontent-%COMP%], .total-bg[_ngcontent-%COMP%]{color:red;font-weight:700}.total-bg[_ngcontent-%COMP%]{font-size:24px}.vat[_ngcontent-%COMP%]{color:#00f;font-weight:700}.card-sales[_ngcontent-%COMP%]{border:2px solid hsla(0,0%,100%,.247);box-shadow:0 2px 6px 0 rgba(50,50,50,.322);margin:5px!important;min-height:138px!important}.card-sales[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]{color:red;font-size:16px;font-weight:700;margin-bottom:auto;margin-top:auto;padding-bottom:4px;padding-top:4px;text-align:right}.card-sales[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{padding:4px}.card-sales[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]:hover{background-color:red;color:#fff}.card-sales[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]:hover   .price[_ngcontent-%COMP%]{color:#fff}.card-sales[_ngcontent-%COMP%]   .product-name[_ngcontent-%COMP%]{font-size:12px;font-weight:700;margin-bottom:0!important;text-align:center;text-transform:uppercase}.card-sales[_ngcontent-%COMP%]   .img-product[_ngcontent-%COMP%]{display:block;margin:auto;max-width:62px}.card-sales[_ngcontent-%COMP%]   .img-product[_ngcontent-%COMP%]:hover{border-radius:10px;box-shadow:0 2px 8px 0 rgba(50,50,50,.75)}.card-sales[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding-bottom:1px!important;padding-left:4px;padding-right:4px;padding-top:1px!important}.card-sales[_ngcontent-%COMP%]:hover{border:2px solid rgba(23,58,253,.12156862745098039);cursor:pointer}.card-sales[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]:hover{background-color:#173afd;color:#fff}.product-name-header[_ngcontent-%COMP%]{background-color:#639;border:2px solid hsla(0,0%,100%,.5137254901960784);border-radius:25px;color:#fff;font-size:16px;font-weight:700;height:32px;padding:4px;text-align:center;word-break:break-all}"]}),bt)},{path:"providers",component:M},{path:"providers/create",component:Y},{path:"providers/edit/:id",component:Y}]}],gt=((pt=function e(){l(this,e)}).\u0275fac=function(e){return new(e||pt)},pt.\u0275mod=S.Ub({type:pt}),pt.\u0275inj=S.Tb({imports:[[C.f.forChild(ft)],C.f]}),pt),vt={align:"right",allowNegative:!0,allowZero:!0,decimal:".",precision:2,prefix:"$ ",suffix:"",thousands:",",nullable:!0},ht=((mt=function e(){l(this,e)}).\u0275fac=function(e){return new(e||mt)},mt.\u0275mod=S.Ub({type:mt}),mt.\u0275inj=S.Tb({imports:[[d.c,y.b,f.b,v.t,_.a,v.C,h.b.forRoot(vt),p.b,g.c,b.b,m.b,u.v,x.b,gt]]}),mt)}}])}();