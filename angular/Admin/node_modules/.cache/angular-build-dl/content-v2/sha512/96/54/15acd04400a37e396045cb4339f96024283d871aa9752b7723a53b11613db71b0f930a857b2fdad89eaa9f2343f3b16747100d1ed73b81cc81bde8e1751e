(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{aAFz:function(e,t,c){"use strict";c.r(t),c.d(t,"customCurrencyMaskConfig",function(){return Pe}),c.d(t,"ShoppingModule",function(){return De});var a=c("ofXK"),n=c("3Pt+"),i=c("aSZe"),o=c("7M0M"),r=c("Z1v9"),l=c("3HhI"),s=c("ZOsW"),d=c("1kSV"),b=c("TT0I"),u=c("pKmL"),p=c("JqCM"),m=c("sYmb"),g=c("tyNb"),f=c("fXoL");let h=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=f.Qb({type:e,selectors:[["app-shopping"]],decls:1,vars:0,template:function(e,t){1&e&&f.Xb(0,"router-outlet")},directives:[g.g],encapsulation:2}),e})();var v=c("py8Q"),_=c("YMfE");const y=["customGrid"],x=["searchField"];function C(e,t){if(1&e){const e=f.dc();f.cc(0,"div"),f.cc(1,"button",21),f.mc("click",function(){return f.Lc(e),f.oc().importData()}),f.Xb(2,"i",33),f.Uc(3),f.pc(4,"translate"),f.bc(),f.bc()}if(2&e){const e=f.oc();f.Ib(1),f.vc("disabled",e.loading),f.Ib(2),f.Wc(" ",f.qc(4,2,"buttons.import")," ")}}let S=(()=>{class e extends v.a{constructor(e,t,c,a,n){super(e,t,c,a,n),this.msg=e,this.api=t,this.router=c,this.translate=a,this.aRouter=n,this.title="Proveedores"}ngOnInit(){this.changeLanguage(this.activeLang)}ngAfterViewInit(){const e=this;e.crudApi={create:"/persons/create/provider",read:"/persons/providers",update:"/persons/update/",delete:"/persons/delete/"},e.showActions=!0,e.showRowNumber=!0,e.pagesize=10,e.datafields=[{name:"id",type:"number"},{name:"company_name",type:"string"},{name:"dni",type:"string"},{name:"description",type:"string"},{name:"full_name",type:"string"}],e.sourceColumns=[{text:"Mostrar nombre como",datafield:"full_name",align:"center"},{text:"DNI",datafield:"dni",align:"center",minWidth:100,cellsalign:"right"},{text:"Empresa",datafield:"company_name",align:"center"}],this.prepareGrid()}createData(){super.createData(),this.goRoute("shopping/providers/create")}editData(e){super.editData(e),this.goRoute(`shopping/providers/edit/${e.id}`)}}return e.\u0275fac=function(t){return new(t||e)(f.Wb(_.b),f.Wb(_.a),f.Wb(g.c),f.Wb(m.d),f.Wb(g.a))},e.\u0275cmp=f.Qb({type:e,selectors:[["app-providers"]],viewQuery:function(e,t){if(1&e&&(f.ad(y,1),f.ad(x,1)),2&e){let e;f.Hc(e=f.nc())&&(t.customGrid=e.first),f.Hc(e=f.nc())&&(t.searchField=e.first)}},features:[f.Fb],decls:77,vars:38,consts:[[1,"card"],[1,"card-header"],[1,"card-title"],[1,"menuExport"],[1,"space-right"],[1,"btn","btn-danger","round","mr-1","mb-1",3,"disabled","click"],[1,"fa","fa-sync","mr-1","fas-fa-22"],[1,"myMenu","space-right"],[1,"clearColor",3,"height","onItemclick"],["myMenu",""],["id","Exports"],[1,"fas","fa-cog","fas-fa-22","fas-fa-red"],["href","javascript:void(0)"],[2,"width","200px"],[1,"fas","fa-file-excel","fas-fa-xls"],[1,"fas","fa-file-csv","fas-fa-xls"],["type","separator"],[1,"fas","fa-file-pdf","fas-fa-pdf"],[1,"fas","fa-file-code","fas-fa-code"],[1,"fas","fa-print","fas-fa-print"],[1,"margin-left","space-right"],[1,"btn","btn-success","round","mr-1","mb-1",3,"disabled","click"],[1,"fa","fa-plus","mr-1","fas-fa-22"],[4,"ngIf"],[1,"container-fluid"],[1,"input-group"],["type","text","autofocus","",1,"form-control",3,"placeholder","keyup"],["searchField",""],[1,"input-group-append"],[1,"btn","btn-primary",3,"disabled","click"],[1,"fa","fa-search"],["width","100%",3,"disabled","auto-create","onCellselect","onBindingcomplete"],["customGrid",""],[1,"fa","fa-upload","mr-1","fas-fa-22"]],template:function(e,t){1&e&&(f.cc(0,"div",0),f.cc(1,"div",1),f.cc(2,"h4",2),f.Uc(3),f.pc(4,"uppercase"),f.bc(),f.bc(),f.cc(5,"div",0),f.cc(6,"div",3),f.cc(7,"div",4),f.cc(8,"button",5),f.mc("click",function(){return t.searchQuery()}),f.Xb(9,"i",6),f.bc(),f.bc(),f.cc(10,"div",7),f.cc(11,"jqxMenu",8,9),f.mc("onItemclick",function(e){return t.itemclick(e)}),f.cc(13,"ul"),f.cc(14,"li",10),f.Xb(15,"i",11),f.Xb(16,"a",12),f.cc(17,"ul",13),f.cc(18,"li"),f.cc(19,"a",12),f.Xb(20,"i",14),f.Uc(21),f.pc(22,"translate"),f.bc(),f.bc(),f.cc(23,"li"),f.cc(24,"a",12),f.Xb(25,"i",15),f.Uc(26),f.pc(27,"translate"),f.bc(),f.bc(),f.cc(28,"li"),f.cc(29,"a",12),f.Xb(30,"i",14),f.Uc(31),f.pc(32,"translate"),f.bc(),f.bc(),f.Xb(33,"li",16),f.cc(34,"li"),f.cc(35,"a",12),f.Xb(36,"i",17),f.Uc(37),f.pc(38,"translate"),f.bc(),f.bc(),f.Xb(39,"li",16),f.cc(40,"li"),f.cc(41,"a",12),f.Xb(42,"i",18),f.Uc(43),f.pc(44,"translate"),f.bc(),f.bc(),f.cc(45,"li"),f.cc(46,"a",12),f.Xb(47,"i",18),f.Uc(48),f.pc(49,"translate"),f.bc(),f.bc(),f.cc(50,"li"),f.cc(51,"a",12),f.Xb(52,"i",18),f.Uc(53),f.pc(54,"translate"),f.bc(),f.bc(),f.Xb(55,"li",16),f.cc(56,"li"),f.cc(57,"a",12),f.Xb(58,"i",19),f.Uc(59),f.pc(60,"translate"),f.bc(),f.bc(),f.bc(),f.bc(),f.bc(),f.bc(),f.bc(),f.cc(61,"div",20),f.cc(62,"button",21),f.mc("click",function(){return t.createData()}),f.Xb(63,"i",22),f.Uc(64),f.pc(65,"translate"),f.bc(),f.bc(),f.Sc(66,C,5,4,"div",23),f.bc(),f.cc(67,"div",24),f.cc(68,"fieldset"),f.cc(69,"div",25),f.cc(70,"input",26,27),f.mc("keyup",function(e){return t.inputKey(e)}),f.bc(),f.cc(72,"div",28),f.cc(73,"button",29),f.mc("click",function(){return t.searchQuery()}),f.Xb(74,"i",30),f.bc(),f.bc(),f.bc(),f.bc(),f.cc(75,"jqxGrid",31,32),f.mc("onCellselect",function(e){return t.cellClick(e)})("onBindingcomplete",function(e){return t.Bindingcomplete(e)}),f.bc(),f.bc(),f.bc(),f.bc()),2&e&&(f.Ib(3),f.Vc(f.qc(4,18,t.title)),f.Ib(5),f.vc("disabled",t.loading),f.Ib(3),f.vc("height",36),f.Ib(10),f.Vc(f.qc(22,20,"export.excel")),f.Ib(5),f.Vc(f.qc(27,22,"export.csv")),f.Ib(5),f.Vc(f.qc(32,24,"export.xml")),f.Ib(6),f.Vc(f.qc(38,26,"export.pdf")),f.Ib(6),f.Vc(f.qc(44,28,"export.html")),f.Ib(5),f.Vc(f.qc(49,30,"export.json")),f.Ib(5),f.Vc(f.qc(54,32,"export.tsv")),f.Ib(6),f.Vc(f.qc(60,34,"export.print")),f.Ib(3),f.vc("disabled",t.loading),f.Ib(2),f.Wc(" ",f.qc(65,36,"buttons.new")," "),f.Ib(2),f.vc("ngIf",t.useImport),f.Ib(4),f.vc("placeholder",t.placeholderSearch),f.Ib(3),f.vc("disabled",t.loading),f.Ib(2),f.vc("disabled",t.loading)("auto-create",!1))},directives:[o.a,a.n,i.a],pipes:[a.v,m.c],encapsulation:2}),e})();var I=c("TK7J"),w=c("UnFQ"),F=c("Absx"),k=c("mm0L"),U=c("PcHl"),O=c("dKyG"),M=c("uHPU");const P=["focusElement"],D=["uploadFile"],X=["imgUp"];function q(e,t){if(1&e&&(f.cc(0,"ng-option",31),f.Uc(1),f.bc()),2&e){const e=t.$implicit;f.vc("value",e.id),f.Ib(1),f.Wc("",e.description," ")}}function W(e,t){if(1&e&&(f.cc(0,"ng-option",31),f.Xb(1,"img",32),f.Uc(2),f.bc()),2&e){const e=t.$implicit;f.vc("value",e.id),f.Ib(1),f.vc("src","assets/flags/"+e.image,f.Oc),f.Ib(1),f.Wc(" ",e.CurrencyName," ")}}function N(e,t){if(1&e&&(f.cc(0,"ng-option",31),f.Xb(1,"img",32),f.Uc(2),f.bc()),2&e){const e=t.$implicit;f.vc("value",e.id),f.Ib(1),f.vc("src","assets/flags/"+e.image,f.Oc),f.Ib(1),f.Wc(" ",e.country_name," ")}}function T(e,t){if(1&e&&(f.cc(0,"div",12),f.cc(1,"div",13),f.cc(2,"div",14),f.cc(3,"label"),f.cc(4,"span",15),f.Uc(5),f.pc(6,"translate"),f.bc(),f.Uc(7),f.pc(8,"translate"),f.bc(),f.cc(9,"ng-select",16),f.Sc(10,q,2,2,"ng-option",17),f.bc(),f.bc(),f.bc(),f.cc(11,"div",13),f.cc(12,"div",14),f.cc(13,"label"),f.cc(14,"span",15),f.Uc(15),f.pc(16,"translate"),f.bc(),f.Uc(17,"Mostrar nombre como"),f.bc(),f.Xb(18,"input",18,19),f.bc(),f.bc(),f.bc(),f.cc(20,"div",12),f.cc(21,"div",13),f.cc(22,"div",14),f.cc(23,"label"),f.cc(24,"span",15),f.Uc(25),f.pc(26,"translate"),f.bc(),f.Uc(27),f.pc(28,"translate"),f.bc(),f.cc(29,"ng-select",20),f.Sc(30,W,3,3,"ng-option",17),f.bc(),f.bc(),f.bc(),f.cc(31,"div",13),f.cc(32,"div",14),f.cc(33,"label"),f.cc(34,"span",15),f.Uc(35),f.pc(36,"translate"),f.bc(),f.Uc(37),f.pc(38,"translate"),f.bc(),f.cc(39,"ng-select",21),f.Sc(40,N,3,3,"ng-option",17),f.bc(),f.bc(),f.bc(),f.bc(),f.cc(41,"div",12),f.cc(42,"div",22),f.cc(43,"div",14),f.cc(44,"label"),f.Uc(45,"Titulo"),f.bc(),f.Xb(46,"input",23),f.bc(),f.bc(),f.cc(47,"div",24),f.cc(48,"div",14),f.cc(49,"label"),f.Uc(50,"Nombres"),f.bc(),f.Xb(51,"input",25),f.bc(),f.bc(),f.cc(52,"div",24),f.cc(53,"div",14),f.cc(54,"label"),f.Uc(55,"Apellidos"),f.bc(),f.Xb(56,"input",26),f.bc(),f.bc(),f.bc(),f.cc(57,"div",12),f.cc(58,"div",13),f.cc(59,"div",14),f.cc(60,"label"),f.Uc(61,"DNI"),f.bc(),f.Xb(62,"input",27),f.bc(),f.bc(),f.cc(63,"div",13),f.cc(64,"div",14),f.cc(65,"label"),f.Uc(66,"Nombre de la empresa"),f.bc(),f.Xb(67,"input",28),f.bc(),f.bc(),f.bc(),f.cc(68,"div",12),f.cc(69,"div",13),f.cc(70,"div",14),f.cc(71,"label"),f.Uc(72,"Correo electr\xf3nico"),f.bc(),f.Xb(73,"input",29),f.bc(),f.bc(),f.cc(74,"div",13),f.cc(75,"div",14),f.cc(76,"label"),f.Uc(77,"Web"),f.bc(),f.Xb(78,"input",30),f.bc(),f.bc(),f.bc()),2&e){const e=f.oc();f.Ib(5),f.Vc(f.qc(6,25,"general.asterisk")),f.Ib(2),f.Vc(f.qc(8,27,"companies.type_organization")),f.Ib(2),f.Ob("is-invalid",e.invalidOrganization),f.vc("virtualScroll",!0),f.Ib(1),f.vc("ngForOf",e.typeOrg),f.Ib(5),f.Vc(f.qc(16,29,"general.asterisk")),f.Ib(3),f.Ob("is-invalid",e.invalidFullName)("status-danger",e.invalidFullName),f.Ib(7),f.Vc(f.qc(26,31,"general.asterisk")),f.Ib(2),f.Vc(f.qc(28,33,"companies.currency")),f.Ib(2),f.Ob("is-invalid",e.invalidCurrency),f.vc("virtualScroll",!0),f.Ib(1),f.vc("ngForOf",e.currency),f.Ib(5),f.Vc(f.qc(36,35,"general.asterisk")),f.Ib(2),f.Vc(f.qc(38,37,"companies.country")),f.Ib(2),f.Ob("is-invalid",e.invalidCountry)("status-danger",e.invalidCountry),f.vc("virtualScroll",!0),f.Ib(1),f.vc("ngForOf",e.countries)}}function V(e,t){1&e&&(f.cc(0,"div",12),f.cc(1,"div",13),f.cc(2,"div",14),f.cc(3,"label"),f.Uc(4,"Direcci\xf3n principal"),f.bc(),f.Xb(5,"textarea",33),f.bc(),f.bc(),f.cc(6,"div",13),f.cc(7,"div",14),f.cc(8,"label"),f.Uc(9,"Direcci\xf3n postal"),f.bc(),f.Xb(10,"textarea",34),f.bc(),f.bc(),f.bc(),f.cc(11,"div",12),f.cc(12,"div",13),f.cc(13,"div",14),f.cc(14,"label"),f.Uc(15,"Ciudad/Distrito"),f.bc(),f.Xb(16,"input",35),f.bc(),f.bc(),f.cc(17,"div",13),f.cc(18,"label"),f.Uc(19,"Estado/Provincia"),f.bc(),f.Xb(20,"input",36),f.bc(),f.bc(),f.cc(21,"div",12),f.cc(22,"div",13),f.cc(23,"div",14),f.cc(24,"label"),f.Uc(25,"C\xf3digo postal"),f.bc(),f.Xb(26,"input",37),f.bc(),f.bc(),f.cc(27,"div",13),f.cc(28,"label"),f.Uc(29,"Movil"),f.bc(),f.Xb(30,"input",38),f.bc(),f.bc(),f.cc(31,"div",12),f.cc(32,"div",13),f.cc(33,"div",14),f.cc(34,"label"),f.Uc(35,"Fijo"),f.bc(),f.Xb(36,"input",39),f.bc(),f.bc(),f.bc())}function A(e,t){if(1&e&&(f.cc(0,"ng-option",31),f.Uc(1),f.bc()),2&e){const e=t.$implicit;f.vc("value",e.id),f.Ib(1),f.Xc(" ",e.name_taxe," - ",e.rate_name," ")}}function R(e,t){if(1&e&&(f.cc(0,"ng-option",31),f.Uc(1),f.bc()),2&e){const e=t.$implicit;f.vc("value",e.id),f.Ib(1),f.Xc(" ",e.account_number," - ",e.account_name," ")}}function B(e,t){if(1&e&&(f.cc(0,"ng-option",31),f.Uc(1),f.bc()),2&e){const e=t.$implicit;f.vc("value",e.id),f.Ib(1),f.Wc(" ",e.payment_method," ")}}function E(e,t){if(1&e&&(f.cc(0,"ng-option",31),f.Uc(1),f.bc()),2&e){const e=t.$implicit;f.vc("value",e.id),f.Ib(1),f.Wc(" ",e.term_name," ")}}function G(e,t){if(1&e&&(f.cc(0,"div",12),f.cc(1,"div",13),f.cc(2,"div",14),f.cc(3,"label"),f.Uc(4),f.pc(5,"translate"),f.bc(),f.cc(6,"ng-select",40),f.cc(7,"ng-option",41),f.Uc(8,"Seleccionar"),f.bc(),f.Sc(9,A,2,3,"ng-option",17),f.bc(),f.bc(),f.bc(),f.cc(10,"div",13),f.cc(11,"div",14),f.cc(12,"label"),f.Uc(13,"Cuenta contable"),f.bc(),f.cc(14,"ng-select",42),f.cc(15,"ng-option",41),f.Uc(16,"Seleccionar"),f.bc(),f.Sc(17,R,2,3,"ng-option",17),f.bc(),f.bc(),f.bc(),f.bc(),f.cc(18,"div",12),f.cc(19,"div",13),f.cc(20,"div",14),f.cc(21,"label"),f.Uc(22,"Metodo de pago preferido"),f.bc(),f.cc(23,"ng-select",43),f.cc(24,"ng-option",41),f.Uc(25,"Seleccionar"),f.bc(),f.Sc(26,B,2,2,"ng-option",17),f.bc(),f.bc(),f.bc(),f.cc(27,"div",13),f.cc(28,"div",14),f.cc(29,"label"),f.Uc(30,"Condiciones de pago"),f.bc(),f.cc(31,"ng-select",44),f.cc(32,"ng-option",41),f.Uc(33,"Seleccionar"),f.bc(),f.Sc(34,E,2,2,"ng-option",17),f.bc(),f.bc(),f.bc(),f.bc(),f.cc(35,"div",12),f.cc(36,"div",13),f.cc(37,"div",14),f.cc(38,"label"),f.Uc(39,"Saldo inicial"),f.bc(),f.Xb(40,"input",45),f.bc(),f.bc(),f.cc(41,"div",13),f.cc(42,"div",14),f.cc(43,"label"),f.Uc(44,"A partir de la fecha"),f.bc(),f.Xb(45,"input",46),f.bc(),f.bc(),f.bc()),2&e){const e=f.oc();f.Ib(4),f.Vc(f.qc(5,8,"general.tax")),f.Ib(5),f.vc("ngForOf",e.tax),f.Ib(5),f.vc("virtualScroll",!0),f.Ib(3),f.vc("ngForOf",e.accounts),f.Ib(6),f.vc("virtualScroll",!0),f.Ib(3),f.vc("ngForOf",e.payments),f.Ib(5),f.vc("virtualScroll",!0),f.Ib(3),f.vc("ngForOf",e.timelimits)}}let L=(()=>{class e extends I.a{constructor(e,t,c,a,i,o,r,l,s,d,b,u,p,m,g,f){super(e,t,c,a,i,o,s),this.fb=e,this.msg=t,this.api=c,this.router=a,this.translate=i,this.aRouter=o,this.termsSer=r,this.attrSer=l,this.spinner=s,this.docs=d,this.cnt=b,this.curr=u,this.tor=p,this.taxSer=m,this.accountSer=g,this.custSer=f,this.typepersons=[],this.identityDocs=[],this.typeOrg=[],this.countries=[],this.currency=[],this.tax=[],this.persons=[],this.accounts=[],this.payments=[],this.timelimits=[],this.active=1,this.title="Proveedor",this.translate.setDefaultLang(this.activeLang),this.customForm=this.fb.group({address:[""],city_name:[""],company_name:[""],description:[""],dni:[""],email:[""],last_name:[""],location:[""],mobile:[""],names:[""],phone:[""],postal_code:[""],state_name:[""],title:[""],web:[""],currency_id:["",[n.y.required]],country_id:[113,[n.y.required]],type_organization_id:[1,[n.y.required]],person_type_id:[1,[n.y.required]],tax_rate_id:["0"],means_payment_id:["0"],sales_term:["0"],accounting_account_id:["0"],initial_balance:[""],initial_date:[(new Date).toISOString().split("T")[0]],full_name:["",[n.y.required,n.y.minLength(6)]]})}get invalidFullName(){return this.customForm.get("full_name").invalid&&this.customForm.get("full_name").touched}get invalidPersonType(){return this.customForm.get("person_type_id").value<=0}get invalidCountry(){return this.customForm.get("country_id").value<=0}get invalidCurrency(){return this.customForm.get("currency_id").value<=0}get invalidOrganization(){return this.customForm.get("type_organization_id").value<=0}ngOnInit(){super.ngOnInit();const e=this;e.PutURL="/persons/update/",e.PostURL="/persons/create/provider",e.docs.getData({}).subscribe(t=>{e.identityDocs=t}),e.cnt.getData().subscribe(t=>{e.countries=t}),e.curr.getData().subscribe(t=>{e.currency=t,t.length>0&&(t.length>1?t.map(t=>{if(t.national_currency)return e.customForm.get("currency_id").setValue(t.id),!1}):e.customForm.get("currency_id").setValue(t[0].id))}),this.tor.getData({}).subscribe(e=>{this.typeOrg=e}),e.taxSer.getData({isVat:1}).subscribe(t=>{e.tax=t}),e.accountSer.getsubAccounts({}).subscribe(t=>{e.accounts=t}),e.custSer.getMeansPayment({}).subscribe(t=>{e.payments=t}),e.custSer.getTimeLimit({}).subscribe(t=>{e.timelimits=t})}loadData(e=0){const t=this.customForm;this.editing=!0,this.custSer.getCustomers({uid:e}).subscribe(e=>{var c,a,n,i,o,r;t.setValue({address:e[0].address,city_name:e[0].city_name,company_name:e[0].company_name,country_id:e[0].country_id,currency_id:e[0].currency_id,description:e[0].description,dni:e[0].dni,email:e[0].email,full_name:e[0].full_name,last_name:e[0].last_name,location:e[0].location,mobile:e[0].mobile,names:e[0].names,person_type_id:e[0].person_type_id,type_organization_id:e[0].type_organization_id,tax_rate_id:null!==(c=e[0].tax_rate_id)&&void 0!==c?c:"0",means_payment_id:null!==(a=e[0].means_payment_id)&&void 0!==a?a:"0",sales_term:null!==(n=e[0].sales_term)&&void 0!==n?n:"0",accounting_account_id:null!==(i=e[0].accounting_account_id)&&void 0!==i?i:"0",initial_balance:null!==(o=e[0].initial_balance)&&void 0!==o?o:0,initial_date:null!==(r=e[0].initial_date)&&void 0!==r?r:(new Date).toISOString().split("T")[0],phone:e[0].phone,postal_code:e[0].postal_code,state_name:e[0].state_name,title:e[0].title,web:e[0].web})})}}return e.\u0275fac=function(t){return new(t||e)(f.Wb(n.e),f.Wb(_.b),f.Wb(_.a),f.Wb(g.c),f.Wb(m.d),f.Wb(g.a),f.Wb(w.h),f.Wb(w.a),f.Wb(p.c),f.Wb(F.c),f.Wb(F.a),f.Wb(F.b),f.Wb(k.d),f.Wb(U.f),f.Wb(O.b),f.Wb(U.b))},e.\u0275cmp=f.Qb({type:e,selectors:[["app-customer-form"]],viewQuery:function(e,t){if(1&e&&(f.ad(P,1),f.ad(D,1),f.ad(X,1)),2&e){let e;f.Hc(e=f.nc())&&(t.focusElement=e.first),f.Hc(e=f.nc())&&(t.uploadFile=e.first),f.Hc(e=f.nc())&&(t.imgUp=e.first)}},features:[f.Fb],decls:25,vars:18,consts:[[1,"card"],[1,"card-header"],[1,"card-body"],[3,"formGroup"],["ngbNav","",1,"nav-tabs",3,"activeId","activeIdChange"],["nav","ngbNav"],[3,"ngbNavItem"],["ngbNavLink","",1,"display-none"],["ngbNavContent",""],[1,"mt-2",3,"ngbNavOutlet"],[1,"card-footer"],[3,"loading","showAaveACreate","saveAClose","closeEvent","saveAndCreateEvent","saveAndCloseEvent"],[1,"row"],[1,"col-md-6"],[1,"form-group"],[1,"asterisk"],["formControlName","type_organization_id","required","","name","type_organization_id",3,"virtualScroll"],[3,"value",4,"ngFor","ngForOf"],["type","text","formControlName","full_name","required","","autofocus","",1,"form-control"],["focusElement",""],["formControlName","currency_id","name","currency_id","required","",3,"virtualScroll"],["formControlName","country_id","required","",3,"virtualScroll"],[1,"col-md-2"],["type","text","formControlName","title","name","title",1,"form-control"],[1,"col-md-5"],["type","text","formControlName","names",1,"form-control"],["type","text","formControlName","last_name",1,"form-control"],["type","text","formControlName","dni",1,"form-control"],["type","text","formControlName","company_name",1,"form-control"],["type","text","formControlName","email",1,"form-control"],["type","text","formControlName","web",1,"form-control"],[3,"value"],["height","15","width","15",3,"src"],["formControlName","address","rows","2",1,"form-control"],["formControlName","location","rows","2",1,"form-control"],["type","text","formControlName","city_name",1,"form-control"],["type","text","formControlName","state_name",1,"form-control"],["type","text","formControlName","postal_code",1,"form-control"],["type","text","formControlName","mobile",1,"form-control"],["type","text","formControlName","phone",1,"form-control"],["formControlName","tax_rate_id"],["value","0"],["formControlName","accounting_account_id",3,"virtualScroll"],["formControlName","means_payment_id",3,"virtualScroll"],["formControlName","sales_term",3,"virtualScroll"],["currencyMask","","name","initial_balance","formControlName","initial_balance",1,"form-control"],["type","date","name","initial_date","formControlName","initial_date",1,"form-control"]],template:function(e,t){if(1&e&&(f.cc(0,"div",0),f.cc(1,"div",1),f.Uc(2),f.pc(3,"uppercase"),f.pc(4,"translate"),f.pc(5,"uppercase"),f.bc(),f.cc(6,"div",2),f.cc(7,"form",3),f.cc(8,"ul",4,5),f.mc("activeIdChange",function(e){return t.active=e}),f.cc(10,"li",6),f.cc(11,"a",7),f.Uc(12,"General"),f.bc(),f.Sc(13,T,79,39,"ng-template",8),f.bc(),f.cc(14,"li",6),f.cc(15,"a",7),f.Uc(16,"Ubicaci\xf3n/Direcci\xf3n"),f.bc(),f.Sc(17,V,37,0,"ng-template",8),f.bc(),f.cc(18,"li",6),f.cc(19,"a",7),f.Uc(20,"Pago y facturaci\xf3n"),f.bc(),f.Sc(21,G,46,10,"ng-template",8),f.bc(),f.bc(),f.Xb(22,"div",9),f.bc(),f.bc(),f.cc(23,"div",10),f.cc(24,"app-footer-form",11),f.mc("closeEvent",function(){return t.cancel()})("saveAndCreateEvent",function(){return t.saveAndCreate()})("saveAndCloseEvent",function(){return t.saveAndClose()}),f.bc(),f.bc(),f.bc()),2&e){const e=f.Ic(9);f.Ib(2),f.Xc(" ",f.qc(3,12,f.qc(4,14,"general.createEdit"))," ",f.qc(5,16,t.title)," "),f.Ib(5),f.vc("formGroup",t.customForm),f.Ib(1),f.vc("activeId",t.active),f.Ib(2),f.vc("ngbNavItem",1),f.Ib(4),f.vc("ngbNavItem",2),f.Ib(4),f.vc("ngbNavItem",3),f.Ib(4),f.vc("ngbNavOutlet",e),f.Ib(2),f.vc("loading",t.loading)("showAaveACreate",!0)("saveAClose",t.saveAClose)("saveAClose",t.saveAClose)}},directives:[n.z,n.q,n.h,d.u,d.w,d.x,d.v,d.z,M.a,s.a,n.p,n.g,n.w,a.m,n.c,s.d,b.a],pipes:[a.v,m.c],styles:["nb-checkbox[_ngcontent-%COMP%]{margin-bottom:1rem}.form-inline[_ngcontent-%COMP%]   [fullWidth][_ngcontent-%COMP%]{flex:1}.form-inline[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin:0 1.5rem 1.5rem 0}nb-card.inline-form-card[_ngcontent-%COMP%]   nb-card-body[_ngcontent-%COMP%]{padding-bottom:0}"]}),e})();var z=c("PSD3"),$=c.n(z);const H=["customGrid"],j=["detailGrid"],Q=["searchField"],J=["myTabs"];function K(e,t){if(1&e){const e=f.dc();f.cc(0,"div"),f.cc(1,"button",24),f.mc("click",function(){return f.Lc(e),f.oc().importData()}),f.Xb(2,"i",39),f.Uc(3),f.pc(4,"translate"),f.bc(),f.bc()}if(2&e){const e=f.oc();f.Ib(1),f.vc("disabled",e.loading),f.Ib(2),f.Wc(" ",f.qc(4,2,"buttons.import")," ")}}let Y=(()=>{class e extends v.a{constructor(e,t,c,a,n,i){super(e,t,c,a,n),this.msg=e,this.api=t,this.router=c,this.translate=a,this.aRouter=n,this.shopSer=i,this.title="Registro de compras",this.invoiceName="",this.source2={localdata:[],datafields:[{name:"active",type:"boolean"},{name:"admission_date",type:"string"},{name:"amount",type:"number"},{name:"barcode",type:"string"},{name:"batch",type:"string"},{name:"expiration_date",type:"string"},{name:"fabrication_date",type:"string"},{name:"freight",type:"number"},{name:"id",type:"number"},{name:"internal_code",type:"string"},{name:"invoice_id",type:"number"},{name:"perishable",type:"boolean"},{name:"product_id",type:"number"},{name:"product_name",type:"string"},{name:"sale_price",type:"number"},{name:"state",type:"number"},{name:"tax_bill",type:"number"},{name:"tax_bill_id",type:"number"},{name:"tax_sale",type:"number"},{name:"tax_sale_id",type:"number"},{name:"total_cost",type:"number"},{name:"unit_cost",type:"number"},{name:"vat_included",type:"boolean"}],datatype:"array"},this.dataAdapter2=new jqx.dataAdapter(this.source2),this.columnsDet=[{columngroup:"Actions",text:"",sortable:!1,filterable:!1,editable:!1,align:"center",groupable:!1,draggable:!1,resizable:!1,datafield:"#delete_#",columntype:"text",width:32,cellsrenderer:(e,t,c)=>'<span><i class="fas fa-trash-alt fas-fa-delete fa-cursor"></i></span>'},{text:"Cantidad",datafield:"amount",align:"center",width:80,cellsalign:"right"},{text:"Producto",datafield:"product_name",align:"center",minWidth:250},{text:"Precio unitario",datafield:"unit_cost",align:"center",cellsalign:"right",cellsformat:"c2",width:120},{text:"Precio de venta",datafield:"sale_price",align:"center",cellsalign:"right",cellsformat:"c2",width:120},{text:"Total",datafield:"total_cost",align:"center",cellsalign:"right",cellsformat:"c2",width:120}]}ngOnInit(){this.changeLanguage(this.activeLang)}ngAfterViewInit(){const e=this;e.crudApi={create:"/shopping/create",read:"/shopping/read",update:"/shopping/update/",delete:"/shopping/delete/"},e.showActions=!0,e.showRowNumber=!0,e.pagesize=10,e.datafields=[{name:"id",type:"number"},{name:"invoice_nro",type:"string"},{name:"total",type:"number"},{name:"branch_name",type:"string"},{name:"full_name",type:"string"},{name:"winery_name",type:"string"}],e.sourceColumns=[{columngroup:"Actions",text:"",sortable:!1,filterable:!1,editable:!1,align:"center",groupable:!1,draggable:!1,resizable:!1,datafield:"#edit_shopping_#",columntype:"text",width:32,cellsrenderer:(e,t,c)=>'<span><i class="fas fa-shopping-cart fas-fa-edit fa-cursor"></i></span>'},{text:"N\xba. Factura",datafield:"invoice_nro",align:"center",minwidth:80,width:100},{text:"Proveedor",datafield:"full_name",align:"center",minwidth:100},{text:"Bodega",datafield:"branch_name",align:"center",minwidth:100},{text:"Total",datafield:"total",align:"center",cellsalign:"right",cellsformat:"c2",minwidth:100}],this.prepareGrid()}cellDetailClick(e){const t=e.args,c=this.detailGrid.getrowdata(t.rowindex);"#edit_#"===t.datafield?this.goRoute(`shopping/invoices/detail/edit/${c.id}`):"#delete_#"===t.datafield&&this.deleteDetail(c)}cellClick(e){const t=e.args,c=this.customGrid.getrowdata(t.rowindex),a=this;a.invoiceName=c.invoice_nro,"#edit_shopping_#"===t.datafield?a.goRoute(`shopping/invoices/create/detail/${c.id}`):"#edit_#"===t.datafield?a.editData(c):"#delete_#"===t.datafield?a.deleteData(c):a.refreshDetail(c.id)}deleteDetail(e){const t=this,c=t.translate;$.a.fire({title:c.instant("titleMessages.delete"),text:c.instant("bodyMessages.delete"),icon:"question",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:c.instant("buttons.yes"),cancelButtonText:c.instant("buttons.not")}).then(a=>{a.value&&t.api.delete(`/shopping/delete/detail/${e.id}`).subscribe(c=>{t.refreshDetail(e.invoice_id)},e=>{t.msg.toastMessage(c.instant("general.error"),e.error.message,4)})})}refreshDetail(e){const t=this;t.source2.localdata=[],t.detailGrid.updatebounddata("cells"),t.detailGrid.showloadelement(),t.shopSer.getDetail(e).subscribe(e=>{t.source2.localdata=e,t.detailGrid.updatebounddata("cells"),t.detailGrid.hideloadelement()},()=>t.detailGrid.hideloadelement())}createData(){super.createData(),this.goRoute("shopping/invoices/create")}editData(e){super.editData(e),this.goRoute(`shopping/invoices/edit/${e.id}`)}}return e.\u0275fac=function(t){return new(t||e)(f.Wb(_.b),f.Wb(_.a),f.Wb(g.c),f.Wb(m.d),f.Wb(g.a),f.Wb(F.e))},e.\u0275cmp=f.Qb({type:e,selectors:[["app-invoices"]],viewQuery:function(e,t){if(1&e&&(f.ad(H,1),f.ad(j,1),f.ad(Q,1),f.ad(J,1)),2&e){let e;f.Hc(e=f.nc())&&(t.customGrid=e.first),f.Hc(e=f.nc())&&(t.detailGrid=e.first),f.Hc(e=f.nc())&&(t.searchField=e.first),f.Hc(e=f.nc())&&(t.myTabs=e.first)}},features:[f.Fb],decls:93,vars:56,consts:[[3,"width","height","position","animationType","selectionTracker","theme"],["myTabs",""],[2,"margin-left","30px"],[1,"card"],[1,"card-header"],[1,"card-title"],[1,"menuExport"],[1,"space-right"],[1,"btn","btn-danger","round","mr-1","mb-1",3,"disabled","click"],[1,"fa","fa-sync","mr-1","fas-fa-22"],[1,"myMenu","space-right"],[1,"clearColor",3,"height","onItemclick"],["myMenu",""],["id","Exports"],[1,"fas","fa-cog","fas-fa-22","fas-fa-red"],["href","javascript:void(0)"],[2,"width","200px"],[1,"fas","fa-file-excel","fas-fa-xls"],[1,"fas","fa-file-csv","fas-fa-xls"],["type","separator"],[1,"fas","fa-file-pdf","fas-fa-pdf"],[1,"fas","fa-file-code","fas-fa-code"],[1,"fas","fa-print","fas-fa-print"],[1,"margin-left","space-right"],[1,"btn","btn-success","round","mr-1","mb-1",3,"disabled","click"],[1,"fa","fa-plus","mr-1","fas-fa-22"],[4,"ngIf"],[1,"container-fluid"],[1,"input-group"],["type","text","autofocus","",1,"form-control",3,"placeholder","keyup"],["searchField",""],[1,"input-group-append"],[1,"btn","btn-primary",3,"disabled","click"],[1,"fa","fa-search"],["width","100%",3,"disabled","auto-create","onCellselect","onBindingcomplete"],["customGrid",""],[1,"example-items-col"],["width","100%",3,"source","columns","theme","disabled","selectionmode","columnsresize","sortable","filterable","showfilterrow","onCellselect"],["detailGrid",""],[1,"fa","fa-upload","mr-1","fas-fa-22"]],template:function(e,t){1&e&&(f.cc(0,"jqxTabs",0,1),f.cc(2,"ul"),f.cc(3,"li",2),f.Uc(4,"Facturas"),f.bc(),f.cc(5,"li"),f.Uc(6,"Detalle de la factura"),f.bc(),f.bc(),f.cc(7,"div"),f.cc(8,"div",3),f.cc(9,"div",4),f.cc(10,"h4",5),f.Uc(11),f.pc(12,"uppercase"),f.bc(),f.bc(),f.cc(13,"div",3),f.cc(14,"div",6),f.cc(15,"div",7),f.cc(16,"button",8),f.mc("click",function(){return t.searchQuery()}),f.Xb(17,"i",9),f.bc(),f.bc(),f.cc(18,"div",10),f.cc(19,"jqxMenu",11,12),f.mc("onItemclick",function(e){return t.itemclick(e)}),f.cc(21,"ul"),f.cc(22,"li",13),f.Xb(23,"i",14),f.Xb(24,"a",15),f.cc(25,"ul",16),f.cc(26,"li"),f.cc(27,"a",15),f.Xb(28,"i",17),f.Uc(29),f.pc(30,"translate"),f.bc(),f.bc(),f.cc(31,"li"),f.cc(32,"a",15),f.Xb(33,"i",18),f.Uc(34),f.pc(35,"translate"),f.bc(),f.bc(),f.cc(36,"li"),f.cc(37,"a",15),f.Xb(38,"i",17),f.Uc(39),f.pc(40,"translate"),f.bc(),f.bc(),f.Xb(41,"li",19),f.cc(42,"li"),f.cc(43,"a",15),f.Xb(44,"i",20),f.Uc(45),f.pc(46,"translate"),f.bc(),f.bc(),f.Xb(47,"li",19),f.cc(48,"li"),f.cc(49,"a",15),f.Xb(50,"i",21),f.Uc(51),f.pc(52,"translate"),f.bc(),f.bc(),f.cc(53,"li"),f.cc(54,"a",15),f.Xb(55,"i",21),f.Uc(56),f.pc(57,"translate"),f.bc(),f.bc(),f.cc(58,"li"),f.cc(59,"a",15),f.Xb(60,"i",21),f.Uc(61),f.pc(62,"translate"),f.bc(),f.bc(),f.Xb(63,"li",19),f.cc(64,"li"),f.cc(65,"a",15),f.Xb(66,"i",22),f.Uc(67),f.pc(68,"translate"),f.bc(),f.bc(),f.bc(),f.bc(),f.bc(),f.bc(),f.bc(),f.cc(69,"div",23),f.cc(70,"button",24),f.mc("click",function(){return t.createData()}),f.Xb(71,"i",25),f.Uc(72),f.pc(73,"translate"),f.bc(),f.bc(),f.Sc(74,K,5,4,"div",26),f.bc(),f.cc(75,"div",27),f.cc(76,"fieldset"),f.cc(77,"div",28),f.cc(78,"input",29,30),f.mc("keyup",function(e){return t.inputKey(e)}),f.bc(),f.cc(80,"div",31),f.cc(81,"button",32),f.mc("click",function(){return t.searchQuery()}),f.Xb(82,"i",33),f.bc(),f.bc(),f.bc(),f.bc(),f.cc(83,"jqxGrid",34,35),f.mc("onCellselect",function(e){return t.cellClick(e)})("onBindingcomplete",function(e){return t.Bindingcomplete(e)}),f.bc(),f.bc(),f.bc(),f.bc(),f.bc(),f.cc(85,"div"),f.cc(86,"div",3),f.cc(87,"div",4),f.Uc(88),f.pc(89,"uppercase"),f.bc(),f.cc(90,"div",36),f.cc(91,"jqxGrid",37,38),f.mc("onCellselect",function(e){return t.cellDetailClick(e)}),f.bc(),f.bc(),f.bc(),f.bc(),f.bc()),2&e&&(f.vc("width","100%")("height",600)("position","top")("animationType","fade")("selectionTracker",!1)("theme",t.theme),f.Ib(11),f.Vc(f.qc(12,34,t.title)),f.Ib(5),f.vc("disabled",t.loading),f.Ib(3),f.vc("height",36),f.Ib(10),f.Vc(f.qc(30,36,"export.excel")),f.Ib(5),f.Vc(f.qc(35,38,"export.csv")),f.Ib(5),f.Vc(f.qc(40,40,"export.xml")),f.Ib(6),f.Vc(f.qc(46,42,"export.pdf")),f.Ib(6),f.Vc(f.qc(52,44,"export.html")),f.Ib(5),f.Vc(f.qc(57,46,"export.json")),f.Ib(5),f.Vc(f.qc(62,48,"export.tsv")),f.Ib(6),f.Vc(f.qc(68,50,"export.print")),f.Ib(3),f.vc("disabled",t.loading),f.Ib(2),f.Wc(" ",f.qc(73,52,"buttons.new")," "),f.Ib(2),f.vc("ngIf",t.useImport),f.Ib(4),f.vc("placeholder",t.placeholderSearch),f.Ib(3),f.vc("disabled",t.loading),f.Ib(2),f.vc("disabled",t.loading)("auto-create",!1),f.Ib(5),f.Wc("FACTURA N\xba: ",f.qc(89,54,t.invoiceName),""),f.Ib(3),f.vc("source",t.dataAdapter2)("columns",t.columnsDet)("theme",t.theme)("disabled",t.loading)("selectionmode","singlecell")("columnsresize",!0)("sortable",!0)("filterable",!0)("showfilterrow",!0))},directives:[r.a,o.a,a.n,i.a],pipes:[a.v,m.c],encapsulation:2}),e})();c("52YP");var Z=c("4IXu"),ee=c("Cx/d"),te=c("GCUp"),ce=c("PU63"),ae=c("K56k");const ne=["myDataTable"],ie=["searchbar"],oe=["invoiceEle"];function re(e,t){if(1&e&&(f.cc(0,"ng-option",61),f.Uc(1),f.bc()),2&e){const e=t.$implicit;f.vc("value",e.id),f.Ib(1),f.Yc(" ",e.dni," - ",e.full_name," ",e.company_name," ")}}function le(e,t){if(1&e&&(f.cc(0,"ng-option",61),f.Uc(1),f.bc()),2&e){const e=t.$implicit;f.vc("value",e.id),f.Ib(1),f.Wc(" ",e.branch_name," ")}}function se(e,t){if(1&e&&(f.cc(0,"ng-option",61),f.Uc(1),f.bc()),2&e){const e=t.$implicit;f.vc("value",e.id),f.Ib(1),f.Wc(" ",e.winery_name," ")}}function de(e,t){if(1&e&&(f.cc(0,"ng-option",61),f.Uc(1),f.bc()),2&e){const e=t.$implicit;f.vc("value",e.id),f.Ib(1),f.Wc(" ",e.payment_method," ")}}function be(e,t){if(1&e){const e=f.dc();f.cc(0,"div",62),f.mc("click",function(){f.Lc(e);const c=t.$implicit;return f.oc().onClickItem(c)}),f.Xb(1,"img",63),f.cc(2,"div",2),f.cc(3,"h6",64),f.Uc(4),f.pc(5,"currency"),f.bc(),f.cc(6,"p",65),f.Uc(7),f.bc(),f.bc(),f.bc()}if(2&e){const e=t.$implicit;f.Ib(1),f.vc("src",e.image,f.Oc),f.Ib(3),f.Wc(" ",f.qc(5,3,e.sale_price),""),f.Ib(3),f.Vc(e.product_name)}}function ue(e,t){1&e&&(f.cc(0,"div",5),f.cc(1,"div",21),f.cc(2,"div",7),f.cc(3,"label"),f.Uc(4,"Notas(Opcional)"),f.bc(),f.Xb(5,"textarea",66),f.bc(),f.bc(),f.bc())}let pe=(()=>{class e extends te.a{constructor(e,t,c,a,i,o,r,l,s,d,b,u,p,m,g,f,h,v){super(e,t,c,a,i,o,u,v,b,d),this.fb=e,this.msg=t,this.api=c,this.router=a,this.translate=i,this.aRouter=o,this.branchSer=r,this.perSer=l,this.currSer=s,this.reporstSer=d,this.itemsSer=b,this.spinner=u,this.documents=p,this.shopSer=m,this.taxSer=g,this.docsSer=f,this.wareHouseServ=h,this.modalService=v,this.title="Productos/Servicios",this.aDocuments=[],this.ware_house=[],this.providers=[],this.currency=[],this.items=[],this.itemsResult=[],this.lines=[],this.timeLimits=[],this.paymentMethods=[],this.payments=[],this.meansPayment=[],this.taxBill=[],this.taxSales=[],this.pointsOfSale=[],this.tax_rates=[],this.selectedRow=!1,this.isCounted=!0,this.perishable=!1,this.rowIndex=-1,this.invoice_id=0,this.pathfile="",this.itemName="",this.source={},this.taxRatesSource={},this.theme="bootstrap",this.customForm=this.fb.group({admission_date:[(new Date).toISOString().split("T")[0],[n.y.required]],invoice_nro:["",[n.y.required,n.y.minLength(2)]],notes:[""],pay_day:[(new Date).toISOString().split("T")[0],[n.y.required]],payment_id:["",[n.y.required]],warehouse_id:["0",[n.y.required]],point_of_sale_id:["0",[n.y.required]],provider_id:["0",[n.y.required]],discount:[0],vat:[0],sub_total:[0,[n.y.required]],total:[0,[n.y.required]],tax_sale_id:[0],tax_bill_id:[0],product_id:[0],invoice_id:[0]})}get invalidName(){return this.isInvalid("invoice_nro")}get invalidBranch(){return this.isInvalid("branch_id")}ngOnInit(){const e=this;e.showSpinner(),e.wareHouseServ.getData({}).subscribe(t=>{e.ware_house=t}),e.docsSer.getPaymentMethods({}).subscribe(t=>{e.payments=t,t.length>0&&e.customForm.get("payment_id").setValue(t[0].id)}),e.branchSer.getPointsOfSale({}).subscribe(t=>{e.pointsOfSale=t,t.length>0&&e.customForm.get("point_of_sale_id").setValue(t[0].id)}),e.perSer.getProviders({}).subscribe(t=>{e.providers=t}),super.ngOnInit()}ngAfterViewInit(){super.ngAfterViewInit();const e=this,t=e.customForm;e.invoiceEle.nativeElement.focus(),e.taxSer.getData({isVat:!0}).subscribe(c=>{e.taxBill=c,e.taxSales=c,c.length>0&&(t.get("tax_bill_id").setValue(c[0].id),t.get("tax_sale_id").setValue(c[0].id),e.taxBillSelect=c[0],e.taxSaleSelect=c[0],e.tax_rates=c,e.onCreateGrid())})}onCreateGrid(){const e=this;e.taxRatesSource={datatype:"array",datafields:[{name:"id",type:"number"},{name:"account_id",type:"number"},{name:"tax_gruop_id",type:"number"},{name:"name_taxe",type:"string"},{name:"rate_abbre",type:"string"},{name:"rate_name",type:"string"},{name:"account_name",type:"string"},{name:"is_exempt",type:"number"},{name:"decimal_rate",type:"number"},{name:"rate_value",type:"number"}],localdata:e.tax_rates},e.taxRatesAdapter=new jqx.dataAdapter(e.taxRatesSource,{autoBind:!0}),e.source={localdata:this.lines,datatype:"array",datafields:[{name:"product_class_name",type:"string"},{name:"sku",type:" string"},{name:"image",type:" string"},{name:"unit_name",type:" string"},{name:"unit_description",type:" string"},{name:"abbre_unit",type:" string"},{name:"qr_code",type:"string"},{name:"product_name",type:"string"},{name:"notes",type:"string"},{name:"description_sales",type:"string"},{name:"shopping_description",type:"string"},{name:"barcode",type:"string"},{name:"rate_name",type:"string"},{name:"internal_code",type:"string"},{name:"state",type:"number"},{name:"quantity",type:"number"},{name:"invoice_id",type:"number"},{name:"detail_id",type:"number"},{name:"total",type:"number"},{name:"discount",type:"number"},{name:"sale_price",type:"number"},{name:"purchase_cost",type:"number"},{name:"tax_amount",type:"number"},{name:"tax_bill_id",type:"number"},{name:"tax_bill",value:"tax_bill_id",values:{source:e.taxRatesAdapter.records,value:"id",name:"rate_value"}},{name:"tax_bill_rate",type:"number"},{name:"tax_sale_rate",type:"number"},{name:"stock_min",type:"number"},{name:"stock_max",type:"number"},{name:"tax_sales_id",type:"number"},{name:"tax_sales",value:"tax_sales_id",values:{source:e.taxRatesAdapter.records,value:"id",name:"rate_value"}},{name:"brand_id",type:" number"},{name:"stock",type:" number"},{name:"category_id",type:" number"},{name:"product_unit_id",type:" number"},{name:"factor",type:" number"},{name:"sub_category_id",type:" number"},{name:"gain",type:"number"},{name:"percentage_gain",type:"string"},{name:"item_type_id",type:"number"},{name:"unit_id",type:"number"},{name:"base_factor",type:"number"},{name:"class_id",type:"number"},{name:"average_cost",type:"number"},{name:"recipe",type:"boolean"},{name:"vat_included",type:"bool"},{name:"selling_out_of_inventory",type:"boolean"},{name:"perishable",type:"bool"},{name:"batch",type:"string"},{name:"fabrication_date",type:"date"},{name:"expiration_date",type:"date"},{name:"id",type:"number"}]},e.dataAdapter=new jqx.dataAdapter(e.source),e.columns=[{text:"#",sortable:!1,filterable:!1,editable:!1,align:"center",groupable:!1,draggable:!1,resizable:!1,datafield:"",columntype:"number",width:40,cellsrenderer:(e,t,c)=>'<div style="margin: 4px; text-align: right">'+(c+1)+"</div>"},{text:"Detalle",columngroup:"Shopping",dataField:"product_name",minWidth:300,align:"center",cellsAlign:"left",editable:!1},{text:"Cant",columngroup:"Shopping",dataField:"quantity",width:55,align:"center",cellsAlign:"right"},{text:"Precio de compra",columngroup:"Shopping",dataField:"purchase_cost",width:120,align:"center",cellsAlign:"right",cellsFormat:"c2"},{text:"IVA",columngroup:"Shopping",width:50,align:"center",datafield:"tax_sales_id",displayfield:"tax_sales",columntype:"combobox",createeditor:(t,c,a)=>{a.jqxComboBox({source:e.taxRatesAdapter,displayMember:"rate_value",valueMember:"id"})},cellvaluechanging:(e,t,c,a,n)=>{if(""==n)return a;setTimeout(()=>{this.onLineTotal(this.myDataTable.getrowdata(e),e)},50)}},{text:"Vr. IVA",columngroup:"Shopping",editable:!1,dataField:"tax_amount",width:120,align:"right",cellsAlign:"right",cellsFormat:"c2"},{text:"Iva incluido",columngroup:"Shopping",datafield:"vat_included",columntype:"checkbox",width:90,cellvaluechanging:(e,t,c,a,n)=>{setTimeout(()=>{this.onLineTotal(this.myDataTable.getrowdata(e),e)},50)}},{text:"Descuento",columngroup:"Shopping",dataField:"discount",width:120,align:"right",cellsAlign:"right",cellsFormat:"c2"},{text:"Total",columngroup:"Shopping",dataField:"total",width:100,align:"right",cellsAlign:"right",cellsFormat:"c2",editable:!1},{text:"Perecedero",columngroup:"Shopping",datafield:"perishable",columntype:"checkbox",width:80},{text:"Lote #",columngroup:"Shopping",dataField:"batch",minWidth:50,align:"center",cellsAlign:"left",editable:!1},{text:"Fecha fabricaci\xf3n",columngroup:"Shopping",datafield:"fabrication_date",columntype:"datetimeinput",width:110,cellsalign:"right",cellsformat:"d",validation:(e,t)=>!(t.getFullYear()<2021)||{result:!1,message:"Ship Date should be before 1/1/2021"}},{text:"Fecha expiraci\xf3n",columngroup:"Shopping",datafield:"expiration_date",columntype:"datetimeinput",width:110,cellsalign:"right",cellsformat:"d",validation:(e,t)=>!(t.getFullYear()<2021)||{result:!1,message:"Ship Date should be before 1/1/2021"}},{text:"Precio de venta",columngroup:"Sales",dataField:"sale_price",width:120,align:"center",cellsAlign:"right",cellsFormat:"c2"},{text:"IVA",columngroup:"Sales",width:50,align:"center",datafield:"tax_bill_id",displayfield:"tax_bill",columntype:"combobox",createeditor:(t,c,a)=>{a.jqxComboBox({source:e.taxRatesAdapter,displayMember:"rate_value",valueMember:"id"})},cellvaluechanging:(e,t,c,a,n)=>{if(""==n)return a}},{text:"Ganancia",columngroup:"Sales",dataField:"gain",width:120,align:"center",cellsAlign:"right",cellsFormat:"c2"},{text:"% Ganancia",columngroup:"Sales",dataField:"percentage_gain",width:110,align:"center",cellsAlign:"right"}],e.columngroups=[{text:"Compra",align:"center",name:"Shopping"},{text:"Venta",align:"center",name:"Sales"}],e.myDataTable.createComponent({source:e.dataAdapter,columnsresize:!0,editable:!0,enabletooltips:!0,altrows:!0,autoshowloadelement:!0,theme:e.theme,columns:e.columns,columngroups:e.columngroups}),e.onRefresh()}loadData(e=0){const t=this,c=t.customForm;t.editing=!0,t.shopSer.getData({uid:e}).subscribe({next:a=>{var n,i;t.invoice_id=e,c.get("invoice_nro").setValue(a[0].invoice_nro),c.get("total").setValue(a[0].total),c.get("provider_id").setValue(a[0].provider_id),c.get("admission_date").setValue(a[0].admission_date),c.get("discount").setValue(a[0].discount),c.get("vat").setValue(a[0].vat),c.get("notes").setValue(a[0].notes),c.get("pay_day").setValue(a[0].pay_day),c.get("payment_id").setValue(a[0].payment_method_id),c.get("warehouse_id").setValue(null!==(n=a[0].warehouse_id)&&void 0!==n?n:"0"),c.get("point_of_sale_id").setValue(null!==(i=a[0].point_of_sale_id)&&void 0!==i?i:"0"),c.get("sub_total").setValue(a[0].sub_total),t.getDeatailId(e)}})}getDeatailId(e){const t=this,c=t.myDataTable;t.showSpinner("Cargando detalle de la factura."),t.shopSer.getDetail(e).subscribe({next:e=>{e.map((e,a)=>{let n={};n=e,n.detail_id=e.id,n.id=e.product_id,c.addrow(null,n,a),setTimeout(()=>{t.onLineTotal(n,a)},5)})},error:e=>{t.hideSpinner(),t.msg.errorMessage("",e)}})}onRefresh(e=""){this.onSearchExecute(e)}onSearchExecute(e="",t=1){const c=this;c.showSpinner("Procesando petici\xf3n..."),c.itemsSer.getData({query:e,type:t,start:0,limit:60}).subscribe({next:e=>{c.items=e,c.itemsResult=e,c.hideSpinner(),c.msg.toastMessage("",`Se hallaron ${e.length} resultados.`)},error:e=>{c.hideSpinner(),c.msg.errorMessage("",e)}})}onLineTotal(e,t){let c=this.myDataTable;const a=this.tax_rates.find(t=>t.id==e.tax_sales_id),n=parseFloat(a.decimal_rate.toString()),i=parseFloat(e.discount.toString());let o=parseFloat(e.purchase_cost.toString())*parseFloat(e.quantity.toString())-i,r=o-o/n;e.vat_included||(n>1?r=o*n-o:n<1&&(r=o*n),o+=r),r=parseFloat(r.toFixed(2)),o=parseFloat(o.toFixed(2)),c.setcellvalue(t,"total",o),c.setcellvalue(t,"tax_amount",r),this.onSalesData(e,t),this.onSum()}onSum(){let e=0,t=0,c=0,a=0,n=this.customForm;const i=this.myDataTable.getrows();i.length>0&&i.map((n,i)=>{const o=n.quantity*n.purchase_cost;a+=parseFloat(n.discount.toString()),e+=o,t+=n.total,c+=n.tax_amount}),n.get("discount").setValue(a),n.get("sub_total").setValue(e-c),n.get("vat").setValue(c),n.get("total").setValue(t)}onSalesData(e,t){const c=this.myDataTable,a=parseFloat(e.purchase_cost.toString()),n=parseFloat(e.sale_price.toString()),i=this.tax_rates.find(t=>t.id==e.tax_bill_id),o=this.tax_rates.find(t=>t.id==e.tax_sales_id),r=parseFloat(i.decimal_rate.toString()),l=parseFloat(o.decimal_rate.toString());let s=0,d=0,b=0,u=0;d=1==e.vat_included?a/r:a,s=n/l,b=s-d,u=b/s*100,c.setcellvalue(t,"gain",b),c.setcellvalue(t,"percentage_gain",`${u.toFixed(2)} %`)}onSave(){const e=this;let t=e.customForm,c=t.getRawValue();const a=e.myDataTable.getrows();if(t.invalid)return e.msg.toastMessage("","Hay campos sin llenar.",4),!1;if(c.lines=JSON.stringify(a),e.showSpinner("Guardando factura"),e.invoice_id>0)c.invoice_id=e.invoice_id,e.api.put(`/shopping/update/${e.invoice_id}`,{records:JSON.stringify(c)}).subscribe({next:t=>{e.hideSpinner(),t.success?e.onClose():e.msg.errorMessage("",t.message)},error:t=>{e.hideSpinner(),e.msg.errorMessage("",t)}});else{if(a.length<=0)return e.hideSpinner(),e.msg.toastMessage("","No hay productos en el detalle de la factura.",4),!1;e.api.post("/shopping/create",c).subscribe({next:t=>{e.hideSpinner(),t.success?e.onClose():e.msg.errorMessage("",t.message)},error:t=>{e.hideSpinner(),e.msg.errorMessage("",t)}})}}onClose(){this.goRoute("shopping/invoices")}onDelete(){const e=this;let t=e.myDataTable.getrowdata(e.rowIndex);const c=e.translate;if(e.invoice_id>0){const a=t.detail_id;a>0?$.a.fire({title:c.instant("titleMessages.delete"),text:c.instant("bodyMessages.delete"),icon:"question",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:c.instant("buttons.yes"),cancelButtonText:c.instant("buttons.not")}).then(t=>{t.value&&(e.showSpinner(),e.api.delete(`/shopping/detail/delete/${a}`).subscribe({next:()=>{e.hideSpinner(),super.onDelete()},error:t=>{e.hideSpinner(),e.msg.errorMessage(c.instant("general.error"),t)}}))}):super.onDelete()}else super.onDelete()}}return e.\u0275fac=function(t){return new(t||e)(f.Wb(n.e),f.Wb(_.b),f.Wb(_.a),f.Wb(g.c),f.Wb(m.d),f.Wb(g.a),f.Wb(k.a),f.Wb(U.b),f.Wb(U.a),f.Wb(ce.a),f.Wb(w.e),f.Wb(p.c),f.Wb(Z.a),f.Wb(ee.a),f.Wb(U.f),f.Wb(Z.a),f.Wb(ae.a),f.Wb(d.r))},e.\u0275cmp=f.Qb({type:e,selectors:[["app-shopping"]],viewQuery:function(e,t){if(1&e&&(f.ad(ne,1),f.ad(ie,1),f.ad(oe,1)),2&e){let e;f.Hc(e=f.nc())&&(t.myDataTable=e.first),f.Hc(e=f.nc())&&(t.searchbar=e.first),f.Hc(e=f.nc())&&(t.invoiceEle=e.first)}},features:[f.Fb],decls:150,vars:43,consts:[[1,"card"],[1,"card-header"],[1,"card-body"],[3,"formGroup"],[1,"container-fluid","padding-top-bottom"],[1,"row"],[1,"col-md-4"],[1,"form-group"],[1,"asterisk"],["type","text","formControlName","invoice_nro","required","","autofocus","","placement","bottom","ngbTooltip","N\xba. de la factura",1,"form-control"],["focusElement","","invoiceEle",""],[1,"col-md-8"],["fullWidth","","formControlName","provider_id","required","","placement","bottom","ngbTooltip","Proveedor"],["value","0"],[3,"value",4,"ngFor","ngForOf"],[1,"col-md-6"],["fullWidth","","formControlName","point_of_sale_id","required","","placement","bottom","ngbTooltip","Punto de venta"],["fullWidth","","formControlName","warehouse_id","required","","placement","bottom","ngbTooltip","Bodega"],["fullWidth","","formControlName","payment_id","required",""],["type","date","formControlName","admission_date","required","",1,"form-control"],["type","date","formControlName","pay_day","required","",1,"form-control"],[1,"col"],[1,"page-search-input","form-group"],[1,"input-group"],["type","search","id","searchbar","placeholder","B\xfasqueda por nombre o referencia","autofocus","",1,"form-control","rounded-right","form-control-lg","shadow","pl-2",3,"keyup.enter"],["searchbar",""],[1,"input-group-append"],["type","button",1,"btn","btn-primary","search-btn","rounded","space-right",3,"click"],[1,"d-none","d-sm-block"],[1,"fas","fa-search"],["type","button","ngbTooltip","Crear nuevo producto",1,"btn","btn-success","space-right","radius-button",3,"click"],[1,"fas","fa-plus","fas-fa-22"],["type","button","ngbTooltip","Refrescar",1,"btn","btn-info","space-right","radius-button",3,"click"],[1,"fas","fa-sync","fas-fa-22"],["type","button","ngbTooltip","Limpiar",1,"btn","btn-danger","space-right","radius-button",3,"click"],[1,"fas","fa-broom","fas-fa-22"],["type","button","ngbTooltip","Cerrar",1,"btn","btn-danger","radius-button",3,"click"],[1,"fas","fa-times","fas-fa-22"],[1,"card-col-list"],[1,"card-columns"],["class","card card-sales",3,"click",4,"ngFor","ngForOf"],[1,"col-md-12","card-col"],[1,"col-sm-12","col-md-6","padding-top-bottom"],["type","button",1,"btn","radius-button","btn-primary","space-right","radius-button",3,"disabled","click"],[1,"fas","fa-trash-alt","fas-fa-22"],["type","button",1,"btn","radius-button","btn-success","space-right","radius-button",3,"disabled","click"],["type","button",1,"btn","radius-button","btn-danger","space-right",3,"disabled","click"],[1,"fas","fa-minus","fas-fa-22"],["type","button",1,"btn","radius-button","btn-info","space-right","radius-button",3,"disabled","click"],[1,"fas","fa-save","fas-fa-22","space-right"],["type","button",1,"btn","radius-button","btn-danger","radius-button",3,"disabled","click"],[1,"fas","fa-broom","fas-fa-22","space-right"],["currencyMask","","formControlName","total","aria-describedby","helpId","readonly","",1,"form-control","radius-button","small","total-bg"],[3,"auto-create","autoheight","width","onCellselect","onRowselect","Rowunselect","onCellendedit"],["myDataTable",""],["currencyMask","","formControlName","sub_total","aria-describedby","helpId","readonly","",1,"form-control","radius-button","small","total"],["currencyMask","","formControlName","discount","aria-describedby","helpId","readonly","",1,"form-control","radius-button","small","discounts"],["currencyMask","","formControlName","vat","aria-describedby","helpId","readonly","",1,"form-control","radius-button","small","vat"],["currencyMask","","formControlName","total","aria-describedby","helpId","readonly","",1,"form-control","radius-button","small","total"],["class","row",4,"ngIf"],[2,"color","white"],[3,"value"],[1,"card","card-sales",3,"click"],["fallimg","product",1,"img-product","card-img-top",3,"src"],[1,"price"],[1,"product-name"],["formControlName","notes",1,"form-control"]],template:function(e,t){if(1&e){const e=f.dc();f.cc(0,"div",0),f.cc(1,"div",1),f.Uc(2),f.pc(3,"uppercase"),f.pc(4,"translate"),f.bc(),f.cc(5,"div",2),f.cc(6,"form",3),f.cc(7,"div",4),f.cc(8,"div",5),f.cc(9,"div",6),f.cc(10,"div",7),f.cc(11,"label"),f.cc(12,"span",8),f.Uc(13),f.pc(14,"translate"),f.bc(),f.Uc(15,"N\xba. de la factura"),f.bc(),f.Xb(16,"input",9,10),f.bc(),f.bc(),f.cc(19,"div",11),f.cc(20,"div",7),f.cc(21,"label"),f.cc(22,"span",8),f.Uc(23),f.pc(24,"translate"),f.bc(),f.Uc(25,"Proveedor"),f.bc(),f.cc(26,"ng-select",12),f.cc(27,"ng-option",13),f.Uc(28,"Seleccionar proveedor"),f.bc(),f.Sc(29,re,2,4,"ng-option",14),f.bc(),f.bc(),f.bc(),f.bc(),f.cc(30,"div",5),f.cc(31,"div",15),f.cc(32,"div",7),f.cc(33,"label"),f.cc(34,"span",8),f.Uc(35),f.pc(36,"translate"),f.bc(),f.Uc(37,"Punto de venta"),f.bc(),f.cc(38,"ng-select",16),f.cc(39,"ng-option",13),f.Uc(40,"Seleccionar punto de venta"),f.bc(),f.Sc(41,le,2,2,"ng-option",14),f.bc(),f.bc(),f.bc(),f.cc(42,"div",15),f.cc(43,"div",7),f.cc(44,"label"),f.Uc(45,"Bodega"),f.bc(),f.cc(46,"ng-select",17),f.cc(47,"ng-option",13),f.Uc(48,"Seleccionar una bodega"),f.bc(),f.Sc(49,se,2,2,"ng-option",14),f.bc(),f.bc(),f.bc(),f.bc(),f.cc(50,"div",5),f.cc(51,"div",6),f.cc(52,"div",7),f.cc(53,"label"),f.cc(54,"span",8),f.Uc(55),f.pc(56,"translate"),f.bc(),f.Uc(57,"Forma de pago"),f.bc(),f.cc(58,"ng-select",18),f.Sc(59,de,2,2,"ng-option",14),f.bc(),f.bc(),f.bc(),f.cc(60,"div",6),f.cc(61,"div",7),f.cc(62,"label"),f.cc(63,"span",8),f.Uc(64),f.pc(65,"translate"),f.bc(),f.Uc(66,"Fecha de emisi\xf3n"),f.bc(),f.Xb(67,"input",19),f.bc(),f.bc(),f.cc(68,"div",6),f.cc(69,"div",7),f.cc(70,"label"),f.cc(71,"span",8),f.Uc(72),f.pc(73,"translate"),f.bc(),f.Uc(74,"Fecha de pago"),f.bc(),f.Xb(75,"input",20),f.bc(),f.bc(),f.bc(),f.cc(76,"div",5),f.cc(77,"div",21),f.cc(78,"div",5),f.cc(79,"div",21),f.cc(80,"div",22),f.cc(81,"fieldset"),f.cc(82,"div",23),f.cc(83,"input",24,25),f.mc("keyup.enter",function(){f.Lc(e);const c=f.Ic(84);return t.onSearchProducts(c.value,1)}),f.bc(),f.cc(85,"div",26),f.cc(86,"button",27),f.mc("click",function(){f.Lc(e);const c=f.Ic(84);return t.onSearchProducts(c.value,1)}),f.Xb(87,"span",28),f.Xb(88,"i",29),f.bc(),f.cc(89,"button",30),f.mc("click",function(){return t.onCreateProduct()}),f.Xb(90,"i",31),f.bc(),f.cc(91,"button",32),f.mc("click",function(){f.Lc(e);const c=f.Ic(84);return t.onRefresh(c.value)}),f.Xb(92,"i",33),f.bc(),f.cc(93,"button",34),f.mc("click",function(){return t.onClearFilter()}),f.Xb(94,"i",35),f.bc(),f.cc(95,"button",36),f.mc("click",function(){return t.onClose()}),f.Xb(96,"i",37),f.bc(),f.bc(),f.bc(),f.bc(),f.bc(),f.bc(),f.bc(),f.bc(),f.bc(),f.cc(97,"div",5),f.cc(98,"div",21),f.cc(99,"div",38),f.cc(100,"div",39),f.Sc(101,be,8,5,"div",40),f.bc(),f.bc(),f.bc(),f.bc(),f.cc(102,"div",5),f.cc(103,"div",41),f.cc(104,"div",5),f.cc(105,"div",42),f.cc(106,"button",43),f.mc("click",function(){return t.onDelete()}),f.Xb(107,"i",44),f.bc(),f.cc(108,"button",45),f.mc("click",function(){return t.onAdd()}),f.Xb(109,"i",31),f.bc(),f.cc(110,"button",46),f.mc("click",function(){return t.onMinus()}),f.Xb(111,"i",47),f.bc(),f.cc(112,"button",48),f.mc("click",function(){return t.onSave()}),f.Xb(113,"i",49),f.Uc(114,"Guardar "),f.bc(),f.cc(115,"button",50),f.mc("click",function(){return t.onCancel()}),f.Xb(116,"i",51),f.Uc(117,"Cancelar "),f.bc(),f.bc(),f.cc(118,"div",42),f.Xb(119,"input",52),f.bc(),f.bc(),f.cc(120,"div",5),f.cc(121,"div",21),f.cc(122,"jqxGrid",53,54),f.mc("onCellselect",function(e){return t.onCelSelect(e)})("onRowselect",function(e){return t.onRowSelect(e)})("Rowunselect",function(e){return t.onRowUnselect(e)})("onCellendedit",function(e){return t.onCellEndEdit(e)}),f.bc(),f.bc(),f.bc(),f.cc(124,"div",5),f.cc(125,"div",15),f.cc(126,"div",7),f.cc(127,"label"),f.Uc(128," Subtotal"),f.bc(),f.Xb(129,"input",55),f.bc(),f.bc(),f.cc(130,"div",15),f.cc(131,"div",7),f.cc(132,"label"),f.Uc(133," Descuento"),f.bc(),f.Xb(134,"input",56),f.bc(),f.bc(),f.bc(),f.cc(135,"div",5),f.cc(136,"div",15),f.cc(137,"div",7),f.cc(138,"label"),f.Uc(139," IVA"),f.bc(),f.Xb(140,"input",57),f.bc(),f.bc(),f.cc(141,"div",15),f.cc(142,"div",7),f.cc(143,"label"),f.Uc(144," Total"),f.bc(),f.Xb(145,"input",58),f.bc(),f.bc(),f.bc(),f.Sc(146,ue,6,0,"div",59),f.bc(),f.bc(),f.bc(),f.bc(),f.bc(),f.bc(),f.cc(147,"ngx-spinner"),f.cc(148,"p",60),f.Uc(149),f.bc(),f.bc()}2&e&&(f.Ib(2),f.Wc(" ",f.qc(3,27,f.qc(4,29,"general.createEdit"))," FACTURA DE COMPRA "),f.Ib(4),f.vc("formGroup",t.customForm),f.Ib(7),f.Wc(" ",f.qc(14,31,"general.asterisk"),""),f.Ib(3),f.Ob("status-danger",t.invalidName)("is-invalid",t.invalidName),f.Ib(7),f.Wc(" ",f.qc(24,33,"general.asterisk"),""),f.Ib(6),f.vc("ngForOf",t.providers),f.Ib(6),f.Wc(" ",f.qc(36,35,"general.asterisk"),""),f.Ib(6),f.vc("ngForOf",t.pointsOfSale),f.Ib(8),f.vc("ngForOf",t.ware_house),f.Ib(6),f.Wc(" ",f.qc(56,37,"general.asterisk"),""),f.Ib(4),f.vc("ngForOf",t.payments),f.Ib(5),f.Wc(" ",f.qc(65,39,"general.asterisk"),""),f.Ib(8),f.Wc(" ",f.qc(73,41,"general.asterisk"),""),f.Ib(29),f.vc("ngForOf",t.itemsResult),f.Ib(5),f.vc("disabled",!t.selectedRow),f.Ib(2),f.vc("disabled",!t.selectedRow),f.Ib(2),f.vc("disabled",!t.selectedRow),f.Ib(2),f.vc("disabled",!t.selectedRow),f.Ib(3),f.vc("disabled",!t.selectedRow||t.invoice_id>0),f.Ib(7),f.vc("auto-create",!1)("autoheight",!0)("width",t.getWidth()),f.Ib(24),f.vc("ngIf",!t.editing),f.Ib(3),f.Wc(" ",t.maskSpinner," "))},directives:[n.z,n.q,n.h,n.c,n.p,n.g,n.w,d.N,s.a,s.d,a.m,b.a,i.a,a.n,p.a],pipes:[a.v,m.c,a.d],styles:["@media (min-width:768px){.card-columns[_ngcontent-%COMP%]{-moz-column-count:4;column-count:4}}@media (min-width:992px){.card-columns[_ngcontent-%COMP%]{-moz-column-count:6;column-count:6}}@media (min-width:1200px){.card-columns[_ngcontent-%COMP%]{-moz-column-count:8;column-count:8}}.create-customer[_ngcontent-%COMP%]{background-color:#a50721!important;color:#fff!important;font-weight:700!important}.search-custom[_ngcontent-%COMP%]{background:#fff!important;border-radius:10px;box-shadow:0 2px 8px 0 rgba(50,50,50,.322);padding-bottom:5px!important}.card-col-list[_ngcontent-%COMP%]{max-height:250px;overflow:auto}.card-col[_ngcontent-%COMP%]{max-height:870px;min-height:200px;overflow:auto}.discounts[_ngcontent-%COMP%]{color:green;font-weight:700}.total[_ngcontent-%COMP%], .total-bg[_ngcontent-%COMP%]{color:red;font-weight:700}.total-bg[_ngcontent-%COMP%]{font-size:24px}.vat[_ngcontent-%COMP%]{color:#00f;font-weight:700}.card-sales[_ngcontent-%COMP%]{border:2px solid hsla(0,0%,100%,.247);box-shadow:0 2px 6px 0 rgba(50,50,50,.322);margin:5px!important;min-height:138px!important}.card-sales[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]{color:red;font-size:16px;font-weight:700;margin-bottom:auto;margin-top:auto;padding-bottom:4px;padding-top:4px;text-align:right}.card-sales[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{padding:4px}.card-sales[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]:hover{background-color:red;color:#fff}.card-sales[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]:hover   .price[_ngcontent-%COMP%]{color:#fff}.card-sales[_ngcontent-%COMP%]   .product-name[_ngcontent-%COMP%]{font-size:12px;font-weight:700;margin-bottom:0!important;text-align:center;text-transform:uppercase}.card-sales[_ngcontent-%COMP%]   .img-product[_ngcontent-%COMP%]{display:block;margin:auto;max-width:62px}.card-sales[_ngcontent-%COMP%]   .img-product[_ngcontent-%COMP%]:hover{border-radius:10px;box-shadow:0 2px 8px 0 rgba(50,50,50,.75)}.card-sales[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding-bottom:1px!important;padding-left:4px;padding-right:4px;padding-top:1px!important}.card-sales[_ngcontent-%COMP%]:hover{border:2px solid rgba(23,58,253,.12156862745098039);cursor:pointer}.card-sales[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]:hover{background-color:#173afd;color:#fff}.product-name-header[_ngcontent-%COMP%]{background-color:#639;border:2px solid hsla(0,0%,100%,.5137254901960784);border-radius:25px;color:#fff;font-size:16px;font-weight:700;height:32px;padding:4px;text-align:center;word-break:break-all}"]}),e})();var me=c("xg8E");const ge=["customGrid"],fe=["myDataTable"],he=["searchField"],ve=["focusElement"],_e=["amountElement"],ye=["cashele"],xe=["searchbar"],Ce=["myTabs"];function Se(e,t){if(1&e){const e=f.dc();f.cc(0,"div",59),f.mc("click",function(){f.Lc(e);const c=t.$implicit;return f.oc().onClickItem(c)}),f.Xb(1,"img",60),f.cc(2,"div",2),f.cc(3,"h6",61),f.Uc(4),f.pc(5,"currency"),f.bc(),f.cc(6,"p",62),f.Uc(7),f.bc(),f.bc(),f.bc()}if(2&e){const e=t.$implicit;f.Ib(1),f.vc("src",e.image,f.Oc),f.Ib(3),f.Wc(" ",f.qc(5,3,e.sale_price),""),f.Ib(3),f.Vc(e.product_name)}}function Ie(e,t){if(1&e&&(f.cc(0,"ng-option",63),f.Uc(1),f.bc()),2&e){const e=t.$implicit;f.vc("value",e.id),f.Ib(1),f.Xc(" ",e.name_taxe," - ",e.rate_value," % ")}}function we(e,t){if(1&e&&(f.cc(0,"ng-option",63),f.Uc(1),f.bc()),2&e){const e=t.$implicit;f.vc("value",e.id),f.Ib(1),f.Xc(" ",e.name_taxe," - ",e.rate_value," % ")}}function Fe(e,t){if(1&e&&(f.cc(0,"div",31),f.cc(1,"label",64),f.Uc(2,"Lote #"),f.bc(),f.cc(3,"div",65),f.Xb(4,"input",66),f.bc(),f.bc()),2&e){const e=f.oc();f.Ib(4),f.vc("readonly",!e.perishable)}}function ke(e,t){if(1&e&&(f.cc(0,"div",31),f.cc(1,"label",64),f.Uc(2,"Fecha de fabricaci\xf3n"),f.bc(),f.cc(3,"div",65),f.Xb(4,"input",67),f.bc(),f.bc()),2&e){const e=f.oc();f.Ib(4),f.vc("readonly",!e.perishable)}}function Ue(e,t){if(1&e&&(f.cc(0,"div",31),f.cc(1,"label",64),f.Uc(2,"Fecha de vencimiento"),f.bc(),f.cc(3,"div",65),f.Xb(4,"input",68),f.bc(),f.bc()),2&e){const e=f.oc();f.Ib(4),f.vc("readonly",!e.perishable)}}const Oe=[{path:"",component:h,children:[{path:"invoices",component:Y},{path:"invoices/create",component:pe},{path:"invoices/edit/:id",component:pe},{path:"invoices/create/detail/:id",component:pe},{path:"invoices/detail/edit/:id",component:(()=>{class e extends me.a{constructor(e,t,c,a,n,i,o,r,l,s,d,b,u){super(e,t,c,a,n,i,s),this.fb=e,this.msg=t,this.api=c,this.router=a,this.translate=n,this.aRouter=i,this.currSer=o,this.reporstSer=r,this.itemsSer=l,this.spinner=s,this.documents=d,this.shopSer=b,this.taxSer=u,this.title="Productos/Servicios",this.items=[],this.itemsResult=[],this.lines=[],this.taxBill=[],this.taxSales=[],this.perishable=!1,this.itemName="",this.oldItem=[],this.customForm=this.fb.group({amount:[""],batch:[""],expiration_date:[""],fabrication_date:[""],product_name:[""],sale_price:[""],tax_bill_id:[""],tax_sale_id:[""],total_cost:[""],unit_cost:[""],unit_price:[""],gain:[""],percentage_gain:[""],vat_included:[""]})}ngOnInit(){const e=this;e.showSpinner(),e.taxSer.getData({isVat:!0}).subscribe(t=>{e.taxBill=t,e.taxSales=t,super.ngOnInit()})}ngAfterViewInit(){}loadData(e=0){const t=this;t.editing=!0,t.shopSer.getDetailID(e).subscribe(e=>{t.oldItem=e,t.onClearForm(),t.onRefresh()})}onChangeUnitPrice(){this.onPurchaseData()}onChangeSalePrice(){this.onSalesData()}onClickItem(e){const t=this,c=t.customForm;let a=e;const n=t.translate;2!==a.class_id?$.a.fire({title:"Cambiar item",text:"Est\xe1 a punto de cambiar el ITEM, \xbfDesea continuar.?",icon:"question",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:n.instant("buttons.yes"),cancelButtonText:n.instant("buttons.not")}).then(e=>{if(e.value){t.perishable=a.perishable;const e=parseFloat(a.purchase_cost.toString())/parseFloat(a.tax_bill_rate.toString());c.get("amount").setValue(1),c.get("unit_price").setValue(e),c.get("tax_bill_id").setValue(a.tax_bill_id),c.get("tax_sale_id").setValue(a.tax_sales_id);let n=parseFloat((e*a.percentage_gain/100).toString())+e;a.sale_price>n&&(n=a.sale_price),c.get("sale_price").setValue(n),t.itemSelect=a,t.itemName=a.product_name,t.onChageTaxBill(a.tax_bill_id),t.onChangeTaxSale(a.tax_sales_id)}}):(t.msg.toastMessage("","El item seleccionado no maneja inventarios.",4),t.onClearForm())}onClearFilter(){this.onClearForm(),this.searchField.nativeElement.value="",this.itemsResult=this.items}onRefresh(){const e=this;e.showSpinner("Cargando listado de productos."),e.itemsSer.getDataSales({}).subscribe(t=>{e.items=t,e.hideSpinner(),e.itemsResult=e.items},()=>e.hideSpinner())}onSearchProducts(e){const t=this;t.showSpinner(),t.onClearForm(),0===t.items.length&&e.length>0?t.itemsSer.getDataSales({}).subscribe(c=>{t.items=c,t.hideSpinner(),t.itemsResult=t.items.filter(t=>t.product_name.toLowerCase().indexOf(e.toLowerCase())>=0)}):e.length>0?(t.itemsResult=t.items.filter(t=>t.product_name.toLowerCase().indexOf(e.toLowerCase())>=0),t.hideSpinner()):(t.itemsResult=t.items,t.hideSpinner())}onClearForm(){const e=this,t=e.customForm,c=e.oldItem;e.itemSelect=null,e.itemName="",e.taxBillSelect=e.taxBill.find(e=>e.id===c[0].tax_bill_id);let a=c[0].unit_cost;c[0].vat_included||(a=parseFloat(c[0].unit_cost.toString())/parseFloat(e.taxBillSelect.decimal_rate.toString())),t.setValue({amount:c[0].amount,batch:c[0].batch,expiration_date:c[0].expiration_date,fabrication_date:c[0].fabrication_date,product_name:c[0].product_name,sale_price:c[0].sale_price,tax_bill_id:c[0].tax_bill_id,tax_sale_id:c[0].tax_sale_id,total_cost:c[0].total_cost,unit_cost:c[0].unit_cost,unit_price:a,gain:0,percentage_gain:0,vat_included:c[0].vat_included}),e.perishable=c[0].perishable,e.onChageTaxBill(c[0].tax_bill_id),e.onChangeTaxSale(c[0].tax_sale_id),e.onPurchaseData()}onChageTaxBill(e){this.taxBillSelect=this.taxBill.find(t=>t.id===e),this.onPurchaseData()}onChageAmount(e){this.onPurchaseData()}onChageIncluded(e){this.onPurchaseData()}onChangeTaxSale(e){this.taxSaleSelect=this.taxSales.find(t=>t.id===e),this.onSalesData()}onSalesData(){const e=this;if(e.taxSaleSelect){const t=e.customForm,c=parseFloat(t.get("unit_price").value),a=parseFloat(t.get("sale_price").value),n=parseFloat(e.taxBillSelect.decimal_rate.toString()),i=parseFloat(e.taxSaleSelect.decimal_rate.toString());let o=0,r=0,l=0,s=0;r=1==t.get("vat_included").value?c/n:c,o=a/i,l=o-r,s=l/o*100,t.get("gain").setValue(l),t.get("percentage_gain").setValue(`${s.toFixed(2)} %`)}}onPurchaseData(){const e=this;if(e.taxBillSelect){const t=e.customForm,c=parseFloat(t.get("amount").value),a=parseFloat(t.get("unit_price").value),n=parseFloat(e.taxBillSelect.decimal_rate.toString()),i=n>0?a*n:a,o=i*c;1==t.get("vat_included").value?(t.get("unit_cost").setValue(a),t.get("total_cost").setValue(a*c)):(t.get("unit_cost").setValue(i),t.get("total_cost").setValue(o)),c>0&&e.onSalesData()}}onSave(e={}){const t=this;let c=t.customForm;const a=t.uid;let n=c.getRawValue();return parseFloat(n.amount)<=0||parseFloat(n.sale_price)<=0||parseFloat(n.unit_cost)<=0?(t.msg.toastMessage("","Hay un error en las cantidades.",4),!1):c.invalid?(t.msg.toastMessage("","Hay campos sin llenar.",4),!1):void(a?t.onSaveDetail(n):t.msg.toastMessage("Error","Error en la aplicaci\xf3n"))}onSaveDetail(e){const t=this;t.showSpinner("Guardando cambios"),t.itemSelect?(t.itemSelect.perishable||(e.batch=null,e.fabrication_date=null,e.expiration_date=null),e.product_id=t.itemSelect.id):t.oldItem[0].perishable||(e.batch=null,e.fabrication_date=null,e.expiration_date=null);let c={records:JSON.stringify(e)};t.api.put(`/shopping/update/detail/${t.uid}`,c).subscribe(e=>{e.success?(t.msg.toastMessage("","Los cambios se han guardado correctamente."),t.onClose()):t.msg.toastMessage("",e.message,4),t.hideSpinner()},e=>{t.hideSpinner()})}onClose(){this.goRoute("shopping/invoices")}}return e.\u0275fac=function(t){return new(t||e)(f.Wb(n.e),f.Wb(_.b),f.Wb(_.a),f.Wb(g.c),f.Wb(m.d),f.Wb(g.a),f.Wb(U.a),f.Wb(ce.a),f.Wb(w.e),f.Wb(p.c),f.Wb(Z.a),f.Wb(ee.a),f.Wb(U.f))},e.\u0275cmp=f.Qb({type:e,selectors:[["app-detail-edit"]],viewQuery:function(e,t){if(1&e&&(f.ad(ge,1),f.ad(fe,1),f.ad(he,1),f.ad(ve,1),f.ad(_e,1),f.ad(ye,1),f.ad(xe,1),f.ad(Ce,1)),2&e){let e;f.Hc(e=f.nc())&&(t.customGrid=e.first),f.Hc(e=f.nc())&&(t.myDataTable=e.first),f.Hc(e=f.nc())&&(t.searchField=e.first),f.Hc(e=f.nc())&&(t.focusElement=e.first),f.Hc(e=f.nc())&&(t.amountElement=e.first),f.Hc(e=f.nc())&&(t.cashele=e.first),f.Hc(e=f.nc())&&(t.searchbar=e.first),f.Hc(e=f.nc())&&(t.myTabs=e.first)}},features:[f.Fb],decls:114,vars:14,consts:[[1,"card"],[1,"card-header"],[1,"card-body"],[3,"formGroup"],[1,"container-fluid","padding-top-bottom"],[1,"row"],[1,"col"],[1,"form-group"],["type","text","nbinput","","fullWidth","","formControlName","product_name",1,"form-control",3,"readOnly"],[1,"col-md-7"],[1,"page-search-input","form-group"],[1,"input-group"],["type","search","id","searchbar","placeholder","B\xfasqueda","autofocus","",1,"form-control","rounded-right","form-control-lg","shadow","pl-2",3,"keyup.enter"],["searchField",""],[1,"input-group-append"],["type","button",1,"btn","btn-primary","search-btn","rounded","space-right",3,"click"],[1,"d-none","d-sm-block"],[1,"fas","fa-search"],["type","button","ngbTooltip","Crear nuevo producto",1,"btn","btn-success","space-right","radius-button"],[1,"fas","fa-plus","fas-fa-22"],["type","button","ngbTooltip","Refrescar",1,"btn","btn-info","space-right","radius-button",3,"click"],[1,"fas","fa-sync","fas-fa-22"],["type","button","ngbTooltip","Limpiar",1,"btn","btn-danger","space-right","radius-button",3,"click"],[1,"fas","fa-broom","fas-fa-22"],["type","button","ngbTooltip","Cerrar",1,"btn","btn-danger","radius-button",3,"click"],[1,"fas","fa-times","fas-fa-22"],[1,"col","product-name-header"],[1,"col","card-col"],[1,"card-columns"],["class","card card-sales",3,"click",4,"ngFor","ngForOf"],[1,"col-md-5","card-col"],[1,"form-group","row"],["for","inputQuantity",1,"col-sm-3","col-form-label"],[1,"col-sm-9"],["type","number","id","inputQuantity","placeholder","Cantidad","formControlName","amount",1,"form-control",3,"change"],["amountElement",""],["for","selectBill",1,"col-sm-3","col-form-label"],["id","selectBill","formControlName","tax_bill_id",3,"change"],[3,"value",4,"ngFor","ngForOf"],[1,"form-check"],["type","checkbox","id","ckInclude","formControlName","vat_included",1,"form-check-input",3,"change"],["for","ckInclude",1,"form-check-label"],["for","inputAmount1",1,"col-sm-3","col-form-label"],["formControlName","unit_price","currencyMask","","type","text","id","inputAmount1","ngbTooltip","Costo unitario sin impuesto","placeholder","Costo unitario",1,"form-control",3,"keyup"],[1,"col-sm-6"],["formControlName","unit_cost","currencyMask","","type","text","id","inputAmount","ngbTooltip","Costo unitario con impuesto","placeholder","Costo unitario","readonly","",1,"form-control","radius-button","total"],["formControlName","total_cost","type","text","currencyMask","","placeholder","Total","readonly","",1,"form-control","radius-button","total"],["for","selectSale",1,"col-sm-4","col-form-label"],[1,"col-sm-8"],["id","selectSale","formControlName","tax_sale_id",3,"change"],["for","salePrice",1,"col-sm-4","col-form-label"],["formControlName","sale_price","currencyMask","","type","text","id","salePrice","placement","bottom","ngbTooltip","Precio de venta con impuesto incluido","placeholder","Precio de venta",1,"form-control",3,"keyup"],[1,"col-sm-4","col-form-label"],["readonly","","formControlName","gain","currencyMask","","type","text","placement","bottom","ngbTooltip","Ganancia posible","placeholder","Ganancia posible",1,"form-control"],["readonly","","formControlName","percentage_gain","type","text","placement","bottom","ngbTooltip","Procentaje Ganancia posible",1,"form-control"],["class","form-group row",4,"ngIf"],["type","button",1,"btn","radius-button","btn-primary","space-right","radius-button","btn-block",3,"disabled","click"],[1,"fas","fa-save","fas-fa-22"],[2,"color","white"],[1,"card","card-sales",3,"click"],["fallimg","product",1,"img-product","card-img-top",3,"src"],[1,"price"],[1,"product-name"],[3,"value"],[1,"col-sm-5","col-form-label"],[1,"col-sm-7"],["formControlName","batch","type","text",1,"form-control",3,"readonly"],["formControlName","fabrication_date","type","date",1,"form-control",3,"readonly"],["formControlName","expiration_date","type","date",1,"form-control",3,"readonly"]],template:function(e,t){if(1&e){const e=f.dc();f.cc(0,"div",0),f.cc(1,"div",1),f.Uc(2," EDITAR DETALLE DEL ITEM "),f.bc(),f.cc(3,"div",2),f.cc(4,"form",3),f.cc(5,"div",4),f.cc(6,"div",5),f.cc(7,"div",6),f.cc(8,"div",7),f.cc(9,"label"),f.Uc(10,"Nombre del producto."),f.bc(),f.Xb(11,"input",8),f.bc(),f.bc(),f.bc(),f.cc(12,"div",5),f.cc(13,"div",9),f.cc(14,"div",5),f.cc(15,"div",6),f.cc(16,"div",10),f.cc(17,"fieldset"),f.cc(18,"div",11),f.cc(19,"input",12,13),f.mc("keyup.enter",function(){f.Lc(e);const c=f.Ic(20);return t.onSearchProducts(c.value)}),f.bc(),f.cc(21,"div",14),f.cc(22,"button",15),f.mc("click",function(){f.Lc(e);const c=f.Ic(20);return t.onSearchProducts(c.value)}),f.Xb(23,"span",16),f.Xb(24,"i",17),f.bc(),f.cc(25,"button",18),f.Xb(26,"i",19),f.bc(),f.cc(27,"button",20),f.mc("click",function(){return t.onRefresh()}),f.Xb(28,"i",21),f.bc(),f.cc(29,"button",22),f.mc("click",function(){return t.onClearFilter()}),f.Xb(30,"i",23),f.bc(),f.cc(31,"button",24),f.mc("click",function(){return t.onClose()}),f.Xb(32,"i",25),f.bc(),f.bc(),f.bc(),f.bc(),f.bc(),f.bc(),f.bc(),f.cc(33,"div",5),f.cc(34,"div",26),f.cc(35,"label"),f.cc(36,"span"),f.Uc(37),f.bc(),f.bc(),f.bc(),f.bc(),f.cc(38,"div",5),f.cc(39,"div",27),f.cc(40,"div",28),f.Sc(41,Se,8,5,"div",29),f.bc(),f.bc(),f.bc(),f.bc(),f.cc(42,"div",30),f.cc(43,"div",5),f.cc(44,"div",6),f.cc(45,"div",0),f.cc(46,"div",1),f.Uc(47," Datos de compra "),f.bc(),f.cc(48,"div"),f.cc(49,"div",31),f.cc(50,"label",32),f.Uc(51,"Cantidad"),f.bc(),f.cc(52,"div",33),f.cc(53,"input",34,35),f.mc("change",function(e){return t.onChageAmount(e)}),f.bc(),f.bc(),f.bc(),f.cc(55,"div",31),f.cc(56,"label",36),f.Uc(57,"Impuesto"),f.bc(),f.cc(58,"div",33),f.cc(59,"ng-select",37),f.mc("change",function(e){return t.onChageTaxBill(e)}),f.Sc(60,Ie,2,3,"ng-option",38),f.bc(),f.bc(),f.bc(),f.cc(61,"div",31),f.cc(62,"div",39),f.cc(63,"input",40),f.mc("change",function(e){return t.onChageIncluded(e)}),f.bc(),f.cc(64,"label",41),f.Uc(65," Incluido "),f.bc(),f.bc(),f.bc(),f.cc(66,"div",31),f.cc(67,"label",42),f.Uc(68,"Costo U."),f.bc(),f.cc(69,"div",33),f.cc(70,"input",43),f.mc("keyup",function(){return t.onChangeUnitPrice()}),f.bc(),f.bc(),f.bc(),f.cc(71,"div",31),f.cc(72,"div",44),f.Xb(73,"input",45),f.bc(),f.cc(74,"div",44),f.Xb(75,"input",46),f.bc(),f.bc(),f.bc(),f.bc(),f.bc(),f.bc(),f.cc(76,"div",5),f.cc(77,"div",6),f.cc(78,"div",0),f.cc(79,"div"),f.Uc(80," Datos de venta "),f.bc(),f.cc(81,"div"),f.cc(82,"div",31),f.cc(83,"label",47),f.Uc(84,"Impuesto"),f.bc(),f.cc(85,"div",48),f.cc(86,"ng-select",49),f.mc("change",function(e){return t.onChangeTaxSale(e)}),f.Sc(87,we,2,3,"ng-option",38),f.bc(),f.bc(),f.bc(),f.cc(88,"div",31),f.cc(89,"label",50),f.Uc(90,"Precio de venta"),f.bc(),f.cc(91,"div",48),f.cc(92,"input",51),f.mc("keyup",function(){return t.onChangeSalePrice()}),f.bc(),f.bc(),f.bc(),f.cc(93,"div",31),f.cc(94,"label",52),f.Uc(95,"Ganancia posible"),f.bc(),f.cc(96,"div",48),f.Xb(97,"input",53),f.bc(),f.bc(),f.cc(98,"div",31),f.cc(99,"label",52),f.Uc(100,"% Ganancia"),f.bc(),f.cc(101,"div",48),f.Xb(102,"input",54),f.bc(),f.bc(),f.Sc(103,Fe,5,1,"div",55),f.Sc(104,ke,5,1,"div",55),f.Sc(105,Ue,5,1,"div",55),f.cc(106,"div",7),f.cc(107,"button",56),f.mc("click",function(){return t.onSave()}),f.Xb(108,"i",57),f.Uc(109),f.pc(110,"translate"),f.bc(),f.bc(),f.bc(),f.bc(),f.bc(),f.bc(),f.bc(),f.bc(),f.bc(),f.bc(),f.bc(),f.bc(),f.cc(111,"ngx-spinner"),f.cc(112,"p",58),f.Uc(113),f.bc(),f.bc()}2&e&&(f.Ib(4),f.vc("formGroup",t.customForm),f.Ib(7),f.vc("readOnly",t.editing),f.Ib(26),f.Wc(" ",t.itemName," "),f.Ib(4),f.vc("ngForOf",t.itemsResult),f.Ib(19),f.vc("ngForOf",t.taxBill),f.Ib(27),f.vc("ngForOf",t.taxSales),f.Ib(16),f.vc("ngIf",t.perishable),f.Ib(1),f.vc("ngIf",t.perishable),f.Ib(1),f.vc("ngIf",t.perishable),f.Ib(2),f.vc("disabled",!t.customForm.valid),f.Ib(2),f.Wc(" ",f.qc(110,12,"buttons.save")," "),f.Ib(4),f.Wc(" ",t.maskSpinner," "))},directives:[n.z,n.q,n.h,n.c,n.p,n.g,d.N,a.m,n.u,s.a,n.a,b.a,a.n,p.a,s.d],pipes:[m.c,a.d],styles:["@media (min-width:768px){.card-columns[_ngcontent-%COMP%]{-moz-column-count:4;column-count:4}}@media (min-width:992px){.card-columns[_ngcontent-%COMP%]{-moz-column-count:6;column-count:6}}@media (min-width:1200px){.card-columns[_ngcontent-%COMP%]{-moz-column-count:8;column-count:8}}.create-customer[_ngcontent-%COMP%]{background-color:#a50721!important;color:#fff!important;font-weight:700!important}.search-custom[_ngcontent-%COMP%]{background:#fff!important;border-radius:10px;box-shadow:0 2px 8px 0 rgba(50,50,50,.322);padding-bottom:5px!important}.card-col-list[_ngcontent-%COMP%]{max-height:250px;overflow:auto}.card-col[_ngcontent-%COMP%]{max-height:870px;min-height:200px;overflow:auto}.discounts[_ngcontent-%COMP%]{color:green;font-weight:700}.total[_ngcontent-%COMP%], .total-bg[_ngcontent-%COMP%]{color:red;font-weight:700}.total-bg[_ngcontent-%COMP%]{font-size:24px}.vat[_ngcontent-%COMP%]{color:#00f;font-weight:700}.card-sales[_ngcontent-%COMP%]{border:2px solid hsla(0,0%,100%,.247);box-shadow:0 2px 6px 0 rgba(50,50,50,.322);margin:5px!important;min-height:138px!important}.card-sales[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]{color:red;font-size:16px;font-weight:700;margin-bottom:auto;margin-top:auto;padding-bottom:4px;padding-top:4px;text-align:right}.card-sales[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{padding:4px}.card-sales[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]:hover{background-color:red;color:#fff}.card-sales[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]:hover   .price[_ngcontent-%COMP%]{color:#fff}.card-sales[_ngcontent-%COMP%]   .product-name[_ngcontent-%COMP%]{font-size:12px;font-weight:700;margin-bottom:0!important;text-align:center;text-transform:uppercase}.card-sales[_ngcontent-%COMP%]   .img-product[_ngcontent-%COMP%]{display:block;margin:auto;max-width:62px}.card-sales[_ngcontent-%COMP%]   .img-product[_ngcontent-%COMP%]:hover{border-radius:10px;box-shadow:0 2px 8px 0 rgba(50,50,50,.75)}.card-sales[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding-bottom:1px!important;padding-left:4px;padding-right:4px;padding-top:1px!important}.card-sales[_ngcontent-%COMP%]:hover{border:2px solid rgba(23,58,253,.12156862745098039);cursor:pointer}.card-sales[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]:hover{background-color:#173afd;color:#fff}.product-name-header[_ngcontent-%COMP%]{background-color:#639;border:2px solid hsla(0,0%,100%,.5137254901960784);border-radius:25px;color:#fff;font-size:16px;font-weight:700;height:32px;padding:4px;text-align:center;word-break:break-all}"]}),e})()},{path:"providers",component:S},{path:"providers/create",component:L},{path:"providers/edit/:id",component:L}]}];let Me=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=f.Ub({type:e}),e.\u0275inj=f.Tb({imports:[[g.f.forChild(Oe)],g.f]}),e})();const Pe={align:"right",allowNegative:!0,allowZero:!0,decimal:".",precision:2,prefix:"$ ",suffix:"",thousands:",",nullable:!0};let De=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=f.Ub({type:e}),e.\u0275inj=f.Tb({imports:[[a.c,p.b,l.a,d.t,u.a,d.C,b.b.forRoot(Pe),o.b,s.c,i.b,r.b,n.v,m.b,Me]]}),e})()}}]);