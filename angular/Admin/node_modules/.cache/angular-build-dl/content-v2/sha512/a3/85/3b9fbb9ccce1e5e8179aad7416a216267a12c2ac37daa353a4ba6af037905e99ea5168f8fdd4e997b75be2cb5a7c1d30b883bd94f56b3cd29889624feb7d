!function(){function e(t,c,n){return(e="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,c){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=i(e)););return e}(e,t);if(n){var a=Object.getOwnPropertyDescriptor(n,t);return a.get?a.get.call(c):a.value}})(t,c,n||t)}function t(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function n(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var c,n=i(e);if(t){var o=i(this).constructor;c=Reflect.construct(n,arguments,o)}else c=n.apply(this,arguments);return a(this,c)}}function a(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var c=0;c<t.length;c++){var n=t[c];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,c){return t&&r(e.prototype,t),c&&r(e,c),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{rJ0g:function(c,a,r){"use strict";r.r(a),r.d(a,"customCurrencyMaskConfig",function(){return Qe}),r.d(a,"SalesModule",function(){return Je});var l=r("ofXK"),u=r("3Pt+"),d=r("aSZe"),b=r("7M0M"),m=r("3HhI"),p=r("Z1v9"),f=r("ZOsW"),g=r("1kSV"),v=r("TT0I"),h=r("mrSG"),y=r("fXoL"),_=r("jhN1"),w=["iframe"];function C(e,t){if(1&e&&y.Xb(0,"div",3),2&e){var c=y.oc(2);y.vc("innerHtml",c.docHtml,y.Mc)}}function I(e,t){if(1&e&&(y.cc(0,"object",4),y.cc(1,"p"),y.Uc(2," Your browser does not support PDFs. "),y.cc(3,"a",5),y.Uc(4,"Download the PDF"),y.bc(),y.Uc(5,". "),y.bc(),y.bc()),2&e){var c=y.oc(2);y.vc("data",c.fullUrl,y.Nc),y.Ib(3),y.vc("href",c.fullUrl,y.Oc)}}function x(e,t){if(1&e&&(y.ac(0),y.Sc(1,C,1,1,"div",1),y.Sc(2,I,6,2,"object",2),y.Zb()),2&e){var c=y.oc();y.Ib(1),y.vc("ngIf","pdf"!==c.configuredViewer),y.Ib(1),y.vc("ngIf",c.fullUrl&&"pdf"===c.configuredViewer)}}function k(e,t){if(1&e){var c=y.dc();y.cc(0,"iframe",8,9),y.mc("load",function(){return y.Lc(c),y.oc(2).iframeLoaded()}),y.bc()}if(2&e){var n=y.oc(2);y.vc("src",n.fullUrl,y.Nc)}}function S(e,t){if(1&e){var c=y.dc();y.cc(0,"iframe",12,9),y.mc("load",function(){return y.Lc(c),y.oc(3).iframeLoaded()}),y.bc()}if(2&e){var n=y.oc(3);y.vc("src",n.fullUrl,y.Nc)}}function U(e,t){if(1&e&&(y.cc(0,"div",10),y.Xb(1,"div"),y.Sc(2,S,2,1,"iframe",11),y.bc()),2&e){var c=y.oc(2);y.Ib(1),y.Qc("background-color","popout-hide"===c.disableContent?"#fff":"transparent"),y.Ob("overlay-full","all"===c.disableContent)("overlay-popout-google","google"===c.configuredViewer&&("popout"===c.disableContent||"popout-hide"===c.disableContent))("overlay-popout-office","office"===c.configuredViewer&&("popout"===c.disableContent||"popout-hide"===c.disableContent)),y.Ib(1),y.vc("ngIf",c.fullUrl)}}function O(e,t){if(1&e&&(y.ac(0),y.Sc(1,k,2,1,"iframe",6),y.Sc(2,U,3,9,"div",7),y.Zb()),2&e){var c=y.oc();y.Ib(1),y.vc("ngIf",c.fullUrl&&"none"===c.disableContent),y.Ib(1),y.vc("ngIf","none"!==c.disableContent)}}var M,F,P,q=function(e){var t=e.match(/^(https?\:)\/\/(([^:\/?#]*)(?:\:([0-9]+))?)([\/]{0,1}[^?#]*)(\?[^#]*|)(#.*|)$/);return t&&{href:e,protocol:t[1],host:t[2],hostname:t[3],port:t[4],pathname:t[5],search:t[6],hash:t[7]}},V=function(e){var t,c=!1;try{c=D()?!(null===(t=null==e?void 0:e.contentWindow)||void 0===t?void 0:t.document):!(null==e?void 0:e.contentDocument)}catch(n){}return c},D=function(){return/MSIE (\d+\.\d+);/.test(navigator.userAgent)||navigator.userAgent.indexOf("Trident/")>-1},N=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"google",c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";switch(t){case"google":n="https://docs.google.com/gview?url=%URL%&embedded=true";break;case"office":n="https://view.officeapps.live.com/op/embed.aspx?src=%URL%";break;case"pdf":n=""}var a="google"===t||"office"===t||"url"===t,i=e.indexOf("/")?encodeURIComponent(e):e,o=n?n.replace("%URL%",i):e;return c&&a&&"url"!==t&&(o="".concat(o).concat(c.startsWith("&")?"":"&").concat(c)),{url:o,externalViewer:a}},X=((F=function(){function e(t,c){o(this,e),this.domSanitizer=t,this.ngZone=c,this.loaded=new y.p,this.url="",this.queryParams="",this.viewerUrl="",this.googleCheckInterval=3e3,this.googleMaxChecks=5,this.disableContent="none",this.googleCheckContentLoaded=!0,this.fullUrl=null,this.externalViewer=!1,this.docHtml="",this.configuredViewer="google",this.shouldCheckIframe=!1}return s(e,[{key:"ngAfterViewInit",value:function(){var e,t;if(this.shouldCheckIframe){var c=null===(t=null===(e=this.iframes)||void 0===e?void 0:e.first)||void 0===t?void 0:t.nativeElement;c&&(this.shouldCheckIframe=!1,this.reloadIframe(c))}}},{key:"ngOnDestroy",value:function(){this.checkIFrameSubscription&&this.checkIFrameSubscription.unsubscribe()}},{key:"ngOnChanges",value:function(e){return Object(h.b)(this,void 0,void 0,regeneratorRuntime.mark(function t(){var c,n,a,i=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e&&e.viewer&&(e.viewer.isFirstChange||e.viewer.currentValue!==e.viewer.previousValue)&&("google"!==this.viewer&&"office"!==this.viewer&&"mammoth"!==this.viewer&&"pdf"!==this.viewer&&"url"!==this.viewer&&console.error("Unsupported viewer: '".concat(this.viewer,"'. Supported viewers: google, office, mammoth and pdf")),this.configuredViewer=this.viewer),!(e.url&&e.url.currentValue!==e.url.previousValue||e.viewer&&e.viewer.currentValue!==e.viewer.previousValue||e.viewerUrl&&e.viewerUrl.currentValue!==e.viewerUrl.previousValue)){t.next=18;break}if(c=N(this.url,this.configuredViewer,this.queryParams,this.viewerUrl),this.externalViewer=c.externalViewer,c.externalViewer&&this.overrideLocalhost&&(o=void 0,r=void 0,o=q(i.url),r=(null==o?void 0:o.hostname)||"",["localhost","127.0.0.1","","::1"].includes(r)||r.startsWith("192.168.")||r.startsWith("10.0.")||r.endsWith(".local"))&&(n=function(e,t){var c=q(e),n=q(t);return c&&n?e.replace(c.port?"".concat(c.hostname,":").concat(c.port):c.hostname,n.port?"".concat(n.hostname,":").concat(n.port):n.hostname):e}(this.url,this.overrideLocalhost),c=N(n,this.configuredViewer,this.queryParams,this.viewerUrl)),this.docHtml="",this.checkIFrameSubscription&&this.checkIFrameSubscription.unsubscribe(),!this.url){t.next=17;break}if(!c.externalViewer&&"url"!==this.configuredViewer){t.next=10;break}this.fullUrl=this.domSanitizer.bypassSecurityTrustResourceUrl(c.url),"google"===this.configuredViewer&&this.googleCheckContentLoaded&&this.ngZone.runOutsideAngular(function(){var e,t,c=null===(t=null===(e=i.iframes)||void 0===e?void 0:e.first)||void 0===t?void 0:t.nativeElement;c?i.reloadIframe(c):i.shouldCheckIframe=!0}),t.next=15;break;case 10:if(t.t0="mammoth"===this.configuredViewer,!t.t0){t.next=15;break}return t.next=14,a=this.url,Object(h.b)(void 0,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return mammoth||console.error("Please install mammoth and make sure mammoth.browser.min.js is loaded."),e.next=3,function(e){return new Promise(function(t,c){try{var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="blob",n.onload=function(){var e=new FileReader;e.readAsArrayBuffer(n.response),e.onloadend=function(){t(e.result)}},n.send()}catch(a){c("error while retrieving file ".concat(e,"."))}})}(a);case 3:return t=e.sent,e.next=6,mammoth.convertToHtml({arrayBuffer:t});case 6:return e.abrupt("return",e.sent.value);case 7:case"end":return e.stop()}},e)}));case 14:this.docHtml=t.sent;case 15:t.next=18;break;case 17:this.fullUrl=null;case 18:case"end":return t.stop()}var o,r},t,this)}))}},{key:"reloadIframe",value:function(e){var t,c;this.checkIFrameSubscription=(t=null,c=0,{subscribe:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e3,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5;if(!V(e))return t=setInterval(function(){++c>=a&&clearInterval(t),function(e){e&&(console.log("reloading.."),e.src=e.src)}(e)},n);t&&clearInterval(t)},unsubscribe:function(){t&&clearInterval(t)}}),this.checkIFrameSubscription.subscribe(e,this.googleCheckInterval,this.googleMaxChecks)}},{key:"iframeLoaded",value:function(){var e,t,c=null===(t=null===(e=this.iframes)||void 0===e?void 0:e.first)||void 0===t?void 0:t.nativeElement;c&&V(c)&&(this.loaded.emit(null),this.checkIFrameSubscription&&this.checkIFrameSubscription.unsubscribe())}}]),e}()).\u0275fac=function(e){return new(e||F)(y.Wb(_.b),y.Wb(y.E))},F.\u0275cmp=y.Qb({type:F,selectors:[["ngx-doc-viewer"]],viewQuery:function(e,t){var c;1&e&&y.Zc(w,1),2&e&&y.Hc(c=y.nc())&&(t.iframes=c)},inputs:{url:"url",queryParams:"queryParams",viewerUrl:"viewerUrl",googleCheckInterval:"googleCheckInterval",googleMaxChecks:"googleMaxChecks",disableContent:"disableContent",googleCheckContentLoaded:"googleCheckContentLoaded",viewer:"viewer",overrideLocalhost:"overrideLocalhost"},outputs:{loaded:"loaded"},features:[y.Gb],decls:2,vars:2,consts:[[4,"ngIf"],[3,"innerHtml",4,"ngIf"],["type","application/pdf","width","100%","height","100%",3,"data",4,"ngIf"],[3,"innerHtml"],["type","application/pdf","width","100%","height","100%",3,"data"],[3,"href"],["id","iframe-doc-viewer","frameBorder","0",3,"src","load",4,"ngIf"],["class","container",4,"ngIf"],["id","iframe-doc-viewer","frameBorder","0",3,"src","load"],["iframe",""],[1,"container"],["id","iframe","frameBorder","0",3,"src","load",4,"ngIf"],["id","iframe","frameBorder","0",3,"src","load"]],template:function(e,t){1&e&&(y.Sc(0,x,3,2,"ng-container",0),y.Sc(1,O,3,2,"ng-container",0)),2&e&&(y.vc("ngIf",!t.externalViewer),y.Ib(1),y.vc("ngIf",t.externalViewer))},directives:[l.n],styles:["[_nghost-%COMP%] {\n        display: block;\n      }\n      .container[_ngcontent-%COMP%] {\n        width: 100%;\n        height: 100%;\n        position: relative;\n      }\n      .overlay-popout-google[_ngcontent-%COMP%] {\n        width: 40px;\n        height: 40px;\n        right: 26px;\n        top: 11.5px;\n        position: absolute;\n        z-index: 1000;\n      }\n      .overlay-popout-office[_ngcontent-%COMP%] {\n        width: 100px;\n        height: 20px;\n        right: 0;\n        bottom: 0;\n        position: absolute;\n        z-index: 1000;\n      }\n      .overlay-full[_ngcontent-%COMP%] {\n        width: 100%;\n        height: 100%;\n        right: 0;\n        top: 0;\n        position: absolute;\n        z-index: 1000;\n      }\n      iframe[_ngcontent-%COMP%] {\n        width: 100%;\n        height: 100%;\n      }"]}),F),A=((M=function e(){o(this,e)}).\u0275fac=function(e){return new(e||M)},M.\u0275mod=y.Ub({type:M}),M.\u0275inj=y.Tb({imports:[[l.c]]}),M),R=r("pKmL"),W=r("JqCM"),T=r("sYmb"),L=r("tyNb"),E=((P=function e(){o(this,e)}).\u0275fac=function(e){return new(e||P)},P.\u0275cmp=y.Qb({type:P,selectors:[["app-sales"]],decls:1,vars:0,template:function(e,t){1&e&&y.Xb(0,"router-outlet")},directives:[L.g],encapsulation:2}),P),z=r("py8Q"),j=r("YMfE"),G=["customGrid"],H=["searchField"];function $(e,t){if(1&e){var c=y.dc();y.cc(0,"div"),y.cc(1,"button",21),y.mc("click",function(){return y.Lc(c),y.oc().importData()}),y.Xb(2,"i",33),y.Uc(3),y.pc(4,"translate"),y.bc(),y.bc()}if(2&e){var n=y.oc();y.Ib(1),y.vc("disabled",n.loading),y.Ib(2),y.Wc(" ",y.qc(4,2,"buttons.import")," ")}}var B,Z=((B=function(c){t(r,c);var a=n(r);function r(e,t,c,n,i){var s;return o(this,r),(s=a.call(this,e,t,c,n,i)).msg=e,s.api=t,s.router=c,s.translate=n,s.aRouter=i,s.title="Clientes",s}return s(r,[{key:"ngOnInit",value:function(){this.changeLanguage(this.activeLang)}},{key:"ngAfterViewInit",value:function(){var e=this;e.crudApi={create:"/persons/create",read:"/persons/customers",update:"/persons/update/",delete:"/persons/delete/"},e.showActions=!0,e.showRowNumber=!0,e.pagesize=10,e.datafields=[{name:"id",type:"number"},{name:"company_name",type:"string"},{name:"dni",type:"string"},{name:"description",type:"string"},{name:"full_name",type:"string"}],e.sourceColumns=[{text:"Mostrar nombre como",datafield:"full_name",align:"center"},{text:"DNI",datafield:"dni",align:"center",minWidth:100,cellsalign:"right"},{text:"Empresa",datafield:"company_name",align:"center"}],this.prepareGrid()}},{key:"createData",value:function(){e(i(r.prototype),"createData",this).call(this),this.goRoute("sales/customers/create")}},{key:"editData",value:function(t){e(i(r.prototype),"editData",this).call(this,t),this.goRoute("sales/customers/edit/".concat(t.id))}}]),r}(z.a)).\u0275fac=function(e){return new(e||B)(y.Wb(j.b),y.Wb(j.a),y.Wb(L.c),y.Wb(T.d),y.Wb(L.a))},B.\u0275cmp=y.Qb({type:B,selectors:[["app-customers"]],viewQuery:function(e,t){var c;1&e&&(y.Zc(G,1),y.Zc(H,1)),2&e&&(y.Hc(c=y.nc())&&(t.customGrid=c.first),y.Hc(c=y.nc())&&(t.searchField=c.first))},features:[y.Fb],decls:77,vars:38,consts:[[1,"card"],[1,"card-header"],[1,"card-title"],[1,"menuExport"],[1,"space-right"],[1,"btn","btn-danger","round","mr-1","mb-1",3,"disabled","click"],[1,"fa","fa-sync","mr-1","fas-fa-22"],[1,"myMenu","space-right"],[1,"clearColor",3,"height","onItemclick"],["myMenu",""],["id","Exports"],[1,"fas","fa-cog","fas-fa-22","fas-fa-red"],["href","javascript:void(0)"],[2,"width","200px"],[1,"fas","fa-file-excel","fas-fa-xls"],[1,"fas","fa-file-csv","fas-fa-xls"],["type","separator"],[1,"fas","fa-file-pdf","fas-fa-pdf"],[1,"fas","fa-file-code","fas-fa-code"],[1,"fas","fa-print","fas-fa-print"],[1,"margin-left","space-right"],[1,"btn","btn-success","round","mr-1","mb-1",3,"disabled","click"],[1,"fa","fa-plus","mr-1","fas-fa-22"],[4,"ngIf"],[1,"container-fluid"],[1,"input-group"],["type","text","autofocus","",1,"form-control",3,"placeholder","keyup"],["searchField",""],[1,"input-group-append"],[1,"btn","btn-primary",3,"disabled","click"],[1,"fa","fa-search"],["width","100%",3,"disabled","auto-create","onCellselect","onBindingcomplete"],["customGrid",""],[1,"fa","fa-upload","mr-1","fas-fa-22"]],template:function(e,t){1&e&&(y.cc(0,"div",0),y.cc(1,"div",1),y.cc(2,"h4",2),y.Uc(3),y.pc(4,"uppercase"),y.bc(),y.bc(),y.cc(5,"div",0),y.cc(6,"div",3),y.cc(7,"div",4),y.cc(8,"button",5),y.mc("click",function(){return t.searchQuery()}),y.Xb(9,"i",6),y.bc(),y.bc(),y.cc(10,"div",7),y.cc(11,"jqxMenu",8,9),y.mc("onItemclick",function(e){return t.itemclick(e)}),y.cc(13,"ul"),y.cc(14,"li",10),y.Xb(15,"i",11),y.Xb(16,"a",12),y.cc(17,"ul",13),y.cc(18,"li"),y.cc(19,"a",12),y.Xb(20,"i",14),y.Uc(21),y.pc(22,"translate"),y.bc(),y.bc(),y.cc(23,"li"),y.cc(24,"a",12),y.Xb(25,"i",15),y.Uc(26),y.pc(27,"translate"),y.bc(),y.bc(),y.cc(28,"li"),y.cc(29,"a",12),y.Xb(30,"i",14),y.Uc(31),y.pc(32,"translate"),y.bc(),y.bc(),y.Xb(33,"li",16),y.cc(34,"li"),y.cc(35,"a",12),y.Xb(36,"i",17),y.Uc(37),y.pc(38,"translate"),y.bc(),y.bc(),y.Xb(39,"li",16),y.cc(40,"li"),y.cc(41,"a",12),y.Xb(42,"i",18),y.Uc(43),y.pc(44,"translate"),y.bc(),y.bc(),y.cc(45,"li"),y.cc(46,"a",12),y.Xb(47,"i",18),y.Uc(48),y.pc(49,"translate"),y.bc(),y.bc(),y.cc(50,"li"),y.cc(51,"a",12),y.Xb(52,"i",18),y.Uc(53),y.pc(54,"translate"),y.bc(),y.bc(),y.Xb(55,"li",16),y.cc(56,"li"),y.cc(57,"a",12),y.Xb(58,"i",19),y.Uc(59),y.pc(60,"translate"),y.bc(),y.bc(),y.bc(),y.bc(),y.bc(),y.bc(),y.bc(),y.cc(61,"div",20),y.cc(62,"button",21),y.mc("click",function(){return t.createData()}),y.Xb(63,"i",22),y.Uc(64),y.pc(65,"translate"),y.bc(),y.bc(),y.Sc(66,$,5,4,"div",23),y.bc(),y.cc(67,"div",24),y.cc(68,"fieldset"),y.cc(69,"div",25),y.cc(70,"input",26,27),y.mc("keyup",function(e){return t.inputKey(e)}),y.bc(),y.cc(72,"div",28),y.cc(73,"button",29),y.mc("click",function(){return t.searchQuery()}),y.Xb(74,"i",30),y.bc(),y.bc(),y.bc(),y.bc(),y.cc(75,"jqxGrid",31,32),y.mc("onCellselect",function(e){return t.cellClick(e)})("onBindingcomplete",function(e){return t.Bindingcomplete(e)}),y.bc(),y.bc(),y.bc(),y.bc()),2&e&&(y.Ib(3),y.Vc(y.qc(4,18,t.title)),y.Ib(5),y.vc("disabled",t.loading),y.Ib(3),y.vc("height",36),y.Ib(10),y.Vc(y.qc(22,20,"export.excel")),y.Ib(5),y.Vc(y.qc(27,22,"export.csv")),y.Ib(5),y.Vc(y.qc(32,24,"export.xml")),y.Ib(6),y.Vc(y.qc(38,26,"export.pdf")),y.Ib(6),y.Vc(y.qc(44,28,"export.html")),y.Ib(5),y.Vc(y.qc(49,30,"export.json")),y.Ib(5),y.Vc(y.qc(54,32,"export.tsv")),y.Ib(6),y.Vc(y.qc(60,34,"export.print")),y.Ib(3),y.vc("disabled",t.loading),y.Ib(2),y.Wc(" ",y.qc(65,36,"buttons.new")," "),y.Ib(2),y.vc("ngIf",t.useImport),y.Ib(4),y.vc("placeholder",t.placeholderSearch),y.Ib(3),y.vc("disabled",t.loading),y.Ib(2),y.vc("disabled",t.loading)("auto-create",!1))},directives:[b.a,l.n,d.a],pipes:[l.v,T.c],encapsulation:2}),B),Q=r("TK7J"),J=r("UnFQ"),K=r("Absx"),Y=r("mm0L"),ee=r("PcHl"),te=r("dKyG"),ce=r("uHPU"),ne=["focusElement"],ae=["uploadFile"],ie=["imgUp"];function oe(e,t){if(1&e&&(y.cc(0,"ng-option",35),y.Uc(1),y.bc()),2&e){var c=t.$implicit;y.vc("value",c.id),y.Ib(1),y.Wc("",c.description," ")}}function re(e,t){if(1&e&&(y.cc(0,"ng-option",35),y.Xb(1,"img",36),y.Uc(2),y.bc()),2&e){var c=t.$implicit;y.vc("value",c.id),y.Ib(1),y.vc("src","assets/flags/"+c.image,y.Oc),y.Ib(1),y.Wc(" ",c.CurrencyName," ")}}function se(e,t){if(1&e&&(y.cc(0,"ng-option",35),y.Xb(1,"img",36),y.Uc(2),y.bc()),2&e){var c=t.$implicit;y.vc("value",c.id),y.Ib(1),y.vc("src","assets/flags/"+c.image,y.Oc),y.Ib(1),y.Wc(" ",c.country_name," ")}}function le(e,t){if(1&e&&(y.cc(0,"ng-option",35),y.Uc(1),y.bc()),2&e){var c=t.$implicit;y.vc("value",c.id),y.Ib(1),y.Wc(" ",c.full_name," ")}}function ue(e,t){if(1&e&&(y.cc(0,"div",13),y.cc(1,"div",14),y.cc(2,"label"),y.Uc(3,"Cliente principal"),y.bc(),y.cc(4,"ng-select",37),y.cc(5,"ng-option",38),y.Uc(6,"Ninguno"),y.bc(),y.Sc(7,le,2,2,"ng-option",17),y.bc(),y.bc(),y.bc()),2&e){var c=y.oc(2);y.Ib(4),y.vc("virtualScroll",!0),y.Ib(3),y.vc("ngForOf",c.persons)}}function de(e,t){if(1&e){var c=y.dc();y.cc(0,"div",12),y.cc(1,"div",13),y.cc(2,"div",14),y.cc(3,"label"),y.cc(4,"span",15),y.Uc(5),y.pc(6,"translate"),y.bc(),y.Uc(7),y.pc(8,"translate"),y.bc(),y.cc(9,"ng-select",16),y.Sc(10,oe,2,2,"ng-option",17),y.bc(),y.bc(),y.bc(),y.cc(11,"div",13),y.cc(12,"div",14),y.cc(13,"label"),y.cc(14,"span",15),y.Uc(15),y.pc(16,"translate"),y.bc(),y.Uc(17,"Mostrar nombre como"),y.bc(),y.Xb(18,"input",18,19),y.bc(),y.bc(),y.bc(),y.cc(20,"div",12),y.cc(21,"div",13),y.cc(22,"div",14),y.cc(23,"label"),y.cc(24,"span",15),y.Uc(25),y.pc(26,"translate"),y.bc(),y.Uc(27),y.pc(28,"translate"),y.bc(),y.cc(29,"ng-select",20),y.Sc(30,re,3,3,"ng-option",17),y.bc(),y.bc(),y.bc(),y.cc(31,"div",13),y.cc(32,"div",14),y.cc(33,"label"),y.cc(34,"span",15),y.Uc(35),y.pc(36,"translate"),y.bc(),y.Uc(37),y.pc(38,"translate"),y.bc(),y.cc(39,"ng-select",21),y.Sc(40,se,3,3,"ng-option",17),y.bc(),y.bc(),y.bc(),y.bc(),y.cc(41,"div",12),y.cc(42,"div",13),y.Xb(43,"br"),y.Xb(44,"br"),y.cc(45,"div",14),y.cc(46,"div",22),y.cc(47,"label",23),y.cc(48,"input",24),y.mc("change",function(e){return y.Lc(c),y.oc().onChageSeconday(e)}),y.bc(),y.Uc(49," \xbfEs un cliente secundario? "),y.bc(),y.bc(),y.bc(),y.bc(),y.Sc(50,ue,8,2,"div",25),y.bc(),y.cc(51,"div",12),y.cc(52,"div",26),y.cc(53,"div",14),y.cc(54,"label"),y.Uc(55,"Titulo"),y.bc(),y.Xb(56,"input",27),y.bc(),y.bc(),y.cc(57,"div",28),y.cc(58,"div",14),y.cc(59,"label"),y.Uc(60,"Nombres"),y.bc(),y.Xb(61,"input",29),y.bc(),y.bc(),y.cc(62,"div",28),y.cc(63,"div",14),y.cc(64,"label"),y.Uc(65,"Apellidos"),y.bc(),y.Xb(66,"input",30),y.bc(),y.bc(),y.bc(),y.cc(67,"div",12),y.cc(68,"div",13),y.cc(69,"div",14),y.cc(70,"label"),y.Uc(71,"DNI"),y.bc(),y.Xb(72,"input",31),y.bc(),y.bc(),y.cc(73,"div",13),y.cc(74,"div",14),y.cc(75,"label"),y.Uc(76,"Nombre de la empresa"),y.bc(),y.Xb(77,"input",32),y.bc(),y.bc(),y.bc(),y.cc(78,"div",12),y.cc(79,"div",13),y.cc(80,"div",14),y.cc(81,"label"),y.Uc(82,"Correo electr\xf3nico"),y.bc(),y.Xb(83,"input",33),y.bc(),y.bc(),y.cc(84,"div",13),y.cc(85,"div",14),y.cc(86,"label"),y.Uc(87,"Web"),y.bc(),y.Xb(88,"input",34),y.bc(),y.bc(),y.bc()}if(2&e){var n=y.oc();y.Ib(5),y.Vc(y.qc(6,26,"general.asterisk")),y.Ib(2),y.Vc(y.qc(8,28,"companies.type_organization")),y.Ib(2),y.Ob("is-invalid",n.invalidOrganization),y.vc("virtualScroll",!0),y.Ib(1),y.vc("ngForOf",n.typeOrg),y.Ib(5),y.Vc(y.qc(16,30,"general.asterisk")),y.Ib(3),y.Ob("is-invalid",n.invalidFullName)("status-danger",n.invalidFullName),y.Ib(7),y.Vc(y.qc(26,32,"general.asterisk")),y.Ib(2),y.Vc(y.qc(28,34,"companies.currency")),y.Ib(2),y.Ob("is-invalid",n.invalidCurrency),y.vc("virtualScroll",!0),y.Ib(1),y.vc("ngForOf",n.currency),y.Ib(5),y.Vc(y.qc(36,36,"general.asterisk")),y.Ib(2),y.Vc(y.qc(38,38,"companies.country")),y.Ib(2),y.Ob("is-invalid",n.invalidCountry)("status-danger",n.invalidCountry),y.vc("virtualScroll",!0),y.Ib(1),y.vc("ngForOf",n.countries),y.Ib(10),y.vc("ngIf",n.is_secondary)}}function be(e,t){1&e&&(y.cc(0,"div",12),y.cc(1,"div",13),y.cc(2,"div",14),y.cc(3,"label"),y.Uc(4,"Direcci\xf3n principal"),y.bc(),y.Xb(5,"textarea",39),y.bc(),y.bc(),y.cc(6,"div",13),y.cc(7,"div",14),y.cc(8,"label"),y.Uc(9,"Direcci\xf3n postal"),y.bc(),y.Xb(10,"textarea",40),y.bc(),y.bc(),y.bc(),y.cc(11,"div",12),y.cc(12,"div",13),y.cc(13,"div",14),y.cc(14,"label"),y.Uc(15,"Ciudad/Distrito"),y.bc(),y.Xb(16,"input",41),y.bc(),y.bc(),y.cc(17,"div",13),y.cc(18,"label"),y.Uc(19,"Estado/Provincia"),y.bc(),y.Xb(20,"input",42),y.bc(),y.bc(),y.cc(21,"div",12),y.cc(22,"div",13),y.cc(23,"div",14),y.cc(24,"label"),y.Uc(25,"C\xf3digo postal"),y.bc(),y.Xb(26,"input",43),y.bc(),y.bc(),y.cc(27,"div",13),y.cc(28,"label"),y.Uc(29,"Movil"),y.bc(),y.Xb(30,"input",44),y.bc(),y.bc(),y.cc(31,"div",12),y.cc(32,"div",13),y.cc(33,"div",14),y.cc(34,"label"),y.Uc(35,"Fijo"),y.bc(),y.Xb(36,"input",45),y.bc(),y.bc(),y.bc())}function me(e,t){if(1&e&&(y.cc(0,"ng-option",35),y.Uc(1),y.bc()),2&e){var c=t.$implicit;y.vc("value",c.id),y.Ib(1),y.Xc(" ",c.name_taxe," - ",c.rate_name," ")}}function pe(e,t){if(1&e&&(y.cc(0,"ng-option",35),y.Uc(1),y.bc()),2&e){var c=t.$implicit;y.vc("value",c.id),y.Ib(1),y.Xc(" ",c.account_number," - ",c.account_name," ")}}function fe(e,t){if(1&e&&(y.cc(0,"ng-option",35),y.Uc(1),y.bc()),2&e){var c=t.$implicit;y.vc("value",c.id),y.Ib(1),y.Wc(" ",c.payment_method," ")}}function ge(e,t){if(1&e&&(y.cc(0,"ng-option",35),y.Uc(1),y.bc()),2&e){var c=t.$implicit;y.vc("value",c.id),y.Ib(1),y.Wc(" ",c.term_name," ")}}function ve(e,t){if(1&e&&(y.cc(0,"div",12),y.cc(1,"div",13),y.cc(2,"div",14),y.cc(3,"label"),y.Uc(4),y.pc(5,"translate"),y.bc(),y.cc(6,"ng-select",46),y.cc(7,"ng-option",38),y.Uc(8,"Ninguno"),y.bc(),y.Sc(9,me,2,3,"ng-option",17),y.bc(),y.bc(),y.bc(),y.cc(10,"div",13),y.cc(11,"div",14),y.cc(12,"label"),y.Uc(13,"Cuenta contable"),y.bc(),y.cc(14,"ng-option",38),y.Uc(15,"Ninguna"),y.bc(),y.cc(16,"ng-select",47),y.Sc(17,pe,2,3,"ng-option",17),y.bc(),y.bc(),y.bc(),y.bc(),y.cc(18,"div",12),y.cc(19,"div",13),y.cc(20,"div",14),y.cc(21,"label"),y.Uc(22,"Metodo de pago preferido"),y.bc(),y.cc(23,"ng-option",38),y.Uc(24,"Ninguno"),y.bc(),y.cc(25,"ng-select",48),y.Sc(26,fe,2,2,"ng-option",17),y.bc(),y.bc(),y.bc(),y.cc(27,"div",13),y.cc(28,"div",14),y.cc(29,"label"),y.Uc(30,"Condiciones de pago"),y.bc(),y.cc(31,"ng-option",38),y.Uc(32,"Ninguna"),y.bc(),y.cc(33,"ng-select",49),y.Sc(34,ge,2,2,"ng-option",17),y.bc(),y.bc(),y.bc(),y.bc(),y.cc(35,"div",12),y.cc(36,"div",13),y.cc(37,"div",14),y.cc(38,"label"),y.Uc(39,"Saldo inicial"),y.bc(),y.Xb(40,"input",50),y.bc(),y.bc(),y.cc(41,"div",13),y.cc(42,"div",14),y.cc(43,"label"),y.Uc(44,"A partir de la fecha"),y.bc(),y.Xb(45,"input",51),y.bc(),y.bc(),y.bc()),2&e){var c=y.oc();y.Ib(4),y.Vc(y.qc(5,7,"general.tax")),y.Ib(5),y.vc("ngForOf",c.tax),y.Ib(7),y.vc("virtualScroll",!0),y.Ib(1),y.vc("ngForOf",c.accounts),y.Ib(9),y.vc("ngForOf",c.payments),y.Ib(7),y.vc("virtualScroll",!0),y.Ib(1),y.vc("ngForOf",c.timelimits)}}var he,ye=((he=function(c){t(r,c);var a=n(r);function r(e,t,c,n,i,s,l,d,b,m,p,f,g,v,h,y){var _;return o(this,r),(_=a.call(this,e,t,c,n,i,s,b)).fb=e,_.msg=t,_.api=c,_.router=n,_.translate=i,_.aRouter=s,_.termsSer=l,_.attrSer=d,_.spinner=b,_.docs=m,_.cnt=p,_.curr=f,_.tor=g,_.taxSer=v,_.accountSer=h,_.custSer=y,_.typepersons=[],_.identityDocs=[],_.typeOrg=[],_.countries=[],_.currency=[],_.tax=[],_.persons=[],_.accounts=[],_.payments=[],_.timelimits=[],_.active=1,_.title="Cliente",_.translate.setDefaultLang(_.activeLang),_.customForm=_.fb.group({address:[""],city_name:[""],company_name:[""],description:[""],dni:[""],email:[""],last_name:[""],location:[""],mobile:[""],names:[""],phone:[""],postal_code:[""],state_name:[""],title:[""],web:[""],currency_id:["",[u.y.required]],country_id:[113,[u.y.required]],type_organization_id:[1,[u.y.required]],person_type_id:[1,[u.y.required]],tax_rate_id:["0"],means_payment_id:["0"],sales_term:["0"],accounting_account_id:["0"],initial_balance:[""],initial_date:[""],parent_id:["0"],is_secondary:[!1],full_name:["",[u.y.required,u.y.minLength(6)]]}),_}return s(r,[{key:"invalidFullName",get:function(){return this.customForm.get("full_name").invalid&&this.customForm.get("full_name").touched}},{key:"invalidPersonType",get:function(){return this.customForm.get("person_type_id").value<=0}},{key:"invalidCountry",get:function(){return this.customForm.get("country_id").value<=0}},{key:"invalidCurrency",get:function(){return this.customForm.get("currency_id").value<=0}},{key:"invalidOrganization",get:function(){return this.customForm.get("type_organization_id").value<=0}},{key:"ngOnInit",value:function(){var t=this;e(i(r.prototype),"ngOnInit",this).call(this);var c=this;c.PutURL="/persons/update/",c.PostURL="/persons/create",c.docs.getData({}).subscribe(function(e){c.identityDocs=e}),c.cnt.getData().subscribe(function(e){c.countries=e}),c.curr.getData().subscribe(function(e){c.currency=e,e.length>0&&(e.length>1?e.map(function(e){if(e.national_currency)return c.customForm.get("currency_id").setValue(e.id),!1}):c.customForm.get("currency_id").setValue(e[0].id))}),this.tor.getData({}).subscribe(function(e){t.typeOrg=e}),c.taxSer.getData({isVat:1}).subscribe(function(e){c.tax=e}),c.accountSer.getsubAccounts({}).subscribe(function(e){c.accounts=e}),c.custSer.getMeansPayment({}).subscribe(function(e){c.payments=e}),c.custSer.getTimeLimit({}).subscribe(function(e){c.timelimits=e}),c.custSer.getCustomersAll().subscribe(function(e){c.persons=e})}},{key:"loadData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=this.customForm;this.editing=!0,this.custSer.getCustomers({uid:e}).subscribe(function(e){var c,n,a,i,o,r,s;t.setValue({address:e[0].address,city_name:e[0].city_name,company_name:e[0].company_name,country_id:e[0].country_id,currency_id:e[0].currency_id,description:e[0].description,dni:e[0].dni,email:e[0].email,full_name:e[0].full_name,last_name:e[0].last_name,location:e[0].location,mobile:e[0].mobile,names:e[0].names,is_secondary:e[0].is_secondary,person_type_id:e[0].person_type_id,type_organization_id:e[0].type_organization_id,tax_rate_id:null!==(c=e[0].tax_rate_id)&&void 0!==c?c:"0",means_payment_id:null!==(n=e[0].means_payment_id)&&void 0!==n?n:"0",sales_term:null!==(a=e[0].sales_term)&&void 0!==a?a:"0",accounting_account_id:null!==(i=e[0].accounting_account_id)&&void 0!==i?i:"0",initial_balance:null!==(o=e[0].initial_balance)&&void 0!==o?o:"0",parent_id:null!==(r=e[0].parent_id)&&void 0!==r?r:"0",initial_date:null!==(s=e[0].initial_date)&&void 0!==s?s:"",phone:e[0].phone,postal_code:e[0].postal_code,state_name:e[0].state_name,title:e[0].title,web:e[0].web})})}},{key:"onChageSeconday",value:function(e){this.is_secondary=e.currentTarget.checked}}]),r}(Q.a)).\u0275fac=function(e){return new(e||he)(y.Wb(u.e),y.Wb(j.b),y.Wb(j.a),y.Wb(L.c),y.Wb(T.d),y.Wb(L.a),y.Wb(J.h),y.Wb(J.a),y.Wb(W.c),y.Wb(K.c),y.Wb(K.a),y.Wb(K.b),y.Wb(Y.d),y.Wb(ee.f),y.Wb(te.b),y.Wb(ee.b))},he.\u0275cmp=y.Qb({type:he,selectors:[["app-customer-form"]],viewQuery:function(e,t){var c;1&e&&(y.Zc(ne,1),y.Zc(ae,1),y.Zc(ie,1)),2&e&&(y.Hc(c=y.nc())&&(t.focusElement=c.first),y.Hc(c=y.nc())&&(t.uploadFile=c.first),y.Hc(c=y.nc())&&(t.imgUp=c.first))},features:[y.Fb],decls:25,vars:18,consts:[[1,"card"],[1,"card-header"],[1,"card-body"],[3,"formGroup"],["ngbNav","",1,"nav-tabs",3,"activeId","activeIdChange"],["nav","ngbNav"],[3,"ngbNavItem"],["ngbNavLink","",1,"display-none"],["ngbNavContent",""],[1,"mt-2",3,"ngbNavOutlet"],[1,"card-footer"],[3,"loading","showAaveACreate","saveAClose","closeEvent","saveAndCreateEvent","saveAndCloseEvent"],[1,"row"],[1,"col-md-6"],[1,"form-group"],[1,"asterisk"],["formControlName","type_organization_id","required","",3,"virtualScroll"],[3,"value",4,"ngFor","ngForOf"],["type","text","formControlName","full_name","required","","autofocus","",1,"form-control"],["focusElement",""],["formControlName","currency_id","required","",3,"virtualScroll"],["formControlName","country_id","required","",3,"virtualScroll"],[1,"form-check"],[1,"form-check-label"],["type","checkbox","formControlName","is_secondary",1,"form-check-input",3,"change"],["class","col-md-6",4,"ngIf"],[1,"col-md-2"],["type","text","formControlName","title","name","title",1,"form-control"],[1,"col-md-5"],["type","text","formControlName","names",1,"form-control"],["type","text","formControlName","last_name",1,"form-control"],["type","text","formControlName","dni",1,"form-control"],["type","text","formControlName","company_name",1,"form-control"],["type","text","formControlName","email",1,"form-control"],["type","text","formControlName","web",1,"form-control"],[3,"value"],["height","15","width","15",3,"src"],["formControlName","parent_id",3,"virtualScroll"],["value","0"],["formControlName","address","rows","2",1,"form-control"],["formControlName","location","rows","2",1,"form-control"],["type","text","formControlName","city_name",1,"form-control"],["type","text","formControlName","state_name",1,"form-control"],["type","text","formControlName","postal_code",1,"form-control"],["type","text","formControlName","mobile",1,"form-control"],["type","text","formControlName","phone",1,"form-control"],["formControlName","tax_rate_id"],["formControlName","accounting_account_id",3,"virtualScroll"],["formControlName","means_payment_id"],["formControlName","sales_term",3,"virtualScroll"],["currencyMask","","name","initial_balance","formControlName","initial_balance",1,"form-control"],["type","date","name","initial_date","formControlName","initial_date",1,"form-control"]],template:function(e,t){if(1&e&&(y.cc(0,"div",0),y.cc(1,"div",1),y.Uc(2),y.pc(3,"uppercase"),y.pc(4,"translate"),y.pc(5,"uppercase"),y.bc(),y.cc(6,"div",2),y.cc(7,"form",3),y.cc(8,"ul",4,5),y.mc("activeIdChange",function(e){return t.active=e}),y.cc(10,"li",6),y.cc(11,"a",7),y.Uc(12,"General"),y.bc(),y.Sc(13,de,89,40,"ng-template",8),y.bc(),y.cc(14,"li",6),y.cc(15,"a",7),y.Uc(16,"Ubicaci\xf3n/Direcci\xf3n"),y.bc(),y.Sc(17,be,37,0,"ng-template",8),y.bc(),y.cc(18,"li",6),y.cc(19,"a",7),y.Uc(20,"Pago y facturaci\xf3n"),y.bc(),y.Sc(21,ve,46,9,"ng-template",8),y.bc(),y.bc(),y.Xb(22,"div",9),y.bc(),y.bc(),y.cc(23,"div",10),y.cc(24,"app-footer-form",11),y.mc("closeEvent",function(){return t.cancel()})("saveAndCreateEvent",function(){return t.saveAndCreate()})("saveAndCloseEvent",function(){return t.saveAndClose()}),y.bc(),y.bc(),y.bc()),2&e){var c=y.Ic(9);y.Ib(2),y.Xc(" ",y.qc(3,12,y.qc(4,14,"general.createEdit"))," ",y.qc(5,16,t.title)," "),y.Ib(5),y.vc("formGroup",t.customForm),y.Ib(1),y.vc("activeId",t.active),y.Ib(2),y.vc("ngbNavItem",1),y.Ib(4),y.vc("ngbNavItem",2),y.Ib(4),y.vc("ngbNavItem",3),y.Ib(4),y.vc("ngbNavOutlet",c),y.Ib(2),y.vc("loading",t.loading)("showAaveACreate",!0)("saveAClose",t.saveAClose)("saveAClose",t.saveAClose)}},directives:[u.z,u.q,u.h,g.u,g.w,g.x,g.v,g.z,ce.a,f.a,u.p,u.g,u.w,l.m,u.c,u.a,l.n,f.d,v.a],pipes:[l.v,T.c],styles:["nb-checkbox[_ngcontent-%COMP%]{margin-bottom:1rem}.form-inline[_ngcontent-%COMP%]   [fullWidth][_ngcontent-%COMP%]{flex:1}.form-inline[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin:0 1.5rem 1.5rem 0}nb-card.inline-form-card[_ngcontent-%COMP%]   nb-card-body[_ngcontent-%COMP%]{padding-bottom:0}"]}),he),_e=r("PSD3"),we=r.n(_e),Ce=r("xg8E"),Ie=r("PU63"),xe=r("4IXu"),ke=["customGrid"],Se=["myDataTable"],Ue=["searchField"],Oe=["cashele"],Me=["searchbar"],Fe=["searchbar2"],Pe=["searchbar3"],qe=["myTabs"];function Ve(e,t){if(1&e&&(y.cc(0,"ng-option",69),y.Uc(1),y.bc()),2&e){var c=t.$implicit;y.vc("value",c.id),y.Ib(1),y.Xc(" ",c.code," - ",c.voucher_name," ")}}function De(e,t){if(1&e&&(y.cc(0,"ng-option",69),y.Uc(1),y.bc()),2&e){var c=t.$implicit;y.vc("value",c.id),y.Ib(1),y.Yc(" ",c.dni," - ",c.full_name," - ",c.company_name," ")}}function Ne(e,t){if(1&e&&(y.cc(0,"ng-option",69),y.Xb(1,"img",70),y.Uc(2),y.bc()),2&e){var c=t.$implicit;y.vc("value",c.id),y.Ib(1),y.vc("src","assets/flags/"+c.image,y.Oc),y.Ib(1),y.Wc(" ",c.CurrencyName," ")}}function Xe(e,t){if(1&e&&(y.cc(0,"ng-option",69),y.Uc(1),y.bc()),2&e){var c=t.$implicit;y.vc("value",c.id),y.Ib(1),y.Wc(" ",c.branch_name," ")}}function Ae(e,t){if(1&e&&(y.cc(0,"p",80),y.Uc(1),y.bc()),2&e){var c=y.oc().$implicit;y.Ib(1),y.Xc("",c.unit_name," - ",c.abbre_unit,"")}}function Re(e,t){if(1&e){var c=y.dc();y.cc(0,"div",71),y.mc("click",function(){y.Lc(c);var e=t.$implicit;return y.oc().onClickItem(e)}),y.cc(1,"div",72),y.cc(2,"div",73),y.cc(3,"span",74),y.cc(4,"strong"),y.Uc(5),y.bc(),y.bc(),y.bc(),y.cc(6,"div",75),y.Xb(7,"img",76),y.bc(),y.bc(),y.cc(8,"div",72),y.cc(9,"h6",77),y.Uc(10),y.pc(11,"currency"),y.bc(),y.cc(12,"p",78),y.Uc(13),y.bc(),y.Sc(14,Ae,2,2,"p",79),y.bc(),y.bc()}if(2&e){var n=t.$implicit;y.Ib(5),y.Vc(n.stock),y.Ib(2),y.vc("src",n.image,y.Oc),y.Ib(3),y.Wc(" ",y.qc(11,6,n.sale_price),""),y.Ib(3),y.Xc("",n.product_name," - ",n.abbre_unit,""),y.Ib(1),y.vc("ngIf",n.unit_name.length>0)}}function We(e,t){if(1&e&&(y.cc(0,"ng-option",69),y.Uc(1),y.bc()),2&e){var c=t.$implicit;y.vc("value",c.id),y.Ib(1),y.Xc(" ",c.code," - ",c.voucher_name," ")}}function Te(e,t){if(1&e&&(y.cc(0,"ng-option",69),y.Uc(1),y.bc()),2&e){var c=t.$implicit;y.vc("value",c.id),y.Ib(1),y.Xc(" ",c.code," - ",c.payment_method," ")}}function Le(e,t){if(1&e&&(y.cc(0,"ng-option",69),y.Uc(1),y.bc()),2&e){var c=t.$implicit;y.vc("value",c.id),y.Ib(1),y.Xc(" ",c.code," - ",c.payment_method," ")}}function Ee(e,t){if(1&e&&(y.cc(0,"ng-option",69),y.Uc(1),y.bc()),2&e){var c=t.$implicit;y.vc("value",c.id),y.Ib(1),y.Wc(" ",c.term_name," ")}}function ze(e,t){if(1&e){var c=y.dc();y.cc(0,"div",81),y.cc(1,"h4",82),y.Uc(2,"Guardar documento"),y.bc(),y.cc(3,"button",83),y.mc("click",function(){return t.$implicit.dismiss("Cross click")}),y.cc(4,"span",84),y.Uc(5,"\xd7"),y.bc(),y.bc(),y.bc(),y.cc(6,"div",85),y.cc(7,"div",86),y.cc(8,"div",87),y.cc(9,"label"),y.Uc(10,"Forma de pago"),y.bc(),y.bc(),y.cc(11,"div",88),y.cc(12,"ng-select",89),y.mc("change",function(e){return y.Lc(c),y.oc().onPaymenMethods(e)}),y.Sc(13,Te,2,3,"ng-option",10),y.bc(),y.bc(),y.bc(),y.cc(14,"div",86),y.cc(15,"div",87),y.cc(16,"label"),y.Uc(17,"Medio de pago"),y.bc(),y.bc(),y.cc(18,"div",88),y.cc(19,"ng-select",90),y.Sc(20,Le,2,3,"ng-option",10),y.bc(),y.bc(),y.bc(),y.cc(21,"div",86),y.cc(22,"div",87),y.cc(23,"label"),y.Uc(24,"Fecha de emisi\xf3n"),y.bc(),y.bc(),y.cc(25,"div",88),y.cc(26,"input",91,92),y.mc("change",function(){y.Lc(c);var e=y.Ic(27);return y.oc().onDate(e.value)}),y.bc(),y.bc(),y.bc(),y.cc(28,"div",86),y.cc(29,"div",93),y.cc(30,"label"),y.Uc(31,"Plazo"),y.bc(),y.bc(),y.cc(32,"div",94),y.cc(33,"ng-select",95),y.mc("change",function(e){return y.Lc(c),y.oc().onTimeLimits(e)}),y.Sc(34,Ee,2,2,"ng-option",10),y.bc(),y.bc(),y.bc(),y.cc(35,"div",86),y.cc(36,"div",87),y.cc(37,"label"),y.Uc(38,"Fecha de vencimiento"),y.bc(),y.bc(),y.cc(39,"div",88),y.cc(40,"input",96,97),y.mc("change",function(){y.Lc(c);var e=y.Ic(41);return y.oc().onExpirationDate(e.value)}),y.bc(),y.bc(),y.bc(),y.cc(42,"div",86),y.cc(43,"div",98),y.cc(44,"label"),y.Uc(45,"Total"),y.bc(),y.bc(),y.cc(46,"div",99),y.Xb(47,"input",100),y.bc(),y.bc(),y.cc(48,"div",86),y.cc(49,"div",98),y.cc(50,"label"),y.Uc(51,"Efectivo"),y.bc(),y.bc(),y.cc(52,"div",99),y.cc(53,"input",101,102),y.mc("keyup",function(){y.Lc(c);var e=y.Ic(54);return y.oc().onChaneCash(e.value)}),y.bc(),y.bc(),y.bc(),y.cc(55,"div",86),y.cc(56,"div",98),y.cc(57,"label"),y.Uc(58,"Cambio"),y.bc(),y.bc(),y.cc(59,"div",99),y.Xb(60,"input",103),y.bc(),y.bc(),y.bc(),y.cc(61,"div",104),y.cc(62,"button",105),y.mc("click",function(){y.Lc(c);var e=y.oc(),t=y.Ic(156);return e.onSave(t)}),y.Xb(63,"i",106),y.Uc(64),y.pc(65,"translate"),y.bc(),y.cc(66,"button",107),y.mc("click",function(){return t.$implicit.close("Cancel")}),y.Xb(67,"i",108),y.cc(68,"strong"),y.Uc(69),y.pc(70,"translate"),y.bc(),y.bc(),y.bc()}if(2&e){var n=y.oc();y.Ib(13),y.vc("ngForOf",n.paymentMethods),y.Ib(7),y.vc("ngForOf",n.meansPayment),y.Ib(13),y.vc("readonly",n.isCounted),y.Ib(1),y.vc("ngForOf",n.timeLimits),y.Ib(28),y.vc("disabled",n.customForm.invalid),y.Ib(2),y.Wc(" ",y.qc(65,7,"buttons.save")," "),y.Ib(5),y.Wc("",y.qc(70,9,"buttons.cancel")," ")}}function je(e,t){if(1&e&&(y.cc(0,"div",81),y.cc(1,"h4",82),y.Uc(2,"Visor de documentos"),y.bc(),y.cc(3,"button",83),y.mc("click",function(){return t.$implicit.dismiss("Cross click")}),y.cc(4,"span",84),y.Uc(5,"\xd7"),y.bc(),y.bc(),y.bc(),y.cc(6,"div",85),y.Xb(7,"ngx-doc-viewer",109),y.bc()),2&e){var c=y.oc();y.Ib(7),y.vc("url",c.pathfile)}}var Ge,He,$e,Be=[{path:"",component:E,children:[{path:"pos",component:(Ge=function(c){t(r,c);var a=n(r);function r(e,t,c,n,i,s,l,d,b,m,p,f,g,v,h){var y;o(this,r),(y=a.call(this,e,t,c,n,i,s,f)).fb=e,y.msg=t,y.api=c,y.router=n,y.translate=i,y.aRouter=s,y.resSer=l,y.perSer=d,y.currSer=b,y.reporstSer=m,y.itemsSer=p,y.spinner=f,y.documents=g,y.branch=v,y.modalService=h,y.title="Productos/Servicios",y.aDocuments=[],y.customers=[],y.currency=[],y.items=[],y.itemsResult=[],y.lines=[],y.timeLimits=[],y.paymentMethods=[],y.meansPayment=[],y.points_of_sale=[],y.selectedRow=!1,y.isCounted=!0,y.rowIndex=-1,y.pathfile="",y.source={localdata:y.lines,datatype:"array",datafields:[{name:"product_class_name",type:"string"},{name:"sku",type:" string"},{name:"image",type:" string"},{name:"unit_name",type:" string"},{name:"unit_description",type:" string"},{name:"abbre_unit",type:" string"},{name:"qr_code",type:"string"},{name:"product_name",type:"string"},{name:"notes",type:"string"},{name:"description_sales",type:"string"},{name:"shopping_description",type:"string"},{name:"barcode",type:"string"},{name:"rate_name",type:"string"},{name:"internal_code",type:"string"},{name:"state",type:"number"},{name:"quantity",type:"number"},{name:"total",type:"number"},{name:"discount",type:"number"},{name:"sale_price",type:"number"},{name:"purchase_cost",type:"number"},{name:"tax_sales",type:"number"},{name:"tax_amount",type:"number"},{name:"tax_bill",type:"number"},{name:"tax_bill_rate",type:"number"},{name:"tax_sale_rate",type:"number"},{name:"stock_min",type:"number"},{name:"stock_max",type:"number"},{name:"tax_sales_id",type:"number"},{name:"brand_id",type:" number"},{name:"stock",type:" number"},{name:"category_id",type:" number"},{name:"product_unit_id",type:" number"},{name:"factor",type:" number"},{name:"sub_category_id",type:" number"},{name:"percentage_gain",type:"number"},{name:"tax_bill_id",type:"number"},{name:"item_type_id",type:"number"},{name:"unit_id",type:"number"},{name:"base_factor",type:"number"},{name:"class_id",type:"number"},{name:"average_cost",type:"number"},{name:"recipe",type:"boolean"},{name:"vat_included",type:"boolean"},{name:"selling_out_of_inventory",type:"boolean"},{name:"perishable",type:"boolean"},{name:"id",type:"number"}]},y.dataAdapter=new jqx.dataAdapter(y.source),y.columns=[{text:"Detalle",dataField:"product_name",minWidth:200,align:"center",cellsAlign:"center",editable:!1},{text:"Cant",dataField:"quantity",width:60,align:"center",cellsAlign:"right"},{text:"U.M",dataField:"abbre_unit",minWidth:40,width:40,align:"center",cellsAlign:"center",editable:!1},{text:"Precio",dataField:"sale_price",width:100,align:"center",cellsAlign:"right",cellsFormat:"c2"},{text:"IVA",editable:!1,dataField:"tax_sales",width:50,align:"center",cellsAlign:"right"},{text:"Vr. IVA",editable:!1,dataField:"tax_amount",width:120,align:"right",cellsAlign:"right",cellsFormat:"c2"},{text:"Descuento",dataField:"discount",width:120,align:"right",cellsAlign:"right",cellsFormat:"c2"},{text:"Motivo Dtco",dataField:"reason",width:150,align:"right",cellsAlign:"right"},{text:"Total",dataField:"total",width:100,align:"right",cellsAlign:"right",cellsFormat:"c2",editable:!1}],y.editSettings={saveOnPageChange:!0,saveOnBlur:!0,saveOnSelectionChange:!0,cancelOnEsc:!0,saveOnEnter:!0,editSingleCell:!0,editOnDoubleClick:!0,editOnF2:!0},y.theme="bootstrap",y.source2={localdata:[],datafields:[{name:"CurrencyISO",type:"string"},{name:"Money",type:"string"},{name:"active",type:"number"},{name:"address",type:"string"},{name:"apply_notes",type:"boolean"},{name:"cash",type:"number"},{name:"code_ad",type:"string"},{name:"company_id",type:"number"},{name:"company_name",type:"string"},{name:"cufe",type:"string"},{name:"currency_id",type:"number"},{name:"customer_id",type:"number"},{name:"denomination",type:"string"},{name:"discount",type:"number"},{name:"dni",type:"string"},{name:"document_name",type:"string"},{name:"dv",type:"string"},{name:"electronic",type:"boolean"},{name:"email",type:"string"},{name:"expiration_date",type:"string"},{name:"id",type:"number"},{name:"image",type:"string"},{name:"invoice_date",type:"string"},{name:"invoice_name",type:"string"},{name:"invoice_nro",type:"string"},{name:"invoice_time",type:"string"},{name:"invoice_type_id",type:"number"},{name:"location",type:"string"},{name:"means_name",type:"string"},{name:"means_payment_id",type:"number"},{name:"merchant_registration",type:"string"},{name:"mobile",type:"string"},{name:"months",type:"number"},{name:"name_city",type:"string"},{name:"name_department",type:"string"},{name:"notes",type:"string"},{name:"path_report",type:"string"},{name:"payment_change",type:"string"},{name:"payment_method",type:"string"},{name:"payment_method_id",type:"number"},{name:"phone",type:"string"},{name:"plural_name",type:"string"},{name:"postal_code",type:"string"},{name:"prefix",type:"string"},{name:"prefix_doc",type:"string"},{name:"qrcode",type:"string"},{name:"singular_name",type:"string"},{name:"status",type:"number"},{name:"subtotal",type:"number"},{name:"tax_value",type:"number"},{name:"tax_amount",type:"number"},{name:"tax_sale_rate",type:"number"},{name:"taxlevel",type:"string"},{name:"taxregime",type:"string"},{name:"term_value",type:"number"},{name:"time_limit",type:"string"},{name:"total",type:"number"},{name:"stock",type:"number"},{name:"total_allowance",type:"number"},{name:"total_charges",type:"number"},{name:"typeorganization",type:"string"},{name:"username",type:"string"},{name:"voucher_name",type:"string"},{name:"zipkey",type:"string"}],datatype:"array"},y.dataAdapter2=new jqx.dataAdapter(y.source2),y.cellClass=function(e,t,c){var n=y.customGrid.getrowdata(e);return console.log(n),1==n.status?"fas-fa-ok-thumbs fa-cursor":2==n.status?"fas-fa-error fa-cursor":0==n.electronic?"fas-fa-ok fa-cursor":"fas-fa-warning fa-cursor"},y.columns2=[{columngroup:"Actions",text:"",sortable:!1,filterable:!1,editable:!1,align:"center",groupable:!1,draggable:!1,resizable:!1,datafield:"#mail_#",columntype:"text",width:32,cellsrenderer:function(e,t,c){return'<span><i class="fas fa-envelope-open-text fa-cursor fas-fa-mail"></span>'}},{columngroup:"Actions",text:"",sortable:!1,filterable:!1,editable:!1,align:"center",groupable:!1,draggable:!1,resizable:!1,datafield:"#pdf_#",columntype:"text",width:32,cellsrenderer:function(e,t,c){return'<span><i class="fas fa-file-pdf fa-cursor fas-fa-pdf"></i></span>'}},{columngroup:"Actions",text:"",filterable:!1,editable:!1,align:"center",groupable:!1,draggable:!1,resizable:!1,datafield:"#cancel_#",columntype:"text",width:32,cellsrenderer:function(e,t,c){return 1==y.customGrid.getrowdata(e).active?'<i class="fas fa-check-double fas-fa-ok fa-cursor">':'<i class="fas fa-ban fas-fa-delete fa-cursor"></i>'}},{text:"Factura N\xba.",dataField:"invoice_nro",width:80,cellsalign:"right"},{text:"Pref",dataField:"prefix",width:50},{text:"Adquiriente",dataField:"company_name",minwidth:350},{text:"Documento",dataField:"dni",width:90,cellsalign:"right"},{text:"Total",dataField:"total",cellsalign:"right",width:120,cellsformat:"c2"},{text:"Moneda",dataField:"Money",width:90},{text:"Fecha",dataField:"invoice_date",width:90},{text:"Estado",dataField:"active",width:90,cellsrenderer:function(e,t,c){switch(c){case 1:return'<p class="active-green">Activa</p>';default:return'<p class="active-red">Anulada</p>'}}}],y.customForm=y.fb.group({invoice_date:[(new Date).toISOString().split("T")[0],[u.y.required]],expiration_date:[(new Date).toISOString().split("T")[0],[u.y.required]],invoice_type_id:["",[u.y.required]],currency_id:["",[u.y.required]],customer_id:["0",[u.y.required]],point_of_sale_id:["0",[u.y.required]],discount:[0,[u.y.required]],cash:[0,[u.y.required]],payment_change:[0,[u.y.required]],vat:[0,[u.y.required]],subtotal:[0,[u.y.required]],total:[0,[u.y.required]],means_payment_id:[1,[u.y.required]],payment_method_id:[1,[u.y.required]],time_limit_id:[1,[u.y.required]]});var _=new Date;return _.setDate(_.getDate()-60),y.modalForm=y.fb.group({date_from:[_.toISOString().split("T")[0]],date_up:[(new Date).toISOString().split("T")[0]],invoice_type_id:[""]}),y}return s(r,[{key:"ngOnInit",value:function(){var t=this;e(i(r.prototype),"ngOnInit",this).call(this);var c=this,n=c.customForm;c.showSpinner();var a={where:JSON.stringify({category_id:"1",active:"1"})};c.resSer.getAccountingDocuments(a).subscribe(function(e){c.aDocuments=e,n.get("invoice_type_id").setValue(e[0].id),t.modalForm.get("invoice_type_id").setValue(e[0].id)}),c.currSer.getData({}).subscribe(function(e){if(c.currency=e,e.length>0){var t=e.find(function(e){return 1==e.national_currency});t?n.get("currency_id").setValue(t.id):n.get("currency_id").setValue(e[0].id)}}),c.documents.getPaymentMethods({}).subscribe(function(e){c.paymentMethods=e}),c.documents.getMeansPayment({}).subscribe(function(e){c.meansPayment=e,n.get("means_payment_id").setValue(e[0].id)}),c.documents.getTimeLimits({}).subscribe(function(e){c.timeLimits=e}),c.perSer.getCustomersAll().subscribe(function(e){c.customers=e,c.hideSpinner()}),c.branch.getPointsOfSale({}).subscribe(function(e){c.points_of_sale=e,e.length>0&&c.customForm.get("point_of_sale_id").setValue(e[0].id)})}},{key:"ngAfterViewInit",value:function(){}},{key:"onChanegCustomer",value:function(e){console.log(e)}},{key:"onClickItem",value:function(e){var t=this,c=e,n=t.myDataTable,a=n.getRows();if(a.length>0){var i=-1,o=a.find(function(e,t){return i=t,e.id===c.id&&e.product_unit_id===c.product_unit_id});o?(n.setCellValue(i,"quantity",o.quantity+1),n.clearSelection(),n.selectRow(i),t.onLineTotal(o,i)):(c.discount=0,c.total=0,c.quantity=1,n.addRow(null,c,"last"),n.clearSelection(),n.selectRow(a.length-1),t.onLineTotal(c,a.length-1))}else c.discount=0,c.total=0,c.quantity=1,n.addRow(null,c,"last"),n.clearSelection(),n.selectRow(a.length-1),t.onLineTotal(c,0)}},{key:"onRowSelect",value:function(e){this.selectedRow=!0,this.rowIndex=e.args.index}},{key:"onRowUnselect",value:function(e){this.selectedRow=!1,this.rowIndex=-1}},{key:"onCellEndEdit",value:function(e){"reason"!=e.args.dataField&&(""==e.args.displayValue&&this.myDataTable.setCellValue(e.args.index,e.args.dataField,0),this.onLineTotal(e.args.row,e.args.index))}},{key:"onClearFilter",value:function(){var e=this;e.searchbar.nativeElement.value="",e.searchbar2.nativeElement.value="",e.searchbar3.nativeElement.value="",e.itemsResult=e.items,e.onSearchProducts("",0)}},{key:"onSearchProducts",value:function(e,t){var c=this;if(c.showSpinner(),c.items.length>=0&&0===e.length)return c.items=[],c.itemsResult=[],void c.hideSpinner();var n=c.customForm.get("point_of_sale_id").value;c.itemsSer.getSalesProducts({point_of_sale_id:n,query_search:e,type:t}).subscribe(function(e){c.items=e,c.itemsResult=e,c.hideSpinner()},function(e){console.log(e),c.hideSpinner()})}},{key:"onAdd",value:function(){var e=this,t=e.myDataTable,c=t.getSelection()[0];if(e.rowIndex>=0&&c){var n=parseFloat(c.quantity.toString())+1;t.setCellValue(e.rowIndex,"quantity",n),e.onLineTotal(c,e.rowIndex)}else e.msg.toastMessage("Seleccionar","Debe seleccionar una l\xednea.",4)}},{key:"onDelete",value:function(){var e=this;e.rowIndex>=0&&(e.myDataTable.deleteRow(e.rowIndex),e.msg.toastMessage("Quitar cantidad","Se ha quitado una linea de venta."),e.onSum())}},{key:"onMinus",value:function(){var e=this,t=e.myDataTable,c=t.getSelection()[0];if(e.rowIndex<0&&!c)e.msg.toastMessage("Seleccionar","Debe seleccionar una l\xednea.",4);else{var n=parseFloat(c.quantity.toString())-1;n<=0?e.msg.toastMessage("Quitar cantidad","No se puede dejar la cantidad en cero.",3):(t.setCellValue(e.rowIndex,"quantity",n),e.onLineTotal(c,e.rowIndex))}}},{key:"onCancel",value:function(){this.myDataTable.clear(),this.onSum()}},{key:"onCash",value:function(e){this.modal=this.modalService.open(e,{ariaLabelledBy:"modal-basic-title"}),this.modal.result.then(function(e){},function(e){console.log(e)})}},{key:"onLineTotal",value:function(e,t){var c=this.myDataTable,n=parseFloat(e.tax_sale_rate.toString()),a=parseFloat(e.discount.toString()),i=parseFloat(e.sale_price.toString())*parseFloat(e.quantity.toString())-a,o=i-i/n;c.setCellValue(t,"total",i),c.setCellValue(t,"tax_amount",o),this.onSum()}},{key:"onSum",value:function(){var e=0,t=0,c=0,n=0,a=this.customForm,i=this.myDataTable.getRows();i.length>0&&i.map(function(a,i){n+=a.discount,e+=a.quantity*a.sale_price,t+=a.total,c+=a.tax_amount}),a.get("discount").setValue(n),a.get("subtotal").setValue(e-c),a.get("vat").setValue(c),a.get("total").setValue(t),a.get("cash").setValue(t),a.get("payment_change").setValue(0)}},{key:"onSave",value:function(e){var t=this,c=this,n=c.customForm,a=c.myDataTable.getRows();if(0!=a.length){var i=!0;if(a.map(function(e){if(0==e.quantity)return c.msg.toastMessage("","Hay un error en una de las lineas del documento.",4),i=!1,!1}),i)if(n.invalid)c.msg.toastMessage("","El formulario contiene campos sin llenar.",4);else{var o=a,r=n.getRawValue();r.lines=o;var s={records:JSON.stringify(r)};c.showSpinner("Guardando el documento."),c.modal.close(),c.api.post("/sales/create",s).subscribe(function(c){var n=t;if(n.hideSpinner(),c.success){n.msg.toastMessage("",c.message),n.myDataTable.clear(),n.onSum();var a="".concat(n.api.getAppUrl()).concat(c.report.pathFile);n.pathfile=a,n.onViewDocs(e)}else n.msg.toastMessage("",c.message,4)},function(e){c.msg.toastMessage("",e.error.message,4),c.hideSpinner()})}}else c.msg.toastMessage("","No hay items para generar el documento.",4)}},{key:"onDate",value:function(e){this.AddDays()}},{key:"onChaneCash",value:function(e){var t=this.customForm,c=parseFloat(t.get("cash").value),n=parseFloat(t.get("total").value);t.get("payment_change").setValue(c-n)}},{key:"onExpirationDate",value:function(e){console.log(e)}},{key:"onPaymenMethods",value:function(e){var t=this;t.isCounted=1===e,t.isCounted&&(t.customForm.get("time_limit_id").setValue(t.timeLimits[0].id),t.AddDays())}},{key:"onTimeLimits",value:function(e){this.AddDays()}},{key:"AddDays",value:function(){var e=this.customForm,t=e.get("invoice_date").value,c=new Date(t),n=this.timeLimits.find(function(t){return t.id===e.get("time_limit_id").value});if(n){var a=n.months*n.term_value;c.setDate(c.getDate()+a);var i=c.toISOString().split("T")[0];e.get("expiration_date").setValue(i)}}},{key:"onSearch",value:function(){var e=this,t=this,c=t.modalForm.getRawValue();t.showSpinner(),t.customGrid.clear(),t.reporstSer.getSales({initDate:c.date_from,finalDate:c.date_up,typeId:c.invoice_type_id}).subscribe(function(c){t.hideSpinner(),e.source2.localdata=c,e.customGrid.updatebounddata("cells")},function(e){t.hideSpinner(),console.log(e)})}},{key:"getWidth",value:function(){return"100%"}},{key:"cellClick",value:function(e,t){var c=this,n=e.args,a=this.customGrid.getrowdata(n.rowindex);if("#pdf_#"===n.datafield)if(a.path_report&&1==a.status||a.path_report&&!a.electronic){var i="".concat(c.api.getAppUrl()).concat(a.path_report);c.pathfile=i,c.onViewDocs(t)}else c.showSpinner("Generando archivo..."),c.reporstSer.onInvoice(a).subscribe(function(e){var n="".concat(c.api.getAppUrl()).concat(e.pathFile);c.pathfile=n,c.hideSpinner(),c.onSearch(),c.onViewDocs(t)},function(){return c.hideSpinner()});else"#send_#"===n.datafield?c.sendDocument(a):"#mail_#"===n.datafield?(c.showSpinner("Enviando correo al cliente..."),c.reporstSer.onSendMail(a).subscribe(function(){return c.hideSpinner()},function(){return c.hideSpinner()})):"#cancel_#"===n.datafield&&c.onCancelInvoice(a)}},{key:"onViewDocs",value:function(e){this.cashele&&this.cashele.nativeElement.focus(),this.modal=this.modalService.open(e,{windowClass:"fullscreen-modal",backdrop:!1})}},{key:"sendDocument",value:function(e){var t=this;return e.electronic?1===e.status?(t.msg.toastMessage("","El documento ya fue enviado y validado por la DIAN."),null):(t.showSpinner("Enviando documento a la DIAN..."),void t.api.post("/sendInvoice/".concat(e.id)).subscribe(function(e){e.success?t.msg.toastMessage("",e.message):t.msg.toastMessage("",e.message,4),t.onSearch(),t.hideSpinner()},function(){return t.hideSpinner()})):(t.msg.toastMessage("","El documento documento no requiere validaci\xf3n por la DIAN."),null)}},{key:"onReport",value:function(e){var t=this,c=t.modalForm.getRawValue();t.showSpinner("Generando informe de ventas"),t.reporstSer.getSalesReport({initDate:c.date_from,finalDate:c.date_up,typeId:c.invoice_type_id,typeReport:1}).subscribe(function(c){t.hideSpinner();var n="".concat(t.api.getAppUrl()).concat(c.pathFile);t.pathfile=n,t.onViewDocs(e)},function(e){t.hideSpinner(),console.log(e)})}},{key:"onCancelInvoice",value:function(e){var t=this,c=t.translate;if(4==e.invoice_type_id||5==e.invoice_type_id)return t.msg.toastMessage("","No se puede anular una nota contable.",2),!1;1==e.active?we.a.fire({title:"Anular factura",text:"\xbfSeguro que desea anular el documento?",icon:"question",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:c.instant("buttons.yes"),cancelButtonText:c.instant("buttons.not")}).then(function(c){c.value&&(t.showSpinner("Procesando petici\xf3n."),t.api.post("/sales/cancel/".concat(e.id)).subscribe(function(e){t.hideSpinner(),t.onSearch(),t.msg.toastMessage("","El documento se ha anulado.")},function(e){t.msg.errorMessage("",e.error.message)}))}):we.a.fire({title:"Activar factura anulada.",text:"\xbfSeguro que desea activar el documento anulado?",icon:"question",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:c.instant("buttons.yes"),cancelButtonText:c.instant("buttons.not")}).then(function(c){c.value&&(t.showSpinner("Procesando petici\xf3n."),t.api.post("/sales/activate/".concat(e.id)).subscribe(function(e){t.hideSpinner(),t.onSearch(),t.msg.toastMessage("","El documento se ha activado.")},function(e){t.msg.errorMessage("",e.error.message)}))})}},{key:"onCreateProduct",value:function(){localStorage.setItem("oldRoute",this.router.url),this.goRoute("products/items/create")}}]),r}(Ce.a),Ge.\u0275fac=function(e){return new(e||Ge)(y.Wb(u.e),y.Wb(j.b),y.Wb(j.a),y.Wb(L.c),y.Wb(T.d),y.Wb(L.a),y.Wb(ee.d),y.Wb(ee.b),y.Wb(ee.a),y.Wb(Ie.a),y.Wb(J.e),y.Wb(W.c),y.Wb(xe.a),y.Wb(Y.a),y.Wb(g.r))},Ge.\u0275cmp=y.Qb({type:Ge,selectors:[["app-check-in"]],viewQuery:function(e,t){var c;1&e&&(y.Zc(ke,1),y.Zc(Se,1),y.Zc(Ue,1),y.Zc(Oe,1),y.Zc(Me,1),y.Zc(Fe,1),y.Zc(Pe,1),y.Zc(qe,1)),2&e&&(y.Hc(c=y.nc())&&(t.customGrid=c.first),y.Hc(c=y.nc())&&(t.myDataTable=c.first),y.Hc(c=y.nc())&&(t.searchField=c.first),y.Hc(c=y.nc())&&(t.cashele=c.first),y.Hc(c=y.nc())&&(t.searchbar=c.first),y.Hc(c=y.nc())&&(t.searchbar2=c.first),y.Hc(c=y.nc())&&(t.searchbar3=c.first),y.Hc(c=y.nc())&&(t.myTabs=c.first))},features:[y.Fb],decls:160,vars:63,consts:[[3,"formGroup"],[1,"search-custom",3,"width","height","position","animationType","selectionTracker","theme"],["myTabs",""],[2,"margin-left","30px"],[1,"container-fluid","padding-top-bottom"],[1,"row"],[1,"col-md-4"],[1,"form-group"],[1,"asterisk"],["formControlName","invoice_type_id","required",""],[3,"value",4,"ngFor","ngForOf"],[1,"col-md-8"],["formControlName","customer_id","required","",3,"virtualScroll","change"],["value","0"],[1,"col-md-6"],["formControlName","currency_id","required",""],["fullWidth","","formControlName","point_of_sale_id","required",""],[1,"col"],[1,"page-search-input","form-group"],[1,"input-group"],["type","search","id","searchbar","placeholder","Nombre o referencia",1,"form-control","rounded-right","form-control-lg","shadow","pl-2","space-right",3,"keyup.enter"],["searchbar",""],["type","search","placeholder","SKU",1,"form-control","rounded-right","form-control-lg","shadow","pl-2","search-sku",3,"keyup.enter"],["searchbar2",""],["type","search","placeholder","C\xf3digo de barras",1,"form-control","rounded-right","form-control-lg","shadow","pl-2","search-barcode",3,"keyup.enter"],["searchbar3",""],[1,"input-group-append"],["type","button","ngbTooltip","Crear nuevo producto",1,"btn","btn-success","space-right","radius-button",3,"click"],[1,"fas","fa-plus","fas-fa-22"],["type","button","ngbTooltip","Limpiar",1,"btn","btn-danger","radius-button",3,"click"],[1,"fas","fa-broom","fas-fa-22"],[1,"col-md-5"],[1,"col","card-col"],[1,"card-columns"],["class","card card-sales",3,"click",4,"ngFor","ngForOf"],[1,"col-md-7","card-col"],[1,"col-sm-12","col-md-12","padding-top-bottom"],["type","button",1,"btn","radius-button","btn-primary","space-right","radius-button",3,"disabled","click"],[1,"fas","fa-trash-alt","fas-fa-22"],["type","button",1,"btn","radius-button","btn-success","space-right","radius-button",3,"disabled","click"],["type","button",1,"btn","radius-button","btn-danger","space-right",3,"disabled","click"],[1,"fas","fa-minus","fas-fa-22"],["type","button",1,"btn","radius-button","btn-info","space-right","radius-button",3,"disabled","click"],[1,"fas","fa-money-bill","fas-fa-22","space-right"],["type","button",1,"btn","radius-button","btn-danger","radius-button",3,"disabled","click"],[1,"fas","fa-broom","fas-fa-22","space-right"],["currencyMask","","formControlName","total","aria-describedby","helpId","readonly","",1,"form-control","radius-button","small","total-bg"],[3,"source","columns","theme","columnsResize","editSettings","altRows","editable","height","width","onRowSelect","onRowUnselect","onCellEndEdit"],["myDataTable",""],["currencyMask","","formControlName","subtotal","aria-describedby","helpId","readonly","",1,"form-control","radius-button","small","total"],["currencyMask","","formControlName","discount","aria-describedby","helpId","readonly","",1,"form-control","radius-button","small","discounts"],["currencyMask","","formControlName","vat","aria-describedby","helpId","readonly","",1,"form-control","radius-button","small","vat"],["currencyMask","","formControlName","total","aria-describedby","helpId","readonly","",1,"form-control","radius-button","small","total"],[1,"col-md-2"],["for",""],["type","date","formControlName","date_from","aria-describedby","helpId",1,"form-control"],["type","date","formControlName","date_up","aria-describedby","helpId",1,"form-control"],[1,"col-md-3","padding-top-bottom"],["role","group",1,"btn-group","btn-group-md"],["type","button",1,"btn","btn-info","mb-2","mb-md-0",3,"click"],[1,"fas","fa-search","fas-fa-22","space-right"],["type","button",1,"btn","btn-success","mb-2","mb-md-0",3,"click"],[1,"fas","fa-newspaper","fas-fa-22","space-right"],[3,"width","height","source","columns","theme","selectionmode","columnsresize","sortable","filterable","onCellselect"],["customGrid",""],["content",""],["class","fullscreen-modal"],["contentpdf",""],[2,"color","white"],[3,"value"],["height","15","width","15",3,"src"],[1,"card","card-sales",3,"click"],[1,"card-body"],[1,"stock"],[1,"span"],[1,"img-top"],["fallimg","product",1,"img-product","card-img-top",3,"src"],[1,"price"],[1,"product-name"],["class","unit-name",4,"ngIf"],[1,"unit-name"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"form-group","row","align-items-center"],[1,"col-lg-5","col-6"],[1,"col-lg-7","col-6"],["formControlName","payment_method_id","ngbAutofocus","","autofocus","",3,"change"],["formControlName","means_payment_id"],["type","date","formControlName","invoice_date",1,"form-control",3,"change"],["invoicedate",""],[1,"col-lg-5","col-3"],[1,"col-lg-7","col-9"],["formControlName","time_limit_id",3,"readonly","change"],["type","date","formControlName","expiration_date","readonly","",1,"form-control",3,"change"],["expirationdate",""],[1,"col-lg-2","col-3"],[1,"col-lg-10","col-9"],["currencyMask","","formControlName","total","aria-describedby","helpId","readonly","",1,"form-control","total-bg"],["currencyMask","","type","text","formControlName","cash","aria-describedby","helpId","ngbAutofocus","","autofocus","",1,"form-control","total-bg",3,"keyup"],["cashele",""],["currencyMask","","formControlName","payment_change","aria-describedby","helpId","readonly","",1,"form-control","total-bg"],[1,"modal-footer"],["type","button",1,"btn","radius-button","btn-sm","btn-primary","space-right",3,"disabled","click"],[1,"fas","fa-save","fas-fa-22","space-right"],[1,"btn","radius-button","btn-danger","btn-sm",3,"click"],[1,"fas","fa-undo","fas-fa-22","space-right"],["viewer","url",2,"width","100%","height","100vh",3,"url"]],template:function(e,t){if(1&e){var c=y.dc();y.cc(0,"form",0),y.cc(1,"jqxTabs",1,2),y.cc(3,"ul"),y.cc(4,"li",3),y.Uc(5,"FACTURACI\xd3N"),y.bc(),y.cc(6,"li"),y.Uc(7,"DOCUMENTOS GENERADOS"),y.bc(),y.bc(),y.cc(8,"div",4),y.cc(9,"div",5),y.cc(10,"div",6),y.cc(11,"div",7),y.cc(12,"label"),y.cc(13,"span",8),y.Uc(14),y.pc(15,"translate"),y.bc(),y.Uc(16,"Tipo de documento"),y.bc(),y.cc(17,"ng-select",9),y.Sc(18,Ve,2,3,"ng-option",10),y.bc(),y.bc(),y.bc(),y.cc(19,"div",11),y.cc(20,"div",7),y.cc(21,"label"),y.cc(22,"span",8),y.Uc(23),y.pc(24,"translate"),y.bc(),y.Uc(25,"Cliente"),y.bc(),y.cc(26,"ng-select",12),y.mc("change",function(e){return t.onChanegCustomer(e)}),y.cc(27,"ng-option",13),y.Uc(28,"Cliente final"),y.bc(),y.Sc(29,De,2,4,"ng-option",10),y.bc(),y.bc(),y.bc(),y.bc(),y.cc(30,"div",5),y.cc(31,"div",14),y.cc(32,"div",7),y.cc(33,"label"),y.cc(34,"span",8),y.Uc(35),y.pc(36,"translate"),y.bc(),y.Uc(37),y.pc(38,"translate"),y.bc(),y.cc(39,"ng-select",15),y.Sc(40,Ne,3,3,"ng-option",10),y.bc(),y.bc(),y.bc(),y.cc(41,"div",14),y.cc(42,"div",7),y.cc(43,"label"),y.cc(44,"span",8),y.Uc(45),y.pc(46,"translate"),y.bc(),y.Uc(47,"Punto de venta"),y.bc(),y.cc(48,"ng-select",16),y.cc(49,"ng-option",13),y.Uc(50,"Seleccionar punto de venta"),y.bc(),y.Sc(51,Xe,2,2,"ng-option",10),y.bc(),y.bc(),y.bc(),y.bc(),y.cc(52,"div",5),y.cc(53,"div",17),y.cc(54,"div",18),y.cc(55,"fieldset"),y.cc(56,"div",19),y.cc(57,"input",20,21),y.mc("keyup.enter",function(){y.Lc(c);var e=y.Ic(58);return t.onSearchProducts(e.value,1)}),y.bc(),y.cc(59,"input",22,23),y.mc("keyup.enter",function(){y.Lc(c);var e=y.Ic(60);return t.onSearchProducts(e.value,2)}),y.bc(),y.cc(61,"input",24,25),y.mc("keyup.enter",function(){y.Lc(c);var e=y.Ic(62);return t.onSearchProducts(e.value,3)}),y.bc(),y.cc(63,"div",26),y.cc(64,"button",27),y.mc("click",function(){return t.onCreateProduct()}),y.Xb(65,"i",28),y.bc(),y.cc(66,"button",29),y.mc("click",function(){return t.onClearFilter()}),y.Xb(67,"i",30),y.bc(),y.bc(),y.bc(),y.bc(),y.bc(),y.bc(),y.bc(),y.cc(68,"div",5),y.cc(69,"div",31),y.cc(70,"div",5),y.cc(71,"div",32),y.cc(72,"div",33),y.Sc(73,Re,15,8,"div",34),y.bc(),y.bc(),y.bc(),y.bc(),y.cc(74,"div",35),y.cc(75,"div",5),y.cc(76,"div",36),y.cc(77,"button",37),y.mc("click",function(){return t.onDelete()}),y.Xb(78,"i",38),y.bc(),y.cc(79,"button",39),y.mc("click",function(){return t.onAdd()}),y.Xb(80,"i",28),y.bc(),y.cc(81,"button",40),y.mc("click",function(){return t.onMinus()}),y.Xb(82,"i",41),y.bc(),y.cc(83,"button",42),y.mc("click",function(){y.Lc(c);var e=y.Ic(154);return t.onCash(e)}),y.Xb(84,"i",43),y.Uc(85,"Cobrar"),y.bc(),y.cc(86,"button",44),y.mc("click",function(){return t.onCancel()}),y.Xb(87,"i",45),y.Uc(88,"Cancelar"),y.bc(),y.bc(),y.cc(89,"div",36),y.Xb(90,"input",46),y.bc(),y.bc(),y.cc(91,"div",5),y.cc(92,"div",17),y.cc(93,"jqxDataTable",47,48),y.mc("onRowSelect",function(e){return t.onRowSelect(e)})("onRowUnselect",function(e){return t.onRowUnselect(e)})("onCellEndEdit",function(e){return t.onCellEndEdit(e)}),y.bc(),y.bc(),y.bc(),y.cc(95,"div",5),y.cc(96,"div",14),y.cc(97,"div",7),y.cc(98,"label"),y.Uc(99," Subtotal"),y.bc(),y.Xb(100,"input",49),y.bc(),y.bc(),y.cc(101,"div",14),y.cc(102,"div",7),y.cc(103,"label"),y.Uc(104," Descuento"),y.bc(),y.Xb(105,"input",50),y.bc(),y.bc(),y.bc(),y.cc(106,"div",5),y.cc(107,"div",14),y.cc(108,"div",7),y.cc(109,"label"),y.Uc(110," IVA"),y.bc(),y.Xb(111,"input",51),y.bc(),y.bc(),y.cc(112,"div",14),y.cc(113,"div",7),y.cc(114,"label"),y.Uc(115," Total"),y.bc(),y.Xb(116,"input",52),y.bc(),y.bc(),y.bc(),y.bc(),y.bc(),y.bc(),y.cc(117,"div",4),y.cc(118,"form",0),y.cc(119,"div",5),y.cc(120,"div",53),y.cc(121,"div",7),y.cc(122,"label",54),y.Uc(123,"Fecha desde"),y.bc(),y.Xb(124,"input",55),y.bc(),y.bc(),y.cc(125,"div",53),y.cc(126,"div",7),y.cc(127,"label",54),y.Uc(128,"Fecha hasta"),y.bc(),y.Xb(129,"input",56),y.bc(),y.bc(),y.cc(130,"div",31),y.cc(131,"div",7),y.cc(132,"label"),y.cc(133,"span",8),y.Uc(134),y.pc(135,"translate"),y.bc(),y.Uc(136,"Tipo de documento"),y.bc(),y.cc(137,"ng-select",9),y.Sc(138,We,2,3,"ng-option",10),y.bc(),y.bc(),y.bc(),y.cc(139,"div",57),y.cc(140,"div",58),y.cc(141,"button",59),y.mc("click",function(){return t.onSearch()}),y.Xb(142,"i",60),y.Uc(143),y.pc(144,"translate"),y.bc(),y.cc(145,"button",61),y.mc("click",function(){y.Lc(c);var e=y.Ic(156);return t.onReport(e)}),y.Xb(146,"i",62),y.Uc(147),y.pc(148,"translate"),y.bc(),y.bc(),y.bc(),y.bc(),y.cc(149,"div",5),y.cc(150,"div",17),y.cc(151,"jqxGrid",63,64),y.mc("onCellselect",function(e){y.Lc(c);var n=y.Ic(156);return t.cellClick(e,n)}),y.bc(),y.bc(),y.bc(),y.bc(),y.bc(),y.bc(),y.Sc(153,ze,71,11,"ng-template",null,65,y.Tc),y.Sc(155,je,8,1,"ng-template",66,67,y.Tc),y.bc(),y.cc(157,"ngx-spinner"),y.cc(158,"p",68),y.Uc(159),y.bc(),y.bc()}2&e&&(y.vc("formGroup",t.customForm),y.Ib(1),y.vc("width","100%")("height","100%")("position","top")("animationType","fade")("selectionTracker",!1)("theme",t.theme),y.Ib(13),y.Vc(y.qc(15,47,"general.asterisk")),y.Ib(4),y.vc("ngForOf",t.aDocuments),y.Ib(5),y.Vc(y.qc(24,49,"general.asterisk")),y.Ib(3),y.vc("virtualScroll",!0),y.Ib(3),y.vc("ngForOf",t.customers),y.Ib(6),y.Vc(y.qc(36,51,"general.asterisk")),y.Ib(2),y.Vc(y.qc(38,53,"general.currency")),y.Ib(3),y.vc("ngForOf",t.currency),y.Ib(5),y.Wc(" ",y.qc(46,55,"general.asterisk"),""),y.Ib(6),y.vc("ngForOf",t.points_of_sale),y.Ib(22),y.vc("ngForOf",t.itemsResult),y.Ib(4),y.vc("disabled",!t.selectedRow),y.Ib(2),y.vc("disabled",!t.selectedRow),y.Ib(2),y.vc("disabled",!t.selectedRow),y.Ib(2),y.vc("disabled",!t.selectedRow),y.Ib(3),y.vc("disabled",!t.selectedRow),y.Ib(7),y.vc("source",t.dataAdapter)("columns",t.columns)("theme",t.theme)("columnsResize",!0)("editSettings",t.editSettings)("altRows",!0)("editable",!0)("height",300)("width",t.getWidth()),y.Ib(25),y.vc("formGroup",t.modalForm),y.Ib(16),y.Vc(y.qc(135,57,"general.asterisk")),y.Ib(4),y.vc("ngForOf",t.aDocuments),y.Ib(5),y.Wc(" ",y.qc(144,59,"buttons.search")," "),y.Ib(4),y.Wc(" ",y.qc(148,61,"buttons.report")," "),y.Ib(4),y.vc("width",t.getWidth())("height",550)("source",t.dataAdapter2)("columns",t.columns2)("theme",t.theme)("selectionmode","singlecell")("columnsresize",!0)("sortable",!0)("filterable",!0),y.Ib(8),y.Wc(" ",t.maskSpinner," "))},directives:[u.z,u.q,u.h,p.a,f.a,u.p,u.g,u.w,l.m,f.d,g.N,u.c,v.a,m.a,d.a,W.a,l.n,X],pipes:[T.c,l.d],styles:[".search-sku[_ngcontent-%COMP%]{margin-right:5px;max-width:200px}.search-barcode[_ngcontent-%COMP%]{margin-right:5px;max-width:250px}@media (max-width:768px){.search-barcode[_ngcontent-%COMP%], .search-sku[_ngcontent-%COMP%]{margin-right:0;max-width:0;visibility:hidden}}.create-customer[_ngcontent-%COMP%]{background-color:#a50721!important;color:#fff!important;font-weight:700!important}.search-custom[_ngcontent-%COMP%]{background:#fff!important;border-radius:10px;box-shadow:0 2px 8px 0 rgba(50,50,50,.322);padding-bottom:5px!important}.card-col[_ngcontent-%COMP%]{min-height:200px;overflow:auto}.card-col-product[_ngcontent-%COMP%]{max-height:200px;min-height:100px;overflow:auto}.discounts[_ngcontent-%COMP%]{color:green;font-weight:700}.total[_ngcontent-%COMP%], .total-bg[_ngcontent-%COMP%]{color:red;font-weight:700}.total-bg[_ngcontent-%COMP%]{font-size:18px}.vat[_ngcontent-%COMP%]{color:#00f;font-weight:700}.padding-card[_ngcontent-%COMP%]{padding:5px}.padding-2[_ngcontent-%COMP%]{padding:2px}.card-sales[_ngcontent-%COMP%]{border:2px solid hsla(0,0%,100%,.247);box-shadow:0 2px 6px 0 rgba(50,50,50,.322);margin:5px!important;min-height:120px!important}.card-sales[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]{color:red;font-size:14px;font-weight:700;margin-bottom:auto;margin-top:auto;padding-bottom:4px;padding-top:4px;text-align:right}.card-sales[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{padding:4px}.card-sales[_ngcontent-%COMP%]   .stock[_ngcontent-%COMP%]{background-color:rgba(23,58,253,.796078431372549);border-radius:10px 0 10px 0;height:24px;margin-left:auto;max-width:120px;padding:4px;position:absolute;text-align:right;width:67%;z-index:2}.card-sales[_ngcontent-%COMP%]   .stock[_ngcontent-%COMP%]   .span[_ngcontent-%COMP%]{color:#fff;font-size:14px;font-weight:700}.card-sales[_ngcontent-%COMP%]   .product-name[_ngcontent-%COMP%], .card-sales[_ngcontent-%COMP%]   .unit-name[_ngcontent-%COMP%]{font-size:12px;font-weight:700;margin-bottom:0!important;text-align:center;text-transform:uppercase}.card-sales[_ngcontent-%COMP%]   .unit-name[_ngcontent-%COMP%]{background-color:#470147;border-radius:4px;color:#fff;padding:2px}.card-sales[_ngcontent-%COMP%]   .img-product[_ngcontent-%COMP%]{display:block;margin:auto;max-width:62px}.card-sales[_ngcontent-%COMP%]   .img-product[_ngcontent-%COMP%]:hover{border-radius:10px;box-shadow:0 2px 8px 0 rgba(50,50,50,.75)}.card-sales[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding-bottom:1px!important;padding-left:4px;padding-right:4px;padding-top:1px!important}.card-sales[_ngcontent-%COMP%]:hover{border:2px solid rgba(23,58,253,.12156862745098039);cursor:pointer}.card-sales[_ngcontent-%COMP%]::-moz-selection{border:2px solid #8a2be2}.card-sales[_ngcontent-%COMP%]::selection{border:2px solid #8a2be2}[_nghost-%COMP%]     .switchery-primary .switch{background:#fff}[_nghost-%COMP%]     .switchery-primary .switch.checked{background:#975aff}[_nghost-%COMP%]     .switchery-info .switch{background:#fff}[_nghost-%COMP%]     .switchery-info .switch.checked{background:#2f8be6}[_nghost-%COMP%]     .switchery-success .switch{background:#fff}[_nghost-%COMP%]     .switchery-success .switch.checked{background:#40c057}[_nghost-%COMP%]     .switchery-warning .switch{background:#fff}[_nghost-%COMP%]     .switchery-warning .switch.checked{background:#f77e17}[_nghost-%COMP%]     .switchery-danger .switch{background:#fff}[_nghost-%COMP%]     .switchery-danger .switch.checked{background:#f55252}[_nghost-%COMP%]     .switchery-secondary .switch{background:#fff}[_nghost-%COMP%]     .switchery-secondary .switch.checked{background:#616d89}"]}),Ge)},{path:"customers",component:Z},{path:"customers/create",component:ye},{path:"customers/edit/:id",component:ye}]}],Ze=((He=function e(){o(this,e)}).\u0275fac=function(e){return new(e||He)},He.\u0275mod=y.Ub({type:He}),He.\u0275inj=y.Tb({imports:[[L.f.forChild(Be)],L.f]}),He),Qe={align:"right",allowNegative:!0,allowZero:!0,decimal:".",precision:2,prefix:"$ ",suffix:"",thousands:",",nullable:!0},Je=(($e=function e(){o(this,e)}).\u0275fac=function(e){return new(e||$e)},$e.\u0275mod=y.Ub({type:$e}),$e.\u0275inj=y.Tb({imports:[[l.c,Ze,g.t,R.a,W.b,g.C,A,v.b.forRoot(Qe),b.b,p.b,m.b,f.c,d.b,u.v,T.b]]}),$e)}}])}();